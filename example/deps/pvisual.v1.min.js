(function(i){if(!i.d3){console.error("Pvisual needs the support of d3")}var k=i.d3;var f="Pvisual";var d=function(){return{color:k.map({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"}),colorArray:["#579ce2","#87bdf4","#3bb4df","#7fd1ef","#a380ff","#baa0ff","#a164c5","#c28fe1","#d93a92","#ec74b6","#b82377","#d569a7","#bb3ca3","#d381c2","#da2d57","#ec6b8a","#4ca716","#4ca716","#5b63c2","#8e93d7","#15a9a3","#4ecac5","#a9ab48","#e8c670","#2aa5f5","#73c4fa","#f67e10","#feb648","#1faa77","#62c8a2","#eb4f20","#f58563","#ffc000","#ffd659","#f16ebc","#f6a1d3","#d23457","#e27b92"]}};var h=function(){};h.version=function(){return"v0.0.5-alpha"};h.windowSize=function(){var l={width:800,height:500};if(i.innerWidth&&i.innerHeight){l.width=i.innerWidth;l.height=i.innerHeight}if(document.body&&document.body.offsetWidth){l.width=document.body.offsetWidth;l.height=document.body.offsetHeight}if(document.documentElement&&document.documentElement.clientHeight&&document.documentElement.clientWidth){l.width=document.documentElement.clientWidth;l.height=document.documentElement.clientHeight}return l};h.color=function(){var l=d();var m=function(o){if(isFinite(o)){if(l.custom){return l.customArray[o%l.customArray.length]}else{return l.colorArray[o%l.colorArray.length]}}else{if(typeof o==="function"){if(l.custom){return(o(l.customArray))}else{return(o(l.colorArray))}}else{if(typeof o==="string"){if(!l.range){l.range=k.set([]);l.rangeArray=[]}if(l.range.has(o)){var n;for(n=0;n<l.rangeArray.length;n++){if(l.rangeArray[n]===o){break}}if(l.custom){return l.customArray[n%l.customArray.length]}else{return l.colorArray[n%l.colorArray.length]}}else{l.range.add(o);l.rangeArray=l.range.values();if(l.custom){return l.customArray[(l.rangeArray.length-1)%l.customArray.length]}else{return l.colorArray[(l.rangeArray.length-1)%l.colorArray.length]}}}}}};m.domain=function(n){if(typeof n==="object"&&n.constructor===Array){l.custom=k.set(n);l.customArray=l.custom.values();return m}else{if(arguments.length===0){return l.customArray}else{console.error("The color should be Array")}}};m.range=function(n){if(typeof n==="object"&&n.constructor===Array){l.range=k.set(n);l.rangeArray=l.range.values();return m}else{if(arguments.length===0){return l.rangeArray}else{console.error("The range should be Array")}}};m.getColorLib=function(){return l.color.entries()};m.gradientColor=function(o,r){if(!(typeof o==="object"&&o.constructor===Array)){console.error("The color should be Array")}var q=o[0];var n=o.length;var p=o[n-1];r=r||"default";if(r==="default"){return k.interpolateRgb.apply(null,[q,p])}else{return r.call(this,o)}};return m};h.keys=function(l){return k.keys.call(this,l)};h.values=function(l){if(typeof l==="object"&&l.constructor===Array){return l}return h.keys.map(function(m){return l[m]})};h.sum=function(m,n){var l=0;if(typeof obj==="object"&&obj.constructor===Array){n===undfined?l=k.sum(m):l=k.sum(m,n)}else{if(typeof obj==="object"){n===undfined?l=k.sum(h.values(m)):l=k.sum(h.keys(m).map(n).map(function(o){return m[o]}))}else{console.error("The list should be Array or Object with Numical attributes")}}return l};h.clone=function(m){if(typeof m!=="object"&&typeof m!=="function"){return m}if(typeof m==="function"){return(new m()).constructor}var n={};if(m.constructor===Array){n=[];for(var l=0;l<m.length;l++){n.push(h.clone(m[l]))}}else{for(var l in m){n[l]=h.clone(m[l])}}return n};h.floatTag=function(s){var q=function(){};var p;var l;var r=function(B){var x=B.offsetWidth;var A=B.offsetHeight;var v=(function y(t){return t.offsetLeft+(t.offsetParent?y(t.offsetParent):t.x?t.x:0)}(B));var z=(function u(t){return(t.offsetParent?t.offsetTop+u(t.offsetParent):t.y?t.y:0)}(B));return{top:z,left:v,width:x,height:A,bottom:z+A,right:v+x}};var o=function(u){var t=u.x;var A=u.y;var w=r(l);var v=(p.node()).clientWidth;var z=(p.node()).clientHeight;if(t+v<=w.left+l.clientWidth){t=t-w.left}else{t=t-w.left-v}if(A+z<=w.top+l.clientHeight){A=A-w.top}else{A=A-w.top-z}p.style({left:t+"px",top:A+"px"})};var n=function(){if(!k.event){return false}q.call(this);o({x:k.event.pageX,y:k.event.pageY})};var m=function(t){l=t;p=k.select(l).append("div").classed("floatTag",true).style({border:"2px solid","border-color":"rgb(0, 0, 0)","background-color":"rgba(255, 255, 255, 0.85)","font-color":"rgb(0,0,0)","border-radius":"4px",padding:"12px 8px","font-size":"12px","box-shadow":" 1px 1px 1px 0px rgba(0,0,0,.5)","font-family":'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, Arial',"z-index":1000,"white-space":"nowrap","text-align":"center",opacity:"0",position:"absolute",transition:"opacity .15s","-moz-transition":"opacity .15s","-webkit-transition":"opacity .15s","-o-transition":"opacity .15s",top:60,left:60});k.select(l).on("mousemove",n);p.creator=m;return p};m.setContent=function(t){if(arguments.length===0){return q}q=t;return m};m.mouseToFloatTag=function(t){if(arguments.length===0){return mouseToFloatTag}mouseToFloatTag=t;return m};m.changeLoc=o;return m(s)};h.extend=function(n,l){var m=function(){};n=n||h;l=l||{};n.apply(m,arguments);m.prototype=new n();m.prototype.constructor=m;for(var o in n){if(m.hasOwnProperty(o)){continue}m[o]=n[o]}for(var o in l){if(m.hasOwnProperty(o)){continue}m[o]=l[o]}return m};h.check=function(p,l){var o={};o.data=p;o.numMiss=0;o.flag=true;if(!o.data){console.error("Failed to load the data. Please check your file format");return}if(typeof o.data==="object"&&o.data.constructor===Array&&o.data.length>1){o.data.forEach(function(q){o.dimensions=h.keys(q);o.dimensions.forEach(function(r){if(q[r]==="0"){q[r]=0}q[r]=+q[r]||q[r]})});for(var m=1,n;m<o.data.length;m++){if(!o.flag){m--}n=o.data[m];if(m<o.data.length){if(!c.call(o,o.data[0],n,m)){console.error(((m===0)||(m===1))?"Wrong data structure: data 0 or data 1 is wrong":"Wrong data structure: data "+(m+1)+" is wrong");o.dataInFormat={meta:{isNested:true,isError:true},data:o.data};break}}else{break}}o.dataInFormat=g.call(o,o.data,l||"",o.numMiss)}else{if(typeof o.data==="object"){o.dataInFormat=g(o.data,l||"",o.numMiss)}}return o};h.json=function(l,m){k.json(l,function(n){n.type="json";m.call(this,n)})};h.csv=function(l,m){k.csv(l,function(n){n.type="csv";m.call(this,n)})};h.tsv=function(l,m){k.tsv(l,function(n){n.type="tsv";m.call(this,n)})};h.xml=function(l,n){var m;k.xml(l,function(o){var p=o.documentElement;m=a(p,0,[]);m.type="xml";n(m)})};h.xlsx=function(m,o){var n=[];n.name=m.name;n.type="xlsx";var l=new FileReader();l.onload=function(s){var r=s.target.result;var p=String.fromCharCode.apply(null,new Uint8Array(r));var q=XLSX.read(btoa(p),{type:"base64"});q.SheetNames.forEach(function(w){var u=XLSX.utils.sheet_to_csv(q.Sheets[w]);var t=u.split("\n");t.pop();var x=t.shift().split(",").map(function(z){z=z.replace(/"+/g,"");z=+z||z;return z});var y=[];t.forEach(function(z){var B={};var A=z.split(",").map(function(C){C=C.replace(/\"+/g,"");C=+C||C;return C});x.forEach(function(D,C){B[D]=A[C]||0});y.push(B)});var v={};v[w]=y;n.push(v)});o(n)};l.readAsArrayBuffer(m)};h.xls=function(m,o){var n=[];n.name=m.name;n.type="xls";var l=new FileReader();l.onload=function(s){var r=s.target.result;var p=XLS.CFB.read(r,{type:"binary"});var q=XLS.parse_xlscfb(p);q.SheetNames.forEach(function(w){var u=XLS.utils.make_csv(q.Sheets[w]);var t=u.split("\n");t.pop();var x=t.shift().split(",").map(function(z){z=z.replace(/"+/g,"");z=+z||z;return z});var y=[];t.forEach(function(z){var B={};var A=z.split(",").map(function(C){C=C.replace(/\"+/g,"");C=+C||C;return C});x.forEach(function(D,C){B[D]=A[C]||0});y.push(B)});var v={};v[w]=y;n.push(v)});o(n)};l.readAsBinaryString(m)};h.save=function(l,q){function m(){var u=null;var s;if(q==="svg"){for(var t=0;t<l.processing.buffer.length;t++){u=new XMLSerializer().serializeToString(l.processing.buffer[t][0]);s=p(u,"image/svg+xml");if(l.output==="save"){saveAs(s,"export.svg")}else{if(l.output==="datastring"||l.output==="datauristring"||l.output==="dataurlstring"){s="data:image/svg+xml;base64,"+btoa(u)}else{if(l.output==="dataurlnewwindow"){window.open("data:image/svg+xml;base64,"+btoa(u))}else{if(l.output==="datauri"||l.output==="dataurl"){location.href="data:image/svg+xml;base64,"+btoa(u)}else{if(l.output==="datastream"){location.href="data:image/octet-stream;base64,"+btoa(u)}}}}}}}else{if(q==="application/pdf"||q==="pdf"){u=o(l).output("dataurlstring");s=p(u,"application/pdf");if(l.output==="save"){saveAs(s,"export.pdf")}else{if(l.output==="datastring"||l.output==="datauristring"||l.output==="dataurlstring"){s=u}else{if(l.output==="dataurlnewwindow"){window.open(u)}else{if(l.output==="datauri"||l.output==="dataurl"){location.href=u}else{if(l.output==="datastream"){location.href=u.replace("application/pdf","application/octet-stream")}}}}}}else{if(q==="png"){u=l.canvas.toDataURL("image/png");s=p(u,"image/png");if(l.output==="save"){saveAs(s,"export.png")}else{if(l.output==="datastring"||l.output==="datauristring"||l.output==="dataurlstring"){s=u}else{if(l.output==="dataurlnewwindow"){window.open(u)}else{if(l.output==="datauri"||l.output==="dataurl"){location.href=u}else{if(l.output==="datastream"){location.href=u.replace("image/png","image/octet-stream")}}}}}}else{if(q==="jpeg"||q==="jpg"){u=l.canvas.toDataURL("image/jpeg");s=p(u,"image/jpeg");if(l.output==="save"){saveAs(s,"export.jpg")}else{if(l.output==="datastring"||l.output==="datauristring"||l.output==="dataurlstring"){s=u}else{if(l.output==="dataurlnewwindow"){window.open(u)}else{if(l.output==="datauri"||l.output==="dataurl"){location.href=u}else{if(l.output==="datastream"){location.href=u.replace("image/jpeg","image/octet-stream")}}}}}}}}}}function n(z){var x=document.getElementsByTagName("svg");var u=document.createElement("canvas");var t=u.getContext("2d");var v={y:0,x:0};l.svgs=x;l.processing.buffer=[];l.processing.drawn=0;l.canvas=u;for(var w=0;w<x.length;w++){var y=x[w].parentNode;var B=Number(y.style.left.slice(0,-2));var A=Number(y.style.top.slice(0,-2));v.x=B?B:v.x;v.y=A?A:v.y;l.processing.buffer.push([x[w],v])}u.id="canvas";u.width=l.svgs[0].clientWidth;u.height=l.svgs[0].clientHeight;if(l.backgroundColor||q==="jpeg"||q==="jpg"||q==="pdf"){t.fillStyle=l.backgroundColor||"#FFFFFF";t.fillRect(0,0,u.width,u.height)}function s(){var D,C,F,E;if(l.processing.buffer.length===l.processing.drawn){return z()}else{C=l.processing.buffer[l.processing.drawn];E=new XMLSerializer().serializeToString(C[0]);F=C[1];canvg(u,E,{offsetX:F.x,offsetY:F.y,ignoreMouse:true,ignoreAnimation:true,ignoreDimensions:true,ignoreClear:true,renderCallback:function(){l.processing.drawn++;s()}})}}return s()}function r(C){var z=C.length;var w=new Uint8Array(z/4*3|0);var y=0;var B=0;var D=[0,0];var s=0;var A=0;var x,t,u,v=new Uint8Array([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]);while(z--){t=C.charCodeAt(y++);x=v[t-43];if(x!==255&&x!==u){D[1]=D[0];D[0]=t;A=(A<<6)|x;s++;if(s===4){w[B++]=A>>>16;if(D[1]!==61){w[B++]=A>>>8}if(D[0]!==61){w[B++]=A}s=0}}}return w}function p(w,u){var s=w.indexOf(",")+1;var x=w.substring(0,s);var v=w;var t=new Blob();if(x.indexOf("base64")!==-1){v=r(w.substring(s))}if(false){t.data=v;t.size=v.length;t.type=u;t.encoding="base64"}else{t=new Blob([v],{type:u})}return t}function o(){var t={output:function(){return""}};var v=l.canvas.toDataURL("image/jpeg");var u=l.canvas.width/5;var s=l.canvas.height/5;if(window.jsPDF){t=new jsPDF();if(t.addImage){t.addImage(v,"JPEG",0,0,u,s)}else{console.error('Missing jsPDF plugin; Please add the "addImage" plugin.')}}else{console.error('Missing jsPDF lib; Do not forget to add the "addImage" plugin.')}return t}return n(m)};h.save.generateButtons=function(n,l){if(!l){l={output:"save",processing:{},dpi:150,exportConfig:{menuTop:"auto",menuLeft:"auto",menuBottom:"auto",menuRight:"auto",menuItemStyle:{backgroundColor:"#EFEFEF",rollOverBackgroundColor:"#DDDDDD",color:"#000000",rollOverColor:"#CC0000",paddingTop:"6px",paddingRight:"6px",paddingBottom:"6px",paddingLeft:"6px",marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",textAlign:"left",textDecoration:"none"},menuItems:[{textAlign:"center",icon:"export.png",onclick:function(){},items:[{title:"JPG",format:"jpg"},{title:"PNG",format:"png"},{title:"SVG",format:"svg"},{title:"PDF",format:"pdf"}]}]}}}var p=document.createElement("div");var m=0;function o(t){var w=document.createElement("ul");w.setAttribute("style","list-style: none; margin: 0; padding: 0;");for(var v=0;v<t.length;v++){var q=document.createElement("li");var s=document.createElement("img");var r=document.createElement("a");var x=t[v];var u=null;if(x.icon){s.alt="保存";s.src=x.icon;s.setAttribute("style","margin: 0 auto;border: none;outline: none");if(x.iconTitle){s.title=x.iconTitle}r.appendChild(s)}r.href="#";if(x.title){s.setAttribute("style","margin-right: 5px;");r.innerHTML+=x.title}r.setAttribute("style","display: block; background-color: rgb(239, 239, 239); color: rgb(0, 0, 0); padding: 6px; margin: 0px; text-align: left; text-decoration: none; font-family: Verdana; font-size: 11px;");r.format=x.format;r.onclick=x.onclick||function(){h.save(l,this.format)};q.appendChild(r);if(x.items){u=o(x.items);q.appendChild(u);q.onmouseover=function(){u.style.display="block"};q.onmouseout=function(){u.style.display="none"};u.style.display="none"}w.appendChild(q);r.onmouseover=function(){this.style.backgroundColor=l.exportConfig.menuItemStyle.rollOverBackgroundColor;this.style.color=l.exportConfig.menuItemStyle.rollOverColor;this.style.borderColor=l.exportConfig.menuItemStyle.rollOverBorderColor};r.onmouseout=function(){this.style.backgroundColor=l.exportConfig.menuItemStyle.backgroundColor;this.style.color=l.exportConfig.menuItemStyle.color;this.style.borderColor=l.exportConfig.menuItemStyle.borderColor}}m++;return w}p.setAttribute("style","width:39px; position: absolute;top:"+l.exportConfig.menuTop+";right:"+l.exportConfig.menuRight+";bottom:"+l.exportConfig.menuBottom+";left:"+l.exportConfig.menuLeft+";box-shadow:0px 0px 1px 0px rgba(0,0,0,0);");p.appendChild(o(l.exportConfig.menuItems));n.appendChild(p)};h.model={};h.model.area=function(){var P=h.extend();var X=i.d3;var af="面积图";var l=900;var n=400;var u=l-200;var y=n-100;var ae=50;var ad=10;var ab;var m="Arial";var Z;var p;var E=1000;var M=X.format("s");var I=P.color();var A;var V;var R=null;var N=false;var aa=false;var H="";var F="";var Q=0;var o=0;var C=8;var T="#000000";var U=8;var r=5;var Y=5;var G=5;var J=8;var D="#929292";var O="#929292";var W=2;var x="#000000";var q="#000000";var s=13;var L=0;var K=0;var t=10;var w=100;P.getType=function(){return af};P.data=function(ai){if(arguments.length){if(ai.type==="xml"){ai=ai.root;ai=ai.map(function(am){var al={};am.row.row.forEach(function(ao){var an=h.keys(ao)[0];al[an]=ao[an]});return al})}else{if(ai.type==="xlsx"||ai.type==="xls"){var ak=[];for(var aj=0;aj<ai.length;aj++){var ah=h.keys(ai[aj])[0];ak=ak.concat(ai[aj][ah])}ai=ak}}ab=ai;V=h.keys(ai[0]).filter(function(al){return al!=="x"}).map(function(al){return{name:al,_flag:true}});var ag=X.layout.stack().values(function(al){return al.value});A=ag(V.map(function(al){return{name:al.name,value:ai.map(function(am){return{x:am.x,y:+am[al.name]}})}}));V.x=A[0].value.map(function(al){return al.x});return this}else{return ab}};P.getType=function(){return af};P.render=function(ap){Z=Z||X.select(ap).node();if(!Z||Z.tagName.toLowerCase()!=="div"){console.error("The argument(element) in area.rander(_) should be <div> element")}X.select(Z).classed("chart",true);p=p||X.select(Z).append("svg").classed("area",true).node();var am;var ao;var al;var ai;var ah;if(R!==null){aa=true}if(aa){ao=X.time.scale().domain(X.extent(V.x,function(aq){return R.parse(aq)})).range([0,u]);A.forEach(function(aq){aq.value.forEach(function(ar){ar.x=R.parse(ar.x)})});A.forEach(function(aq){aq.value.sort(function(at,ar){return at.x.getTime()-ar.x.getTime()})});ai=X.svg.axis().scale(ao).orient("bottom").tickSize(Y).ticks(U)}else{if(N){ao=X.scale.linear().domain(X.extent(V.x,function(aq){return +aq})).range([0,u]);A.forEach(function(aq){aq.value.forEach(function(ar){ar.x=+ar.x})});A.forEach(function(aq){aq.value.sort(function(at,ar){return at.x-ar.x})});ai=X.svg.axis().scale(ao).orient("bottom").ticks(U).tickSize(Y).tickFormat(M)}else{ao=X.scale.ordinal().domain(V.x).rangePoints([0,u],0);ai=X.svg.axis().scale(ao).tickSize(Y).orient("bottom")}}A.forEach(function(ar){var aq=X.max(ar.value,function(at){return at.y0+at.y});am=am>=aq?am:aq});al=X.scale.linear().domain([0,am]).range([y,0]);var an=X.svg.area().x(function(aq){return ao(aq.x)}).y0(function(aq){return al(aq.y0)}).y1(function(aq){return al(aq.y0+aq.y)});ah=X.svg.axis().scale(al).orient("left").ticks(r).tickSize(G).tickFormat(M);var ak=X.select(p).attr({width:l,height:n}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+ae+","+ad+")");ak.call(function(aq){aq.append("svg:g").classed("dimensions",true);aq.append("svg:g").classed("x-axis axis",true);aq.append("svg:g").classed("y-axis axis",true);aq.append("svg:g").classed("legends",true)});ak=X.select(p).select("g");var ag=ak.select(".dimensions").selectAll(".dimension").data(A);ag.exit().transition().duration(E).style("opacity",0).remove();v(ag,an);z(ag,an);var aj=ak.select(".legends").attr("transform","translate("+L+","+K+")").selectAll(".legend").data(V);aj.exit().transition().duration(E).style("opacity",0).remove();S(aj);ac(aj);B(ak,ai,ah)};function B(ah,ai,ag){ah.select(".x-axis").each(function(){X.select(this).select(".label").transition().duration(E).attr({x:u,y:-6}).style({"text-anchor":"end","font-family":m,"font-size":C,fill:T}).text(F);X.select(this).selectAll(".label").data([1]).enter().append("svg:text").classed("label",true).style({"text-anchor":"end","font-family":m,"font-size":C,fill:T}).attr({x:u,y:-6}).text(F);X.select(this).transition().duration(E).attr("transform","translate(0,"+y+")").call(ai)});ah.select(".y-axis").each(function(){X.select(this).select(".label").style({"text-anchor":"end","font-family":m,"font-size":C,fill:T}).text(H);X.select(this).selectAll(".label").data([1]).enter().append("svg:text").classed("label",true).style({"text-anchor":"end","font-family":m,"font-size":C,fill:T}).attr({transform:"rotate(-90)",y:8,dy:".71em"}).text(H);X.select(this).transition().duration(E).call(ag)});ah.selectAll(".axis").call(function(aj){aj.selectAll("path").style({fill:"none",stroke:x,"stroke-width":W,"shape-rendering":"crispEdges"});aj.selectAll("line").style({fill:"none",stroke:O,"shape-rendering":"crispEdges"})});ah.select(".x-axis").selectAll(".tick").select("text").style({"text-anchor":"middle","font-family":m,"font-size":J,fill:D}).attr("transform",function(){return"translate("+this.getComputedTextLength()*Math.abs(Math.sin(Q)*0.5)+","+(this.getComputedTextLength()*(0.3*Math.abs(Math.sin(Q))))+")rotate("+Q+")"});ah.select(".y-axis").selectAll(".tick").select("text").style({"text-anchor":"start","font-family":m,"font-size":J,fill:D}).attr("transform",function(){return"translate("+-this.getComputedTextLength()+", 0)rotate("+o+")"})}function v(ah,ag){ah.transition().duration(E).attr("d",function(ai){return ag(ai.value)}).style("fill",function(ai){return I(ai.name)})}function z(ah,ag){ah.enter().append("svg:path").classed("dimension",true).attr("d",function(ai){return ag(ai.value)}).style("fill",function(ai){return I(ai.name)}).style("opacity",0).transition().duration(E).style("opacity",1)}function ac(ag){ag.enter().append("svg:g").classed("legend",true).style("cursor","pointer").on("click",function(ai){if(!X.select(this).classed("none")){if(V.length>1){X.select(this).classed("none",true);ai._flag=false;var ah=X.layout.stack().values(function(aj){return aj.value});A=ah(V.filter(function(aj){return aj._flag}).map(function(aj){return{name:aj.name,value:ab.map(function(ak){return{x:ak.x,y:+ak[aj.name]}})}}));P.render()}}else{X.select(this).classed("none",false);ai._flag=true;var ah=X.layout.stack().values(function(aj){return aj.value});A=ah(V.filter(function(aj){return aj._flag}).map(function(aj){return{name:aj.name,value:ab.map(function(ak){return{x:ak.x,y:+ak[aj.name]}})}}));P.render()}}).each(function(ai,ah){X.select(this).append("svg:rect").attr({x:(ah-ah%t)/t*w+u+20,y:ah%t*20}).attr({width:10,height:10}).style({fill:I(ah),stroke:I(ah)}).style("fill-opacity",ai._flag?1:0).style("opacity",0).transition().duration(E/2).style("opacity",1);X.select(this).append("svg:text").attr({x:(ah-ah%t)/t*w+u+40,y:ah%t*20+9}).style({opacity:0,"font-size":s,fill:q,"font-family":m}).transition().duration(E/2).style("opacity",1).text(ai.name)})}function S(ag){ag.each(function(ai,ah){X.select(this).selectAll("rect").transition().duration(E/2).style({fill:I(ah),stroke:I(ah)}).style("fill-opacity",ai._flag?1:0).attr({x:(ah-ah%t)/t*w+u+20,y:ah%t*20});X.select(this).selectAll("text").style({"font-size":s,"font-family":m}).transition().duration(E/2).attr({x:(ah-ah%t)/t*w+u+40,y:ah%t*20+9}).style("fill",q).text(ai.name)})}P.size=function(ag){if(!arguments.length){return[l,n]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in area.size(width, height) should be number and number of svg");return this}else{l=arguments[0];n=arguments[1];return this}}};P.sizeAvail=function(ag){if(!arguments.length){return[u,y]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in area.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{u=arguments[0];y=arguments[1];return this}}};P.tran=function(ag){if(!arguments.length){return[ae,ad]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in area.tran(tranX, tranY) should be number and number of svg");return this}else{ae=arguments[0];ad=arguments[1];return this}}};P.fontFamily=function(ag){if(!arguments.length){return m}else{if(typeof arguments[0]!=="string"){console.error("The arguments in area.fontFamily(fontFamily) should be string of text");return this}else{fontSize=arguments[0];return this}}};P.duration=function(ag){if(!arguments.length){return E}else{if(!isFinite(arguments[0])){console.error("The arguments in area.duration(duration) should be number of transition");return this}else{E=Math.round(arguments[0]);return this}}};P.tickFormat=function(ag){if(!arguments.length){return M}else{if(typeof arguments[0]!=="string"){console.error("The arguments in area.tickFormat(format) should be string of d3.format");return this}else{M=X.format(arguments[0]);return this}}};P.timeFormat=function(ag){if(!arguments.length){return R}else{if(typeof arguments[0]!=="string"){console.error("The arguments in area.timeFormat(format) should be string of d3.format");return this}else{R=X.time.format(arguments[0]);return this}}};P.isLinear=function(ag){if(!arguments.length){return N}else{if(N!==true&&N!==false){console.error("The arguments in area.isLinear(isLinear) should be bool");return this}else{N=arguments[0];return this}}};P.xLegend=function(ag){if(!arguments.length){return F}else{if(typeof arguments[0]!=="string"){console.error("The arguments in area.xLegend(xLegend) should be string");return this}else{F=arguments[0];return this}}};P.yLegend=function(ag){if(!arguments.length){return H}else{if(typeof arguments[0]!=="string"){console.error("The arguments in area.yLegend(yLegend) should be string");return this}else{H=arguments[0];return this}}};P.xtickRotate=function(ag){if(!arguments.length){return Q}else{if(!isFinite(arguments[0])){console.error("The arguments in area.xtickRotate(xtickRotate) should be number of tick");return this}else{Q=Math.round(arguments[0]);return this}}};P.ytickRotate=function(ag){if(!arguments.length){return o}else{if(!isFinite(arguments[0])){console.error("The arguments in area.ytickRotate(ytickRotate) should be number of tick");return this}else{o=Math.round(arguments[0]);return this}}};P.labelSize=function(ag){if(!arguments.length){return C}else{if(!isFinite(arguments[0])){console.error("The arguments in area.labelSize(labelSize) should be string");return this}else{C=arguments[0];return this}}};P.labelColor=function(ag){if(!arguments.length){return T}else{if(typeof arguments[0]!=="string"){console.error("The arguments in area.labelColor(labelColor) should be string");return this}else{T=arguments[0];return this}}};P.xtickNumber=function(ag){if(!arguments.length){return U}else{if(!isFinite(arguments[0])){console.error("The arguments in area.xtickNumber(xtickNumber) should be number of tick");return this}else{U=Math.round(arguments[0]);return this}}};P.ytickNumber=function(ag){if(!arguments.length){return r}else{if(!isFinite(arguments[0])){console.error("The arguments in area.ytickNumber(ytickNumber) should be number of tick");return this}else{r=Math.round(arguments[0]);return this}}};P.tickLineColor=function(ag){if(!arguments.length){return O}else{if(typeof arguments[0]!=="string"){console.error("The arguments in area.tickLineColor(tickLineColor) should be string");return this}else{O=arguments[0];return this}}};P.tickTextSize=function(ag){if(!arguments.length){return J}else{if(!isFinite(arguments[0])){console.error("The arguments in area.tickTextSize(tickTextSize) should be number");return this}else{J=arguments[0];return this}}};P.tickTextColor=function(ag){if(!arguments.length){return D}else{if(typeof arguments[0]!=="string"){console.error("The arguments in area.tickTextColor(tickTextColor) should be string");return this}else{D=arguments[0];return this}}};P.axisPathWidth=function(ag){if(!arguments.length){return W}else{if(!isFinite(arguments[0])){console.error("The arguments in area.axisPathWidth(axisPathWidth) should be string");return this}else{W=arguments[0];return this}}};P.axisPathColor=function(ag){if(!arguments.length){return x}else{if(typeof arguments[0]!=="string"){console.error("The arguments in area.axisPathColor(axisPathColor) should be string");return this}else{x=arguments[0];return this}}};P.legendTran=function(ag){if(!arguments.length){return[L,K]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in area.legendTran(tranX, tranY) should be number and number of svg");return this}else{L=arguments[0];K=arguments[1];return this}}};P.legendSize=function(ag){if(!arguments.length){return s}else{if(!isFinite(arguments[0])){console.error("The arguments in area.legendSize(legendSize) should be number of text");return this}else{s=arguments[0];return this}}};P.legendColor=function(ag){if(!arguments.length){return q}else{if(typeof arguments[0]!=="string"){console.error("The arguments in area.legendColor(legendColor) should be string of text");return this}else{q=arguments[0];return this}}};P.legendColumnNo=function(ag){if(!arguments.length){return t}else{if(!isFinite(arguments[0])){console.error("The arguments in area.legendColumnNo(legendColumnNo) should be number of text");return this}else{t=arguments[0];return this}}};P.legendRowGap=function(ag){if(!arguments.length){return w}else{if(!isFinite(arguments[0])){console.error("The arguments in area.legendRowGap(legendRowGap) should be number of text");return this}else{w=arguments[0];return this}}};P.options=function(ag){if(!arguments.length){return{type:P.getType(),width:l,height:n,widthAvail:u,heightAvail:y,tranX:ae,tranY:ad,format:M,fontFamily:m,color:I,duration:E,timeFormat:R,isLinear:N,xLegend:F,yLegend:H,xtickRotate:Q,ytickRotate:o,labelSize:C,labelColor:T,xtickNumber:U,ytickNumber:r,tickTextSize:J,tickTextColor:D,tickLineColor:O,xtickLineLength:Y,ytickLineLength:G,axisPathWidth:W,axisPathColor:x,legendColor:q,legendSize:s,legendTranX:L,legendTranY:K,legendColumnNo:t,legendRowGap:w}}else{if(typeof ag!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{l=isFinite(ag.width)?ag.width:l;n=isFinite(ag.height)?ag.height:n;u=isFinite(ag.widthAvail)?ag.widthAvail:u;y=isFinite(ag.heightAvail)?ag.heightAvail:y;ae=isFinite(ag.tranX)?ag.tranX:ae;ad=isFinite(ag.tranY)?ag.tranY:ad;ag.format&&P.tickFormat(ag.format);ag.fontFamily&&P.fontFamily(ag.fontFamily);isFinite(ag.duration)&&P.duration(ag.duration);ag.isLinear&&P.isLinear(ag.isLinear);ag.xLegend&&P.xLegend(ag.xLegend);ag.yLegend&&P.yLegend(ag.yLegend);isFinite(ag.xtickRotate)&&P.xtickRotate(ag.xtickRotate);isFinite(ag.ytickRotate)&&P.ytickRotate(ag.ytickRotate);isFinite(ag.labelSize)&&P.labelSize(ag.labelSize);ag.labelColor&&P.labelColor(ag.labelColor);isFinite(ag.xtickNumber)&&P.xtickNumber(ag.xtickNumber);isFinite(ag.ytickNumber)&&P.ytickNumber(ag.ytickNumber);isFinite(ag.tickTextSize)&&P.tickTextSize(ag.tickTextSize);ag.tickTextColor&&P.tickTextColor(ag.tickTextColor);ag.tickLineColor&&P.tickLineColor(ag.tickLineColor);isFinite(ag.xtickLineLength)&&P.xtickLineLength(ag.xtickLineLength);isFinite(ag.ytickLineLength)&&P.ytickLineLength(ag.ytickLineLength);isFinite(ag.axisPathWidth)&&P.axisPathWidth(ag.axisPathWidth);ag.axisPathColor&&P.axisPathColor(ag.axisPathColor);ag.legendColor&&P.legendColor(ag.legendColor);isFinite(ag.legendSize)&&P.legendSize(ag.legendSize);L=isFinite(ag.legendTranX)?ag.legendTranX:L;K=isFinite(ag.legendTranY)?ag.legendTranY:K;isFinite(ag.legendColumnNo)&&P.legendColumnNo(ag.legendColumnNo);isFinite(ag.legendRowGap)&&P.legendRowGap(ag.legendRowGap);return this}}};if(arguments.length===1){P.options(arguments[0])}return P};h.model.boxplot=function(){var M=h.extend();var O=i.d3;var X="箱式图";var l=800;var n=500;var t=l-100;var w=n-30;var S;var W=10;var V=10;var x=8;var m="Arial";var G="#000";var q;var Q;var o;var B=1000;var E=O.format("s");var C=M.color();var A;var N;var P=0.2;var J=5;var y=2;var T="#000000";var p="#000000";var r=13;var F=0;var D=0;var s=10;var u=100;M.data=function(Z){if(arguments.length){if(Z.type==="xml"){Z=Z.root;Z=Z.map(function(ad){var ac={};ad.row.row.forEach(function(af){var ae=h.keys(af)[0];ac[ae]=af[ae]});return ac})}else{if(Z.type==="xlsx"||Z.type==="xls"){var ab=[];for(var aa=0;aa<Z.length;aa++){var Y=h.keys(Z[aa])[0];ab=ab.concat(Z[aa][Y])}Z=ab}}S=O.nest().key(function(ac){return ac.name}).sortValues(function(ad,ac){return +ad.value-+ac.value}).entries(Z);return this}else{return S}};M.getType=function(){return X};M.render=function(ag){Q=Q||O.select(ag).node();if(!Q||Q.tagName.toLowerCase()!=="div"){console.error("The argument(element) in boxplot.rander(_) should be <div> element")}O.select(Q).classed("chart",true);o=o||O.select(Q).append("svg").classed("boxplot",true).node();A=S.filter(function(ah){return ah._flag!==false});N=A.map(function(ah){return ah.key});var ac=t/N.length;q=O.select(Q).select(".floatTag").node()?O.select(Q).select(".floatTag"):M.floatTag(Q);var Z=Infinity;var ae=-Infinity;A.forEach(function(ah){Z=Z<+ah.values[0].value?Z:+ah.values[0].value;ae=ae>+ah.values[ah.values.length-1].value?ae:+ah.values[ah.values.length-1].value});var af=O.scale.ordinal();var ad=O.scale.linear();af.rangeBands([0,t]).domain(N);ad.domain([Z,ae]).range([w,0]);O.select(o).attr({width:l,height:n}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+W+","+V+")");var ab=O.select(o).select("g");ab.call(function(ah){ah.append("svg:g").classed("nodes",true);ah.append("svg:g").classed("legends",true)});ab=O.select(o).select("g");var Y=ab.select(".nodes").selectAll(".node").data(A);Y.exit().transition().duration(B).style("opacity",0).remove();v(Y,ac,af,ad);I(Y,ac,af,ad);var aa=ab.select(".legends").attr("transform","translate("+F+","+D+")").selectAll(".legend").data(S);aa.exit().transition().duration(B).style("opacity",0).remove();K(aa);U(aa)};function U(Y){Y.enter().append("svg:g").classed("legend",true).style("cursor","pointer").on("click",function(ab){if(!O.select(this).classed("none")){if(S.length>1){O.select(this).classed("none",true);for(var aa=0,Z;aa<S.length;aa++){Z=S[aa];if(Z.key===ab.key){Z._flag=false;break}}M.render()}}else{O.select(this).classed("none",false);for(var aa=0,Z;aa<S.length;aa++){Z=S[aa];if(Z.key===ab.key){Z._flag=true;break}}M.render()}}).each(function(aa,Z){O.select(this).append("svg:rect").attr({x:(Z-Z%s)/s*u+t-20,y:Z%s*20+10}).attr({width:10,height:10}).style({fill:C(aa.key),stroke:C(aa.key)}).style("fill-opacity",aa._flag!==false?1:0).style("opacity",0).transition().duration(B/2).style("opacity",1);O.select(this).append("svg:text").attr({x:(Z-Z%s)/s*u+t,y:Z%s*20+19}).style({opacity:0,"font-size":r,fill:p,"font-family":m}).transition().duration(B/2).style("opacity",1).text(aa.key)})}function K(Y){Y.each(function(aa,Z){O.select(this).select("rect").transition().duration(B/2).attr({x:(Z-Z%s)/s*u+t-20,y:Z%s*20+10}).style({fill:C(aa.key),stroke:C(aa.key)}).style("fill-opacity",aa._flag!==false?1:0);O.select(this).select("text").transition().duration(B/2).attr({x:(Z-Z%s)/s*u+t,y:Z%s*20+19}).style({"font-size":r,fill:p,"font-family":m}).text(aa.key)})}function I(Z,aa,Y,ac){var ab=aa*P;Z.enter().append("svg:g").classed("node",true).attr("transform",function(ad){return"translate("+Y(ad.key)+",0)"}).on("mouseover",function(ad){z(ad,true)}).on("mouseout",function(ad){z(ad,false)}).each(function(aj){var am=aj.values.map(function(ap){return +ap.value});var ao=H(am);var ai=R(am,ao,1);var ae=ai&&ai.map(function(ap){return am[ap]});var af=ai?O.range(0,ai[0]).concat(O.range(ai[1]+1,am.length)):O.range(am.length);var ad=O.select(this).selectAll(".center").data(ae?[ae]:[]);ad.enter().append("svg:line").classed("center",true).style({opacity:0,stroke:T,"stroke-width":y,"stroke-dasharray":"3,3"}).attr("x1",aa/2).attr("x2",aa/2).attr("y1",function(ap){return ac(ap[1])}).attr("y2",function(ap){return ac(ap[1])}).transition().duration(B).style("opacity",1).attr("y1",function(ap){return ac(ap[0])});var al=O.select(this).selectAll(".box").data([ao]);al.enter().append("svg:rect").classed("box",true).attr("x",ab).attr("y",function(ap){return ac(ap[2])}).attr("width",aa-2*ab).attr("height",function(ap){return ac(ap[0])-ac(ap[2])}).style({opacity:0,fill:C(aj.key),stroke:T,"stroke-width":y}).transition().duration(B).style("opacity",1);var an=O.select(this).selectAll(".median").data([ao[1]]);an.enter().append("svg:line").classed("median",true).style({opacity:0,stroke:T,"stroke-width":y}).attr("x1",ab).attr("x2",aa-ab).attr("y1",ac(ao[2])).attr("y2",ac(ao[2])).transition().duration(B).style("opacity",1).attr("y2",function(ap){return ac(ap)}).attr("y1",function(ap){return ac(ap)});var ag=O.select(this).selectAll(".whisker").data(ae||[]);ag.enter().append("svg:line").classed("whisker",true).style({opacity:0,stroke:T,"stroke-width":y}).attr("x1",aa/2).attr("x2",aa/2).attr("y1",function(ap){return ac(ap)}).attr("y2",function(ap){return ac(ap)}).transition().duration(B).style("opacity",1).attr("x1",ab).attr("x2",aa-ab);var ah=O.select(this).selectAll(".outlier").data(af);ah.enter().append("svg:circle").classed("outlier",true).on("mouseover",function(ap){O.select(this).transition().duration(B/2).style("fill-opacity",0);L(am[ap],true);O.event.stopPropagation()}).on("mouseout",function(ap){O.select(this).transition().duration(B/2).style("fill-opacity",1);L(am[ap],false);O.event.stopPropagation()}).style({fill:C(aj.key),stroke:C(aj.key),opacity:0}).attr("r",J).attr("cx",aa/2).attr("cy",function(ap){return ac(am[ap])}).transition().duration(B).style("opacity",1);var ak=O.select(this).selectAll(".tick").data(ao);ak.enter().append("svg:text").classed("tick",true).style({opacity:0,fill:G,"font-size":x,"font-family":m}).attr("dy",".3em").attr("dx",function(aq,ap){return ap&1?6:-6}).attr("x",function(aq,ap){return ap&1?(aa-ab):ab}).attr("y",function(ap){return ac(ap)}).attr("text-anchor",function(aq,ap){return ap&1?"start":"end"}).transition().duration(B).style("opacity",1).text(function(ap){return E(ap)})})}function v(Z,aa,Y,ac){var ab=aa*P;Z.transition().duration(B).attr("transform",function(ad){return"translate("+Y(ad.key)+",0)"});Z.each(function(aj){var ae=aj.values.map(function(ak){return +ak.value});var ai=H(ae);var ad=R(ae,ai,1);var ag=ad&&ad.map(function(ak){return ae[ak]});var af=ad?O.range(0,ad[0]).concat(O.range(ad[1]+1,ae.length)):O.range(ae.length);O.select(this).select(".center").data(ag?[ag]:[]).transition().duration(B).style({stroke:T,"stroke-width":y}).attr("x1",aa/2).attr("y1",function(ak){return ac(ak[0])}).attr("x2",aa/2).attr("y2",function(ak){return ac(ak[1])});O.select(this).select(".box").data([ai]).transition().duration(B).style({stroke:T,"stroke-width":y,fill:C(aj.key)}).attr("x",ab).attr("y",function(ak){return ac(ak[2])}).attr("width",aa-2*ab).attr("height",function(ak){return ac(ak[0])-ac(ak[2])});O.select(this).selectAll(".median").data([ai[1]]).transition().duration(B).style({stroke:T,"stroke-width":y}).attr("x1",ab).attr("y1",function(ak){return ac(ak)}).attr("x2",aa-ab).attr("y2",function(ak){return ac(ak)});O.select(this).selectAll(".whisker").data(ag||[]).transition().duration(B).style({stroke:T,"stroke-width":y}).attr("x1",ab).attr("y1",function(ak){return ac(ak)}).attr("x2",aa-ab).attr("y2",function(ak){return ac(ak)});var ah=O.select(this).selectAll(".outlier").data(af);ah.exit().transition().duration(B).attr("r",J).style("opacity",0).remove();ah.transition().duration(B).style({fill:C(aj.key),stroke:C(aj.key)}).attr("cx",aa/2).attr("cy",function(ak){return ac(ae[ak])});ah.enter().append("svg:circle").classed("outlier",true).on("mouseover",function(ak){O.select(this).transition().duration(B/2).style("fill-opacity",0);L(ae[ak],true)}).on("mouseout",function(ak){O.select(this).transition().duration(B/2).style("fill-opacity",1);L(ae[ak],false)}).style({fill:C(aj.key),stroke:C(aj.key),opacity:0}).attr("r",J).attr("cx",aa/2).attr("cy",function(ak){return ac(ae[ak])}).transition().duration(B).style("opacity",1);O.select(this).selectAll(".tick").data(ai).transition().duration(B).style({fill:G,"font-size":x,"font-family":m}).attr("dx",function(al,ak){return ak&1?6:-6}).attr("x",function(al,ak){return ak&1?(aa-ab):ab}).attr("y",function(ak){return ac(ak)}).attr("text-anchor",function(al,ak){return ak&1?"start":"end"}).text(function(ak){return E(ak)})})}function H(Y){return[O.quantile(Y,0.25),O.quantile(Y,0.5),O.quantile(Y,0.75)]}function R(ad,af,Z){var Y=af[0],ac=af[2],ae=(ac-Y)*Z,ab=-1,aa=ad.length;while(ad[++ab]<Y-ae){}while(ad[--aa]>ac+ae){}return[ab,aa]}function L(Z,Y){if(Y){q.html("abnormal point value: "+Z).style({textAlign:"center",margin:"auto",color:"#ffffff"});q.style({visibility:"visible"})}else{q.style({visibility:"hidden"})}}function z(ab,Z){if(Z){var Y=ab.values.map(function(ac){return +ac.value});var aa=H(Y);q.html('<div style="font-family:Helvetica;font-size:10px;"><p style="font-style:italic;margin-bottom:5px">name: '+ab.key+'</p><p style="color:#2f7ed8;font-weight:bold;margin:5px">Observations</p>Minimum: '+Y[0]+"<br/>Lower quartile: "+aa[0]+"<br/>Median: "+aa[1]+"<br/>Higher quartile: "+aa[2]+"<br/>Maximum: "+Y[Y.length-1]+"<br/></div>").style({"border-color":C(ab.key),opacity:1,textAlign:"center",margin:"auto"})}else{q.style("opacity",0)}}M.size=function(Y){if(!arguments.length){return[l,n]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in boxplot.size(width, height) should be number and number of svg");return this}else{l=arguments[0];n=arguments[1];return this}}};M.sizeAvail=function(Y){if(!arguments.length){return[t,w]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in boxplot.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{t=arguments[0];w=arguments[1];return this}}};M.tran=function(Y){if(!arguments.length){return[W,V]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in boxplot.tran(tranX, tranY) should be number and number of svg");return this}else{W=arguments[0];V=arguments[1];return this}}};M.fontSize=function(Y){if(!arguments.length){return x}else{if(!isFinite(arguments[0])){console.error("The arguments in boxplot.fontSize(fontSize) should be number of text");return this}else{x=arguments[0];return this}}};M.fontFamily=function(Y){if(!arguments.length){return m}else{if(typeof arguments[0]!=="string"){console.error("The arguments in boxplot.fontFamily(fontFamily) should be string of text");return this}else{x=arguments[0];return this}}};M.fontColor=function(Y){if(!arguments.length){return G}else{if(typeof arguments[0]!=="string"){console.error("The arguments in boxplot.fontColor(fontColor) should be string of text");return this}else{G=arguments[0];return this}}};M.duration=function(Y){if(!arguments.length){return B}else{if(!isFinite(arguments[0])){console.error("The arguments in boxplot.duration(duration) should be number of transition");return this}else{B=Math.round(arguments[0]);return this}}};M.color=function(Y){if(!arguments.length){return C}else{if(typeof arguments[0]!=="function"){console.error("The arguments in boxplot.color(color) should be function of pvisual.color");return this}else{C=arguments[0];return this}}};M.tickFormat=function(Y){if(!arguments.length){return E}else{if(typeof arguments[0]!=="string"){console.error("The arguments in boxplot.tickFormat(format) should be string of d3.format");return this}else{E=O.format(arguments[0]);return this}}};M.legendTran=function(Y){if(!arguments.length){return[F,D]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in boxplot.legendTran(tranX, tranY) should be number and number of svg");return this}else{F=arguments[0];D=arguments[1];return this}}};M.legendSize=function(Y){if(!arguments.length){return r}else{if(!isFinite(arguments[0])){console.error("The arguments in boxplot.legendSize(legendSize) should be number of text");return this}else{r=arguments[0];return this}}};M.legendColor=function(Y){if(!arguments.length){return p}else{if(typeof arguments[0]!=="string"){console.error("The arguments in boxplot.legendColor(legendColor) should be string of text");return this}else{p=arguments[0];return this}}};M.legendColumnNo=function(Y){if(!arguments.length){return s}else{if(!isFinite(arguments[0])){console.error("The arguments in boxplot.legendColumnNo(legendColumnNo) should be number of text");return this}else{s=arguments[0];return this}}};M.legendRowGap=function(Y){if(!arguments.length){return u}else{if(!isFinite(arguments[0])){console.error("The arguments in boxplot.legendRowGap(legendRowGap) should be number of text");return this}else{u=arguments[0];return this}}};M.padding=function(Y){if(!arguments.length){return P}else{if(!isFinite(arguments[0])){console.error("The arguments in boxplot.padding(padding) should be number");return this}else{P=arguments[0];return this}}};M.lineWidth=function(Y){if(!arguments.length){return y}else{if(!isFinite(arguments[0])){console.error("The arguments in boxplot.lineWidth(lineWidth) should be number");return this}else{y=arguments[0];return this}}};M.lineColor=function(Y){if(!arguments.length){return T}else{if(typeof arguments[0]!=="string"){console.error("The arguments in boxplot.lineColor(lineColor) should be string");return this}else{T=arguments[0];return this}}};M.outclicleSize=function(Y){if(!arguments.length){return J}else{if(!isFinite(arguments[0])){console.error("The arguments in boxplot.outclicleSize(outclicleSize) should be number");return this}else{J=arguments[0];return this}}};M.options=function(Y){if(!arguments.length){return{type:M.getType(),width:l,height:n,widthAvail:t,heightAvail:w,tranX:W,tranY:V,format:E,fontSize:x,fontColor:G,fontFamily:m,color:C,duration:B,padding:P,outclicleSize:J,lineWidth:y,lineColor:T,legendColor:p,legendSize:r,legendTranX:F,legendTranY:D,legendColumnNo:s,legendRowGap:u}}else{if(typeof Y!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{l=isFinite(Y.width)?Y.width:l;n=isFinite(Y.height)?Y.height:n;t=isFinite(Y.widthAvail)?Y.widthAvail:t;w=isFinite(Y.heightAvail)?Y.heightAvail:w;W=isFinite(Y.tranX)?Y.tranX:W;V=isFinite(Y.tranY)?Y.tranY:V;Y.format&&M.tickFormat(Y.format);Y.fontFamily&&M.fontFamily(Y.fontFamily);Y.fontColor&&M.fontColor(Y.fontColor);isFinite(Y.fontSize)&&M.fontSize(Y.fontSize);isFinite(Y.duration)&&M.duration(Y.duration);isFinite(Y.padding)&&M.padding(Y.padding);isFinite(Y.outclicleSize)&&M.outclicleSize(Y.outclicleSize);isFinite(Y.lineWidth)&&M.lineWidth(Y.lineWidth);Y.lineColor&&M.lineColor(Y.lineColor);Y.legendColor&&M.legendColor(Y.legendColor);isFinite(Y.legendSize)&&M.legendSize(Y.legendSize);F=isFinite(Y.legendTranX)?Y.legendTranX:F;D=isFinite(Y.legendTranY)?Y.legendTranY:D;isFinite(Y.legendColumnNo)&&M.legendColumnNo(Y.legendColumnNo);isFinite(Y.legendRowGap)&&M.legendRowGap(Y.legendRowGap);return this}}};if(arguments.length===1){M.options(arguments[0])}return M};h.model.chernoff=function(){var z=h.extend();var E=i.d3;var q="切尔诺夫脸谱图";var x=600;var t=600;var w=x;var u=t;var C=0;var A=0;var F;var p=10;var D="Arial";var r;var s;var v;var m=1000;var B=E.format("s");var y=z.color();var l=2;var o=function(G){return"#000"};z.data=function(H){if(arguments.length){if(H.type==="xml"){H=H.root;H=H.map(function(L){var K={};L.row.row.forEach(function(N){var M=h.keys(N)[0];K[M]=N[M]});return K})}else{if(H.type==="xlsx"||H.type==="xls"){var J=[];for(var I=0;I<H.length;I++){var G=h.keys(H[I])[0];J=J.concat(H[I][G])}H=J}}F=H;return this}else{return F}};z.getType=function(){return q};z.render=function(G){s=s||E.select(G).node();if(!s||s.tagName.toLowerCase()!=="div"){console.error("The argument(element) in chernoff.rander(_) should be <div> element")}E.select(s).classed("chart",true);v=v||E.select(s).append("svg").classed("chernoff",true).node();var J=E.chernoff().face(function(K){return K.f}).hair(function(K){return K.h}).mouth(function(K){return K.m}).nosew(function(K){return K.nw}).noseh(function(K){return K.nh}).eyew(function(K){return K.ew}).eyeh(function(K){return K.eh}).brow(function(K){return K.b});r=E.select(s).select(".floatTag").node()?E.select(s).select(".floatTag"):z.floatTag(s);var I=E.select(v).attr({width:x,height:t}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+C+","+A+")");I.call(function(K){K.append("svg:g").classed("dimensions",true)});I=E.select(v).select("g");var H=I.select(".dimensions").selectAll(".dimension").data(F);H.exit().transition().duration(m).style("opacity",0).remove();H.call(J).transition().duration(m).attr("transform",function(L,K){return"translate("+(K%parseInt(w/150)*150)+","+(parseInt(K/(w/150))*150)+")"}).select("text").style("stroke",o).style({"font-family":D,"font-size":p}).text(function(K){return K.name});H.enter().append("svg:g").classed("dimension",true).on("mouseover",function(K){n(K,true)}).on("mouseout",function(K){n(K,false)}).style("stroke",o).style({fill:"none","stroke-width":l,opacity:0}).call(J).call(function(K){K.append("svg:text").style("stroke",o).style({"text-anchor":"middle","font-family":D,"stroke-width":1,"font-size":p}).attr("transform",function(M,L){return"translate(70, 175)"}).text(function(L){return L.name})}).attr("transform",function(L,K){return"translate("+(K%parseInt(w/150)*150)+","+(parseInt(K/(w/150))*150)+")"}).transition().duration(m).style("opacity",1)};function n(H,G){if(G){r.style({opacity:1,textAlign:"center",margin:"auto"}).html('<span style="color:#2f7ed8;font-size:15px;font-weight:bold;margin:5px">name: '+H.name+'</span><hr style="margin:5px"/>face: '+B(H.f)+"<br/>hair: "+B(H.h)+"<br/>nose-w: "+B(H.nw)+"<br/>nose-h: "+B(H.nh)+"<br/>eye-w: "+B(H.ew)+"<br/>eye-h: "+B(H.eh)+"<br/>mouse: "+B(H.m)+"<br/>brow: "+B(H.b))}else{r.style("opacity",0)}}z.size=function(G){if(!arguments.length){return[x,t]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in chernoff.size(width, height) should be number and number of svg");return this}else{x=arguments[0];t=arguments[1];return this}}};z.sizeAvail=function(G){if(!arguments.length){return[w,u]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in chernoff.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{w=arguments[0];u=arguments[1];return this}}};z.tran=function(G){if(!arguments.length){return[C,A]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in chernoff.tran(tranX, tranY) should be number and number of svg");return this}else{C=arguments[0];A=arguments[1];return this}}};z.fontSize=function(G){if(!arguments.length){return p}else{if(!isFinite(arguments[0])){console.error("The arguments in chernoff.fontSize(fontSize) should be number of text");return this}else{p=arguments[0];return this}}};z.fontFamily=function(G){if(!arguments.length){return D}else{if(typeof arguments[0]!=="string"){console.error("The arguments in chernoff.fontFamily(fontFamily) should be string of text");return this}else{p=arguments[0];return this}}};z.duration=function(G){if(!arguments.length){return m}else{if(!isFinite(arguments[0])){console.error("The arguments in chernoff.duration(duration) should be number of transition");return this}else{m=Math.round(arguments[0]);return this}}};z.color=function(G){if(!arguments.length){return y}else{if(typeof arguments[0]!=="function"){console.error("The arguments in chernoff.color(color) should be function of pvisual.color");return this}else{y=arguments[0];return this}}};z.tickFormat=function(G){if(!arguments.length){return B}else{if(typeof arguments[0]!=="string"){console.error("The arguments in chernoff.tickFormat(format) should be string of d3.format");return this}else{B=E.format(arguments[0]);return this}}};z.lineWidth=function(G){if(!arguments.length){return l}else{if(!isFinite(arguments[0])){console.error("The arguments in chernoff.lineWidth(lineWidth) should be number");return this}else{l=arguments[0];return this}}};z.lineColor=function(G){if(!arguments.length){return o}else{if(typeof arguments[0]!=="string"&&typeof arguments[0]!=="function"){console.error("The arguments in chernoff.lineColor(lineColor) should be string or function");return this}else{o=arguments[0];return this}}};z.options=function(G){if(!arguments.length){return{type:z.getType(),width:x,height:t,widthAvail:w,heightAvail:u,tranX:C,tranY:A,format:B,fontSize:p,fontColor:fontColor,fontFamily:D,color:y,duration:m,lineWidth:l,lineColor:o}}else{if(typeof G!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{x=isFinite(G.width)?G.width:x;t=isFinite(G.height)?G.height:t;w=isFinite(G.widthAvail)?G.widthAvail:w;u=isFinite(G.heightAvail)?G.heightAvail:u;C=isFinite(G.tranX)?G.tranX:C;A=isFinite(G.tranY)?G.tranY:A;G.format&&z.tickFormat(G.format);G.fontFamily&&z.fontFamily(G.fontFamily);G.fontColor&&z.fontColor(G.fontColor);isFinite(G.fontSize)&&z.fontSize(G.fontSize);isFinite(G.duration)&&z.duration(G.duration);isFinite(G.lineWidth)&&z.lineWidth(G.lineWidth);G.lineColor&&z.lineColor(G.lineColor);return this}}};if(arguments.length===1){z.options(arguments[0])}return z};h.model.combo=function(){var ab=h.extend();var ai=i.d3;var av="combo";var l=800;var o=1000;var y=l-200;var C=300;var au=50;var aq=10;var ao;var R=8;var m="Arial";var t;var am;var q;var L=500;var T=ai.format("s");var P=ab.color();var an="liner";var ar=0.7;var ah;var aj=0.1;var F;var n=0;var X=0;var D=1;var Z=0;var x="";var I="";var M="";var H=8;var ae="#000000";var u=5;var al=5;var N=-y;var O=8;var K="#929292";var V="rgba(0,0,0,.1)";var ag=2;var B="#000000";var at=0;var U=100;var ad=50;var p=100;var r="#000000";var v=13;var S=10;var Q=0;var w=10;var A=100;ab.data=function(ax){if(arguments.length){if(ax.type==="xml"){ax=ax.root;ax=ax.map(function(aC){var aB={};aC.row.row.forEach(function(aE){var aD=h.keys(aE)[0];aB[aD]=aE[aD]});return aB});ax=XMLdata(ax);var aA={x:ai.set()};ah=ax.map(function(aB){aA[aB.name]=ai.map();return{name:aB.name,_flag:true}});ax.forEach(function(aB){aB.points.forEach(function(aC){aC.y=+aC.y;aA[aB.name].set(aC.x,{x:aC.x,y:aC.y});aA.x.add(aC.x)})});ao=h.keys(aA).filter(function(aB){return aB!=="x"}).map(function(aB){return{name:aB,points:aA[aB].values()}});ah.x=aA.x.values()}else{if(ax.type==="xlsx"||ax.type==="xls"){var az=[];for(var ay=0;ay<ax.length;ay++){var aw=h.keys(ax[ay])[0];az=az.concat(ax[ay][aw])}ax=az;var aA={x:ai.set()};ah=h.keys(ax[0]).filter(function(aB){return aB!=="x"}).map(function(aB){aA[aB]=ai.map();return{name:aB,_flag:true}});ax.forEach(function(aB){ah.forEach(function(aC){aB.x=""+aB.x;aA[aC.name].set(aB.x,{x:aB.x,y:+aB[aC.name]});aA.x.add(aB.x)})});ao=h.keys(aA).filter(function(aB){return aB!=="x"}).map(function(aB){return{name:aB,points:aA[aB].values()}});ah.x=aA.x.values()}else{if(ax.type==="tsv"||ax.type==="csv"){var aA={x:ai.set()};ah=h.keys(ax[0]).filter(function(aB){return aB!=="x"}).map(function(aB){aA[aB]=ai.map();return{name:aB,_flag:true}});ax.forEach(function(aB){ah.forEach(function(aC){aA[aC.name].set(aB.x,{x:aB.x,y:+aB[aC.name]});aA.x.add(aB.x)})});ao=h.keys(aA).filter(function(aB){return aB!=="x"}).map(function(aB){return{name:aB,points:aA[aB].values()}});ah.x=aA.x.values()}else{if(ax.type==="json"){var aA={x:ai.set()};ah=ax.map(function(aB){aA[aB.name]=ai.map();return{name:aB.name,_flag:true}});ax.forEach(function(aB){aB.points.forEach(function(aC){aC.y=+aC.y;aA[aB.name].set(aC.x,{x:aC.x,y:aC.y});aA.x.add(aC.x)})});ao=h.keys(aA).filter(function(aB){return aB!=="x"}).map(function(aB){return{name:aB,points:aA[aB].values()}});ah.x=aA.x.values()}}}}return this}else{return ao}};ab.getType=function(){return av};ab.render=function(aJ){am=am||ai.select(aJ).node();if(!am||am.tagName.toLowerCase()!=="div"){console.error("The argument(element) in multiline.rander(_) should be <div> element")}ai.select(am).classed("chart",true);q=q||ai.select(am).append("svg").classed("combo",true).node();var aw=ab.clone(ao).filter(function(aN){var aM=true;ah.forEach(function(aO){if(aO.name===aN.name){aM=aO._flag}});return aM});var az;var ax;var aG;var aE;var ay;var aF;var aA;az=ai.scale.ordinal().domain(ah.x,function(aM){return""+aM}).rangeRoundBands([0,y],aj);ay=ai.svg.axis().scale(az).orient("bottom").tickSize(al);aG=ai.scale.linear().domain([ad||(ad===0?0:ai.min(aw,function(aM){return ai.min(aM.points,function(aN){return aN.y})})),p||ai.max(aw,function(aM){return ai.max(aM.points,function(aN){return aN.y})})]).range([C,0]);aE=ai.scale.linear().domain([at||(at===0?0:ai.min(aw,function(aM){return ai.min(aM.points,function(aN){return aN.y})})),U||ai.max(aw,function(aM){return ai.max(aM.points,function(aN){return aN.y})})]).range([C,0]);ax=ai.scale.ordinal();ax.domain(ah.filter(function(aM){return aM._flag}).map(function(aM){return aM.name})).rangeRoundBands([0,az.rangeBand()]);aF=ai.svg.axis().scale(aG).orient("left").ticks(u).tickSize(N).tickFormat(T);aA=ai.svg.axis().scale(aE).orient("right").ticks(u).tickSize(N).tickFormat(T);var aL=ai.svg.line().interpolate(an).tension(ar).x(function(aM){return az(aM.x)}).y(function(aM){return aE(aM.y)});t=ai.select(am).select(".floatTag").node()?ai.select(am).select(".floatTag"):ab.floatTag(am);var aD=ai.select(q).attr({width:l,height:o}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+au+","+aq+")");aD.call(function(aM){aM.append("svg:g").classed("x-axis axis",true);aM.append("svg:g").classed("y-axis y-axis-bar axis",true);aM.append("svg:g").classed("y-axis y-axis-line axis",true);aM.append("svg:g").classed("bars",true);aM.append("svg:g").classed("lines",true);aM.append("svg:g").classed("points",true);aM.append("svg:g").classed("pies",true);aM.append("svg:g").classed("legends",true)});aD=ai.select(q).select("g");var aI=aD.selectAll(".bars").selectAll(".bar").data(ah.x);aI.exit().transition().duration(L).style("opacity",0).remove();af(aI,az,ax,aG,aw);ak(aI,az,ax,aG,aw);var aK=aD.selectAll(".lines").selectAll(".line").data(aw);aK.exit().transition().duration(L).style("opacity",0).remove();s(aK,aL,az,aE,aw);Y(aK,aL,az,aE,aw);var aH=aD.selectAll(".points").selectAll(".point").data(aw);aH.exit().transition().duration(L).style("opacity",0).remove();ac(aH,az,aE,aw);J(aH,az,aE,aw);X=X||ah.x.length>4?y/8:y/ah.x;n=n||X*0.3;var aB=aD.selectAll(".pies").selectAll(".pie").data(ah.x);aB.exit().transition().duration(L).style("opacity",0).remove();z(aB,aw);W(aB,aw);G(aD,ay,aF,aA);var aC=aD.select(".legends").attr("transform","translate("+S+","+Q+")").selectAll(".legend").data(ah);aC.exit().transition().duration(L).style("opacity",0).remove();aa(aC);ap(aC)};function Y(ax,aw,ay,aA,az){ax.enter().append("svg:path").classed("line",true).attr("transform","translate("+ay.rangeBand()/2+","+o+")").attr("d",function(aB){return aw(aB.points)}).style({fill:"none",width:2}).style("stroke",function(aB){return P(aB.name)}).transition().duration(L).attr("transform","translate("+ay.rangeBand()/2+",0)")}function s(ax,aw,ay,aA,az){ax.transition().duration(L).attr("transform","translate("+ay.rangeBand()/2+",0)").attr("d",function(aB){return aw(aB.points)}).style("stroke",function(aB){return P(aB.name)})}function ak(aw,ay,ax,aA,az){aw.enter().append("svg:g").classed("bar",true).attr("transform",function(aB){return"translate("+ay(aB)+",0)"}).each(function(aC,aB){ai.select(this).selectAll("rect").data(function(){return az.map(function(aD){return{name:aD.name,y:aD.points[aB].y}})}).enter().append("svg:rect").on("mouseover",function(aD){E(aD,true)}).on("mouseout",function(aD){E(aD,false)}).attr("height",function(aD){return C-1-aA(aD.y)}).attr("x",function(aD){return ax(aD.name)}).attr({y:aA(0),zIndex:2,width:ax.rangeBand()}).attr("y",function(aD){return aA(aD.y)}).style("fill",function(aD){return P(aD.name)}).style("opacity",0).transition().duration(L).style("opacity",D)})}function af(aw,ay,ax,aA,az){aw.attr("transform",function(aB){return"translate("+ay(aB)+",0)"}).each(function(aD,aC){var aB=ai.select(this).selectAll("rect").data(function(){return az.map(function(aE){return{name:aE.name,y:aE.points[aC].y}})});aB.exit().transition().duration(L).style("opacity",0).remove();aB.transition().duration(L).attr("width",ax.rangeBand()).style("fill",function(aE){return P(aE.name)}).style("opacity",D).attr("x",function(aE){return ax(aE.name)}).attr("y",function(aE){return aA(aE.y)}).attr("height",function(aE){return C-1-aA(aE.y)});aB.enter().append("svg:rect").on("mouseover",function(aE){E(aE,true)}).on("mouseout",function(aE){E(aE,false)}).attr("x",function(aE){return ax(aE.name)}).attr("y",function(aE){return aA(aE.y)}).attr("width",ax.rangeBand()).style("fill",function(aE){return P(aE.name)}).style("opacity",0).transition().duration(L).attr("height",function(aE){return C-1-aA(aE.y)}).style("opacity",1)})}function J(ay,aw,aA,az){var ax=aw.rangeBand()/2;ay.enter().append("svg:g").classed("point",true).each(function(aC,aB){ai.select(this).selectAll("circle").data(function(){return aC.points}).enter().append("svg:circle").on("mouseover",function(aD){return E({name:aC.name,y:aD.y},true)}).on("mouseout",function(aD){return E({name:aC.name,y:aD.y},false)}).style("stroke",P(aC.name)).attr({r:4,cx:0}).style({fill:"#FFFFFF","stroke-width":2,opacity:0}).transition().ease("bounce").duration(L).attr("cx",function(aD){return aw(aD.x)+ax}).attr("cy",function(aD){return aA(aD.y)}).style("opacity",1)})}function ac(ay,aw,aA,az){var ax=aw.rangeBand()/2;ay.each(function(aD,aB){var aC=ai.select(this).selectAll("circle").data(function(){return aD.points});aC.transition().ease("bounce").duration(L).attr("cx",function(aE){return aw(aE.x)+ax}).attr("cy",function(aE){return aA(aE.y)}).style("stroke",P(aD.name))})}function z(aw,az){var aA=ai.format(".2%");var ay=ai.layout.pie().value(function(aB){return aB.y});var ax=ai.svg.arc().innerRadius(n).outerRadius(function(aB){return(aB.value-aB.extent[0])/(aB.extent[1]-aB.extent[0])*(X-n)*0.4+(X-n)*0.6+n});aw.each(function(aD,aB){var aC=ai.select(this).datum(function(){var aE=ai.extent(az.map(function(aF){return aF.points[aB].y}));return az.map(function(aF){return{name:aF.name,y:aF.points[aB].y,extent:aE}})}).selectAll("path").data(ay);aC.exit().attr("opacity",1).transition().duration(L).attr("opacity",0).remove();aC.transition().duration(L).attr("fill",function(aE){return P(aE.data.name)}).attrTween("d",function(aE){var aF=ai.interpolate(+ai.select(this).attr("data-startAngle"),aE.startAngle);var aG=ai.interpolate(+ai.select(this).attr("data-endAngle"),aE.endAngle);return function(aH){return ax({startAngle:aG(aH),endAngle:aF(aH),extent:aE.data.extent,value:aE.value})}}).attr("data-startAngle",function(aE){return aE.startAngle}).attr("data-endAngle",function(aE){return aE.endAngle});aC.enter().append("svg:path").attr("data-startAngle",function(aE){return aE.startAngle}).attr("data-endAngle",function(aE){return aE.endAngle}).attr("fill",function(aE){return P(aE.data.name)}).attr("opacity",0).on("mouseover",function(aE){E({name:aE.data.name,y:aA(Math.abs(aE.endAngle-aE.startAngle)/(2*Math.PI))},true)}).on("mouseout",function(aE){E({name:aE.data.name,y:aA(Math.abs(aE.endAngle-aE.startAngle)/(2*Math.PI))},false)}).transition().duration(L).attrTween("d",function(aF){var aE=ai.interpolate(aF.startAngle,aF.endAngle);return function(aG){return ax({startAngle:aF.startAngle,endAngle:aE(aG),extent:aF.data.extent,value:aF.value})}}).attr("opacity",1);ai.select(this).select("text tspan").transition().duration(L).style({"text-anchor":"end","font-family":m,"font-size":R}).text(aD);ai.select(this).transition().duration(L).attr("transform","translate("+((aB%4+0.5)*(X*2+20)-30)+","+((Math.round(aB/4-0.5)+0.5)*(X*2+20)+C+20)+")")})}function W(aw,az){var aA=ai.format(".2%");var ay=ai.layout.pie().value(function(aB){return aB.y});var ax=ai.svg.arc().innerRadius(n).outerRadius(function(aB){return(aB.value-aB.extent[0])/(aB.extent[1]-aB.extent[0])*(X-n)*0.4+(X-n)*0.6+n});aw.enter().append("svg:g").classed("pie",true).each(function(aD,aB){var aC=ai.select(this).datum(function(){var aE=ai.extent(az.map(function(aF){return aF.points[aB].y}));return az.map(function(aF){return{name:aF.name,y:aF.points[aB].y,extent:aE}})}).selectAll("path").data(ay);aC.exit().attr("opacity",1).transition().duration(L).attr("opacity",0).remove();aC.enter().append("svg:path").attr("fill",function(aE){return P(aE.data.name)}).attr("opacity",0).on("mouseover",function(aE){E({name:aE.data.name,y:aA(Math.abs(aE.endAngle-aE.startAngle)/(2*Math.PI))},true)}).on("mouseout",function(aE){E({name:aE.data.name,y:aA(Math.abs(aE.endAngle-aE.startAngle)/(2*Math.PI))},false)}).transition().duration(L).attrTween("d",function(aF){var aE=ai.interpolate(aF.startAngle,aF.endAngle);return function(aG){return ax({startAngle:aF.startAngle,endAngle:aE(aG),extent:aF.data.extent,value:aF.value})}}).attr("opacity",1).attr("data-startAngle",function(aE){return aE.startAngle}).attr("data-endAngle",function(aE){return aE.endAngle});ai.select(this).append("svg:text").append("svg:tspan").transition().duration(L).attr({x:10,y:5}).style({"text-anchor":"end","font-family":m,"font-size":R,}).text(aD);ai.select(this).transition().duration(L).attr("transform","translate("+((aB%4+0.5)*(X*2+20)-30)+","+((Math.round(aB/4-0.5)+0.5)*(X*2+20)+C+20)+")")})}function ap(aw){aw.enter().append("svg:g").classed("legend",true).style("cursor","pointer").on("click",function(ax){if(!ai.select(this).classed("none")){if(ah.length>1){ai.select(this).classed("none",true);ax._flag=false;F=ao.map(function(az){var ay=ah.filter(function(aA){return aA._flag}).map(function(aA){return{name:aA.name,y:+az[aA.name]}});return{x:az.x,value:ay}});ab.render()}}else{ai.select(this).classed("none",false);ax._flag=true;F=ao.map(function(az){var ay=ah.filter(function(aA){return aA._flag}).map(function(aA){return{name:aA.name,y:+az[aA.name]}});return{x:az.x,value:ay}});ab.render()}}).each(function(ay,ax){ai.select(this).append("svg:rect").attr({x:(ax-ax%w)/w*A+y+20,y:ax%w*20}).attr({width:10,height:10}).style({fill:P(ax),stroke:P(ax)}).style("fill-opacity",ay._flag?1:0).style("opacity",0).transition().duration(L/2).style("opacity",1);ai.select(this).append("svg:text").attr({x:(ax-ax%w)/w*A+y+40,y:ax%w*20+9}).style({opacity:0,fill:r,"font-size":v,"font-family":m}).transition().duration(L/2).style("opacity",1).text(ay.name)})}function aa(aw){aw.each(function(ay,ax){ai.select(this).selectAll("rect").transition().duration(L/2).style({fill:P(ax),stroke:P(ax)}).style("fill-opacity",ay._flag?1:0).attr({x:(ax-ax%w)/w*A+y+20,y:ax%w*20});ai.select(this).selectAll("text").transition().duration(L/2).attr({x:(ax-ax%w)/w*A+y+40,y:ax%w*20+9}).style({"font-size":v,fill:r,"font-family":m}).text(ay.name)})}function G(ay,az,ax,aw){ay.select(".x-axis").each(function(){ai.select(this).select(".label").transition().duration(L).attr({x:y,y:-6}).style({"text-anchor":"end","font-family":m,"font-size":H,fill:ae}).text(M);ai.select(this).selectAll(".label").data([1]).enter().append("svg:text").classed("label",true).style({"text-anchor":"end","font-family":m,"font-size":H,fill:ae}).attr({x:y,y:-6}).text(M);ai.select(this).transition().duration(L).attr("transform","translate(0,"+C+")").call(az)});ay.select(".y-axis-bar").each(function(){ai.select(this).select(".label").style({"text-anchor":"end","font-family":m,"font-size":H,fill:ae}).text(x);ai.select(this).selectAll(".label").data([1]).enter().append("svg:text").classed("label",true).style({"text-anchor":"end","font-family":m,"font-size":H,fill:ae}).attr({transform:"rotate(-90)",y:8,dy:".71em"}).text(x);ai.select(this).transition().duration(L).call(ax).selectAll(".tick text").style({"text-anchor":"end","font-family":m,"font-size":O,fill:K})});ay.select(".y-axis-line").attr({transform:"translate("+y+",0)"}).each(function(){ai.select(this).select(".label").style({"text-anchor":"end","font-family":m,"font-size":H,fill:ae}).text(I);ai.select(this).selectAll(".label").data([1]).enter().append("svg:text").classed("label",true).style({"text-anchor":"end","font-family":m,"font-size":H,fill:ae}).attr({transform:"rotate(-90)",y:8,dy:".71em"}).text(I);ai.select(this).transition().duration(L).call(aw).selectAll(".tick text").style({"text-anchor":"start","font-family":m,"font-size":O,fill:K})});ay.select(".x-axis").selectAll(".tick").select("text").style({"text-anchor":"middle","font-family":m,"font-size":O,fill:K}).attr("transform",function(){return"translate("+this.getComputedTextLength()*Math.abs(Math.sin(Z)*0.5)+","+(this.getComputedTextLength()*(0.3*Math.abs(Math.sin(Z))))+")rotate("+Z+")"});ay.selectAll(".axis").call(function(aA){aA.selectAll("path").style({fill:"none",stroke:B,"stroke-width":ag,"shape-rendering":"crispEdges"});aA.selectAll("line").style({fill:"none","stroke-dasharray":"3,1",stroke:V,"shape-rendering":"crispEdges"})})}function E(ax,aw){if(aw){t.style({"border-color":P(ax.name),opacity:1,textAlign:"center",margin:"auto"}).html("name: <b>"+ax.name+"</b><br/>value: <b>"+ax.y+"</b>")}else{t.style("opacity",0)}}ab.size=function(aw){if(!arguments.length){return[l,o]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in pie.size(width, height) should be number and number of svg");return this}else{l=arguments[0];o=arguments[1];return this}}};ab.sizeAvail=function(aw){if(!arguments.length){return[y,C]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in pie.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{y=arguments[0];C=arguments[1];return this}}};ab.tran=function(aw){if(!arguments.length){return[au,aq]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in pie.tran(tranX, tranY) should be number and number of svg");return this}else{au=arguments[0];aq=arguments[1];return this}}};ab.fontFamily=function(aw){if(!arguments.length){return m}else{if(typeof arguments[0]!=="string"){console.error("The arguments in pie.fontFamily(fontFamily) should be string of text");return this}else{m=arguments[0];return this}}};ab.duration=function(aw){if(!arguments.length){return L}else{if(!isFinite(arguments[0])){console.error("The arguments in pie.duration(duration) should be number of transition");return this}else{L=Math.round(arguments[0]);return this}}};ab.color=function(aw){if(!arguments.length){return P}else{if(typeof arguments[0]!=="function"){console.error("The arguments in pie.color(color) should be function of pvisual.color");return this}else{P=arguments[0];return this}}};ab.tickFormat=function(aw){if(!arguments.length){return T}else{if(typeof arguments[0]!=="string"){console.error("The arguments in pie.tickFormat(format) should be string of d3.format");return this}else{T=ai.format(arguments[0]);return this}}};ab.legendTran=function(aw){if(!arguments.length){return[S,Q]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in pie.legendTran(tranX, tranY) should be number and number of svg");return this}else{S=arguments[0];Q=arguments[1];return this}}};ab.legendSize=function(aw){if(!arguments.length){return v}else{if(!isFinite(arguments[0])){console.error("The arguments in pie.legendSize(legendSize) should be number of text");return this}else{v=arguments[0];return this}}};ab.legendColor=function(aw){if(!arguments.length){return r}else{if(typeof arguments[0]!=="string"){console.error("The arguments in pie.legendColor(legendColor) should be string of text");return this}else{r=arguments[0];return this}}};ab.legendColumnNo=function(aw){if(!arguments.length){return w}else{if(!isFinite(arguments[0])){console.error("The arguments in pie.legendColumnNo(legendColumnNo) should be number of text");return this}else{w=arguments[0];return this}}};ab.outerRadius=function(aw){if(!arguments.length){return X}else{if(!isFinite(arguments[0])){console.error("The arguments in pie.outerRadius(outerRadius) should be number of");return this}else{X=Math.round(arguments[0]);return this}}};ab.innerRadius=function(aw){if(!arguments.length){return n}else{if(!isFinite(arguments[0])){console.error("The arguments in pie.innerRadius(innerRadius) should be number");return this}else{n=Math.round(arguments[0]);return this}}};ab.xLegend=function(aw){if(!arguments.length){return M}else{if(typeof arguments[0]!=="string"){console.error("The arguments in combo.xLegend(xLegend) should be string");return this}else{M=arguments[0];return this}}};ab.yLegendBar=function(aw){if(!arguments.length){return x}else{if(typeof arguments[0]!=="string"){console.error("The arguments in combo.yLegend(yLegend) should be string");return this}else{x=arguments[0];return this}}};ab.yLegendLine=function(aw){if(!arguments.length){return I}else{if(typeof arguments[0]!=="string"){console.error("The arguments in combo.yLegend(yLegend) should be string");return this}else{I=arguments[0];return this}}};ab.xtickRotate=function(aw){if(!arguments.length){return Z}else{if(!isFinite(arguments[0])){console.error("The arguments in combo.xtickRotate(xtickRotate) should be number of tick");return this}else{Z=Math.round(arguments[0]);return this}}};ab.labelSize=function(aw){if(!arguments.length){return H}else{if(!isFinite(arguments[0])){console.error("The arguments in combo.labelSize(labelSize) should be string");return this}else{H=arguments[0];return this}}};ab.labelColor=function(aw){if(!arguments.length){return ae}else{if(typeof arguments[0]!=="string"){console.error("The arguments in combo.labelColor(labelColor) should be string");return this}else{ae=arguments[0];return this}}};ab.ytickNumber=function(aw){if(!arguments.length){return u}else{if(!isFinite(arguments[0])){console.error("The arguments in combo.ytickNumber(ytickNumber) should be number of tick");return this}else{u=Math.round(arguments[0]);return this}}};ab.tickLineColor=function(aw){if(!arguments.length){return V}else{if(typeof arguments[0]!=="string"){console.error("The arguments in combo.tickLineColor(tickLineColor) should be string");return this}else{V=arguments[0];return this}}};ab.tickTextSize=function(aw){if(!arguments.length){return O}else{if(!isFinite(arguments[0])){console.error("The arguments in combo.tickTextSize(tickTextSize) should be number");return this}else{O=arguments[0];return this}}};ab.tickTextColor=function(aw){if(!arguments.length){return K}else{if(typeof arguments[0]!=="string"){console.error("The arguments in combo.tickTextColor(tickTextColor) should be string");return this}else{K=arguments[0];return this}}};ab.axisPathWidth=function(aw){if(!arguments.length){return ag}else{if(!isFinite(arguments[0])){console.error("The arguments in combo.axisPathWidth(axisPathWidth) should be string");return this}else{ag=arguments[0];return this}}};ab.axisPathColor=function(aw){if(!arguments.length){return B}else{if(typeof arguments[0]!=="string"){console.error("The arguments in combo.axisPathColor(axisPathColor) should be string");return this}else{B=arguments[0];return this}}};ab.legendTran=function(aw){if(!arguments.length){return[S,Q]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in combo.legendTran(tranX, tranY) should be number and number of svg");return this}else{S=arguments[0];Q=arguments[1];return this}}};ab.legendSize=function(aw){if(!arguments.length){return v}else{if(!isFinite(arguments[0])){console.error("The arguments in combo.legendSize(legendSize) should be number of text");return this}else{v=arguments[0];return this}}};ab.legendColor=function(aw){if(!arguments.length){return r}else{if(typeof arguments[0]!=="string"){console.error("The arguments in combo.legendColor(legendColor) should be string of text");return this}else{r=arguments[0];return this}}};ab.legendColumnNo=function(aw){if(!arguments.length){return w}else{if(!isFinite(arguments[0])){console.error("The arguments in combo.legendColumnNo(legendColumnNo) should be number of text");return this}else{w=arguments[0];return this}}};ab.legendRowGap=function(aw){if(!arguments.length){return A}else{if(!isFinite(arguments[0])){console.error("The arguments in combo.legendRowGap(legendRowGap) should be number of text");return this}else{A=arguments[0];return this}}return ab};ab.minTickLine=function(aw){if(!arguments.length){return at}else{if(!isFinite(arguments[0])){console.error("The arguments in combo.minTickLine(minTickLine) should be number of text");return this}else{at=arguments[0];return this}}return ab};ab.maxTickLine=function(aw){if(!arguments.length){return U}else{if(!isFinite(arguments[0])){console.error("The arguments in combo.maxTickLine(maxTickLine) should be number of text");return this}else{U=arguments[0];return this}}return ab};ab.minTickBar=function(aw){if(!arguments.length){return ad}else{if(!isFinite(arguments[0])){console.error("The arguments in combo.minTickBar(minTickBar) should be number of text");return this}else{ad=arguments[0];return this}}return ab};ab.maxTickBar=function(aw){if(!arguments.length){return p}else{if(!isFinite(arguments[0])){console.error("The arguments in combo.maxTickBar(maxTickBar) should be number of text");return this}else{p=arguments[0];return this}}return ab};ab.pieFontSize=function(aw){if(!arguments.length){return R}else{if(!isFinite(arguments[0])){console.error("The arguments in combo.pieFontSize(pieFontSize) should be number of text");return this}else{R=arguments[0];return this}}};ab.interpolate=function(aw){if(!arguments.length){return an}else{if(!isFinite(arguments[0])){console.error("The arguments in combo.interpolate(interpolate) should be text");return this}else{an=arguments[0];return this}}};ab.tension=function(aw){if(!arguments.length){return ar}else{if(!isFinite(arguments[0])){console.error("The arguments in combo.tension(tension) should be number of 0 ~ `");return this}else{ar=arguments[0];return this}}};ab.padding=function(aw){if(!arguments.length){return aj}else{if(!isFinite(arguments[0])){console.error("The arguments in combo.padding(padding) should be number of 0 ~ `");return this}else{aj=arguments[0];return this}}};ab.barOpacity=function(aw){if(!arguments.length){return D}else{if(!isFinite(arguments[0])){console.error("The arguments in combo.barOpacity(barOpacity) should be number of 0 ~ `");return this}else{D=arguments[0];return this}}};ab.options=function(aw){if(!arguments.length){return{type:ab.getType(),width:l,height:o,widthAvail:y,heightAvail:C,tranX:au,tranY:aq,maxTickBar:p,minTickBar:ad,maxTickLine:U,minTickLine:at,format:T,pieFontSize:R,ytickNumber:u,fontFamily:m,barOpacity:D,xtickRotate:Z,yLegendBar:x,yLegendLine:I,color:P,interpolate:an,tension:ar,duration:L,legendColor:r,legendSize:v,legendTranX:S,legendTranY:Q,legendColumnNo:w,legendRowGap:A}}else{if(typeof aw!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{l=isFinite(aw.width)?aw.width:l;o=isFinite(aw.height)?aw.height:o;y=isFinite(aw.widthAvail)?aw.widthAvail:y;C=isFinite(aw.heightAvail)?aw.heightAvail:C;au=isFinite(aw.tranX)?aw.tranX:au;aq=isFinite(aw.tranY)?aw.tranY:aq;aw.format&&ab.tickFormat(aw.format);aw.fontFamily&&ab.fontFamily(aw.fontFamily);isFinite(aw.pieFontSize)&&ab.pieFontSize(aw.pieFontSize);isFinite(aw.ytickNumber)&&ab.ytickNumber(aw.ytickNumber);isFinite(aw.barOpacity)&&ab.barOpacity(aw.barOpacity);isFinite(aw.xtickRotate)&&ab.xtickRotate(aw.xtickRotate);aw.yLegendBar&&ab.yLegendBar(aw.yLegendBar);aw.yLegendLine&&ab.yLegendLine(aw.yLegendLine);aw.xLegend&&ab.xLegend(aw.xLegend);isFinite(aw.tension)&&ab.tension(aw.tension);aw.interpolate&&ab.interpolate(aw.interpolate);isFinite(aw.fontSize)&&ab.fontSize(aw.fontSize);isFinite(aw.duration)&&ab.duration(aw.duration);aw.legendColor&&ab.legendColor(aw.legendColor);isFinite(aw.legendSize)&&ab.legendSize(aw.legendSize);S=isFinite(aw.legendTranX)?aw.legendTranX:S;Q=isFinite(aw.legendTranY)?aw.legendTranY:Q;isFinite(aw.legendColumnNo)&&ab.legendColumnNo(aw.legendColumnNo);isFinite(aw.legendRowGap)&&ab.legendRowGap(aw.legendRowGap);return this}}};if(arguments.length===1){ab.options(arguments[0])}return ab};h.model.chord=function(){var G=h.extend();var U=i.d3;var af="弦图";var l=900;var o=900;var v=l;var y=o;var ae=0;var ad=0;var ab;var z=8;var m="Arial";var P="#000000";var r;var X;var p;var H=500;var L=U.format("s");var J=G.color();var E;var r;var X;var p;var W=0.01;var w=true;var S;var A;var n;var Q;var q="#000000";var s=13;var M=0;var K=0;var u=10;var x=100;G.data=function(an){if(arguments.length){if(an.type==="xml"){an=an.map(function(aq){var ap={};aq.row.forEach(function(at){var ar=h.keys(at)[0];ap[ar]=at[ar]});return ap})}else{if(an.type==="xlsx"||an.type==="xls"){var ao=[];for(var ai=0;ai<an.length;ai++){var ag=h.keys(an[ai])[0];ao=ao.concat(an[ai][ag])}an=ao}}var ak=0;var aj={};var al;var am;A=0;ab=[];E=an;E.forEach(function(ap){al=ap.from;am=ap.to;if(typeof aj[al]==="undefined"){aj[ak]=al;aj[al]=ak++}if(typeof aj[am]==="undefined"){aj[ak]=am;aj[am]=ak++}A+=+ap.value});for(var ai=0;ai<ak;ai++){ab[ai]=[];ab[ai]._index=ai;for(var ah=0;ah<ak;ah++){ab[ai][ah]=0}}if(!w){E.forEach(function(ap){ab[aj[ap.from]][aj[ap.to]]+=+ap.value})}else{E.forEach(function(ap){ab[aj[ap.from]][aj[ap.to]]+=+ap.value;ab[aj[ap.to]][aj[ap.from]]+=+ap.value})}S=aj;return this}else{return ab}};G.getType=function(){return af};G.render=function(ah){X=X||U.select(ah).node();if(!X||X.tagName.toLowerCase()!=="div"){console.error("The argument(element) in chord.rander(_) should be <div> element")}U.select(X).classed("chart",true);p=p||U.select(X).append("svg").classed("chord",true).node();r=U.select(X).select(".floatTag").node()?U.select(X).select(".floatTag"):G.floatTag(X);if(!n){n=Math.min(v,y)*0.38}if(!Q){Q=n*1.1}var al=U.layout.chord().padding(W).sortSubgroups(U.descending).matrix(ab);var ak=U.select(p).attr({width:l,height:o}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+(ae+Math.min(v,y)/2)+","+(ad+Math.min(v,y)/2)+")");ak.call(function(ao){ao.append("svg:g").classed("arcs",true);ao.append("svg:g").classed("labels",true);ao.append("svg:g").classed("ticks",true);ao.append("svg:g").classed("chords",true);ao.append("svg:g").classed("legends",true)});ak=U.select(p).select("g");var am=ak.select(".chords").selectAll("path").data(al.chords);am.exit().transition().duration(H).style("opacity",0).remove();C(am);V(am);var aj=ak.select(".arcs").selectAll("path").data(al.groups);aj.exit().transition().duration(H).style("opacity",0).remove();O(aj,am);T(aj,am);var an=ak.select(".labels").selectAll(".label").data(al.groups);an.exit().transition().duration(H).style("opacity",0).remove();B(an);t(an);var ai=ak.select(".ticks").selectAll(".tick").data(al.groups);ai.exit().transition().duration(H).style("opacity",0).remove();aa(ai);Z(ai);var ag=ak.select(".legends").attr("transform","translate("+M+","+K+")").selectAll(".legend").data(function(){var ao=U.set([]);E.forEach(function(ap){ao.add(ap.from);ao.add(ap.to)});return ao.values()}());ag.exit().transition().duration(H).style("opacity",0).remove();R(ag);ac(ag)};function C(ag){ag.transition().duration(H).style("fill",function(ah){return J(ab[ah.target.index]._index)}).attr("d",U.svg.chord().radius(n))}function V(ag){ag.enter().append("svg:path").style("fill",function(ah){return J(ab[ah.target.index]._index)}).attr("d",U.svg.chord().radius(n)).style({opacity:0,"fill-opacity":0.67,stroke:"none","stroke-width":".5px"}).on("mouseover",N(0.03,true,ag)).on("mouseout",N(1,false,ag)).transition().duration(H).style("opacity",1)}function O(ag){ag.transition().duration(H).style("fill",function(ah){return J(ab[ah.index]._index)}).attr("d",U.svg.arc().innerRadius(n).outerRadius(Q))}function T(ag,ah){ag.enter().append("svg:path").style("fill",function(ai){return J(S[ab[ai.index]._index])}).on("mouseover",Y(0.03,true,ah)).on("mouseout",Y(1,false,ah)).transition().duration(H).attr("d",U.svg.arc().innerRadius(n).outerRadius(Q))}function B(ag){ag.transition().duration(H).attr("transform",function(ah){return"rotate("+((ah.endAngle+ah.startAngle)*90/Math.PI-87)+")translate("+Q+",0)"}).select("text").style("text-anchor",function(ah){return(ah.endAngle+ah.startAngle)/2>Math.PI?"end":null}).attr("transform",function(ah){return(ah.endAngle+ah.startAngle)/2>Math.PI?"rotate(180)translate(-16)":null}).style({"font-family":m,"font-weight":"normal","font-size":z}).text(function(ah){return ah.endAngle-ah.startAngle>0.03?S[ab[ah.index]._index]:"..."})}function t(ag){ag.enter().append("svg:g").classed("label",true).attr("transform",function(ah){return"rotate("+((ah.endAngle+ah.startAngle)*90/Math.PI-87)+")translate("+Q+",0)"}).append("svg:text").attr({x:8,dy:20}).style("opacity",0).style("text-anchor",function(ah){return(ah.endAngle+ah.startAngle)/2>Math.PI?"end":null}).attr("transform",function(ah){return(ah.endAngle+ah.startAngle)/2>Math.PI?"rotate(180)translate(-16)":null}).transition().duration(H).style({"font-family":m,"font-size":z,"font-weight":"normal",opacity:1}).text(function(ah){return ah.endAngle-ah.startAngle>0.03?S[ab[ah.index]._index]:"..."})}function aa(ag){ag.transition().duration(H).attr("transform",function(ah){return"rotate("+((ah.endAngle+ah.startAngle)*90/Math.PI-89)+")translate("+(Q-50)+",0)"}).select("text").attr("transform",function(ah){if((ah.endAngle+ah.startAngle)<Math.PI){return"rotate(90)translate(-9)"}else{if(Math.PI<(ah.endAngle+ah.startAngle)&&(ah.endAngle+ah.startAngle)<Math.PI*3){return"rotate(-90)translate(-9)"}else{return"rotate(90)translate(-9)"}}}).style({"font-family":m,"font-weight":"normal","font-size":z}).text(function(ah){return L(Math.round(ah.value))})}function Z(ag){ag.enter().append("svg:g").classed("tick",true).attr("transform",function(ah){return"rotate("+((ah.endAngle+ah.startAngle)*90/Math.PI-89)+")translate("+(Q-50)+",0)"}).append("svg:text").attr("transform",function(ah){if((ah.endAngle+ah.startAngle)<Math.PI){return"rotate(90)translate(-9)"}else{if(Math.PI<(ah.endAngle+ah.startAngle)&&(ah.endAngle+ah.startAngle)<Math.PI*3){return"rotate(-90)translate(-9)"}else{return"rotate(90)translate(-9)"}}}).transition().duration(H).style({"font-family":m,"font-weight":"normal","font-size":z}).text(function(ah){return L(Math.round(ah.value))})}function R(ag){ag.each(function(ai){var ah=S[ai];U.select(this).select("rect").transition().duration(H).style("fill-opacity",function(){var aj=1;for(var al=0,ak;al<E.length;al++){ak=E[al];if(ak.from===ai||ak.to===ai){aj=ak._flag===false?0:1}}return aj}).attr({x:(ah-ah%u)/u*x+Q,y:ah%u*20-Q*1.15}).style({fill:J(ah),stroke:J(ah)});U.select(this).select("text").transition().duration(H).attr({x:(ah-ah%u)/u*x+Q+20,y:ah%u*20+9-Q*1.15}).style({"font-size":s,fill:q,"font-family":m}).text(ai)})}function ac(ag){ag.enter().append("svg:g").classed("legend",true).style("cursor","pointer").on("click",function(aj){if(!U.select(this).classed("none")){U.select(this).classed("none",true);for(var ai=0,ah;ai<E.length;ai++){ah=E[ai];if(aj===ah.from||aj===ah.to){ah._flag=false}else{ah._flag=true}}I();G.render()}else{U.select(this).classed("none",false);for(var ai=0,ah;ai<E.length;ai++){ah=E[ai];if(aj===ah.from||aj===ah.to){ah._flag=true}}I();G.render()}}).each(function(ai){var ah=S[ai];U.select(this).append("svg:rect").attr({x:(ah-ah%u)/u*x+Q,y:ah%u*20-Q*1.15}).attr({width:10,height:10}).style({fill:J(ah),stroke:J(ah)}).style("fill-opacity",1).style("opacity",0).transition().duration(H).style("fill-opacity",function(){for(var ak=0,aj;ak<E.length;ak++){aj=E[ak];if(aj.from===ai||aj.to===ai){return aj.flag===false?0:1}}return 1}).style("opacity",1);U.select(this).append("svg:text").attr({x:(ah-ah%u)/u*x+Q+20,y:ah%u*20+9-Q*1.15}).style({opacity:0,"font-size":s,fill:q,"font-family":m}).transition().duration(H).style("opacity",1).text(ai)})}function I(){var ag=0;var ai={};var al;var ak;A=0;ab=[];E.forEach(function(am){if(am._flag!==false){al=am.from;ak=am.to;if(typeof ai[al]==="undefined"){ai[ag]=S[al];ai[al]=ag++}if(typeof ai[ak]==="undefined"){ai[ag]=S[ak];ai[ak]=ag++}A+=+am.value}});for(var aj=0;aj<ag;aj++){ab[aj]=[];for(var ah=0;ah<ag;ah++){ab[aj][ah]=0}}if(!w){E.forEach(function(am){if(am._flag!==false){ab[ai[am.from]][ai[am.to]]+=+am.value;ab[ai[am.from]]._index=ai[ai[am.from]]}})}else{E.forEach(function(am){if(am._flag!==false){ab[ai[am.from]][ai[am.to]]+=+am.value;ab[ai[am.to]][ai[am.from]]+=+am.value;ab[ai[am.from]]._index=ai[ai[am.from]];ab[ai[am.to]]._index=ai[ai[am.to]]}})}}function Y(ag,ah,ai){return function(ak,aj){F(ah,ak);ai.filter(function(al){return al.source.index!==aj&&al.target.index!==aj}).transition().duration(H/2).style("opacity",ag)}}function N(ag,ah,ai){return function(ak){var aj=this;D(ah,ak);ai.filter(function(){return this!==aj}).transition().duration(H/2).style("opacity",ag)}}function D(ag,ah){if(ag){r.style({"border-color":J(ab[ah.source.index]._index+ab[ah.target.index]._index),opacity:1,textAlign:"center",margin:"auto"}).html(S[ab[ah.source.index]._index]+" to "+S[ab[ah.target.index]._index]+" : "+L(ah.source.value)+"<br>"+S[ab[ah.target.index]._index]+" to "+S[ab[ah.source.index]._index]+" : "+L(ah.target.value))}else{r.style("opacity",0)}}function F(ag,ai){if(ag){var ah=U.sum(ab[ai.index]);r.style({"border-color":J(S[ab[ai.index]._index]),opacity:1,textAlign:"center",margin:"auto"}).html(S[ab[ai.index]._index]+" : "+ah+"<br/>比例: "+L((ah/A*100).toFixed(2))+"%")}else{r.style("opacity",0)}}G.size=function(ag){if(!arguments.length){return[l,o]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in chord.size(width, height) should be number and number of svg");return this}else{l=arguments[0];o=arguments[1];return this}}};G.sizeAvail=function(ag){if(!arguments.length){return[v,y]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in chord.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{v=arguments[0];y=arguments[1];return this}}};G.tran=function(ag){if(!arguments.length){return[ae,ad]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in chord.tran(tranX, tranY) should be number and number of svg");return this}else{ae=arguments[0];ad=arguments[1];return this}}};G.fontSize=function(ag){if(!arguments.length){return z}else{if(!isFinite(arguments[0])){console.error("The arguments in chord.fontSize(fontSize) should be number of text");return this}else{z=arguments[0];return this}}};G.fontFamily=function(ag){if(!arguments.length){return m}else{if(typeof arguments[0]!=="string"){console.error("The arguments in chord.fontFamily(fontFamily) should be string of text");return this}else{z=arguments[0];return this}}};G.duration=function(ag){if(!arguments.length){return H}else{if(!isFinite(arguments[0])){console.error("The arguments in chord.duration(duration) should be number of transition");return this}else{H=Math.round(arguments[0]);return this}}};G.color=function(ag){if(!arguments.length){return J}else{if(typeof arguments[0]!=="function"){console.error("The arguments in chord.color(color) should be function of pvisual.color");return this}else{J=arguments[0];return this}}};G.tickFormat=function(ag){if(!arguments.length){return L}else{if(typeof arguments[0]!=="string"){console.error("The arguments in chord.tickFormat(format) should be string of d3.format");return this}else{L=U.format(arguments[0]);return this}}};G.symmetry=function(ag){if(!arguments.length){return w}else{if(arguments[0]!==true&&arguments[0]!==false){console.error("The arguments in chord.symmetry(symmetry) should be bool");return this}else{w=arguments[0];return this}}};G.padding=function(ag){if(!arguments.length){return W}else{if(!isFinite(arguments[0])){console.error("The arguments in chord.padding(padding) should be number");return this}else{W=arguments[0];return this}}};G.innerRadius=function(ag){if(!arguments.length){return n}else{if(!isFinite(arguments[0])){console.error("The arguments in chord.innerRadius(innerRadius) should be number");return this}else{n=arguments[0];return this}}};G.outerRadius=function(ag){if(!arguments.length){return Q}else{if(!isFinite(arguments[0])){console.error("The arguments in chord.outerRadius(outerRadius) should be number");return this}else{Q=arguments[0];return this}}};G.legendTran=function(ag){if(!arguments.length){return[M,K]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in chord.legendTran(tranX, tranY) should be number and number of svg");return this}else{M=arguments[0];K=arguments[1];return this}}};G.legendSize=function(ag){if(!arguments.length){return s}else{if(!isFinite(arguments[0])){console.error("The arguments in chord.legendSize(legendSize) should be number of text");return this}else{s=arguments[0];return this}}};G.legendColor=function(ag){if(!arguments.length){return q}else{if(typeof arguments[0]!=="string"){console.error("The arguments in chord.legendColor(legendColor) should be string of text");return this}else{q=arguments[0];return this}}};G.legendColumnNo=function(ag){if(!arguments.length){return u}else{if(!isFinite(arguments[0])){console.error("The arguments in chord.legendColumnNo(legendColumnNo) should be number of text");return this}else{u=arguments[0];return this}}};G.legendRowGap=function(ag){if(!arguments.length){return x}else{if(!isFinite(arguments[0])){console.error("The arguments in chord.legendRowGap(legendRowGap) should be number of text");return this}else{x=arguments[0];return this}}};G.options=function(ag){if(!arguments.length){return{type:G.getType(),width:l,height:o,widthAvail:v,heightAvail:y,tranX:ae,tranY:ad,format:L,fontSize:z,fontColor:P,fontFamily:m,color:J,duration:H,padding:W,symmetry:w,innerRadius:n,outerRadius:Q,legendColor:q,legendSize:s,legendTranX:M,legendTranY:K,legendColumnNo:u,legendRowGap:x}}else{if(typeof ag!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{l=isFinite(ag.width)?ag.width:l;o=isFinite(ag.height)?ag.height:o;v=isFinite(ag.widthAvail)?ag.widthAvail:v;y=isFinite(ag.heightAvail)?ag.heightAvail:y;ae=isFinite(ag.tranX)?ag.tranX:ae;ad=isFinite(ag.tranY)?ag.tranY:ad;ag.format&&G.tickFormat(ag.format);ag.fontFamily&&G.fontFamily(ag.fontFamily);ag.fontColor&&G.fontColor(ag.fontColor);isFinite(ag.fontSize)&&G.fontSize(ag.fontSize);isFinite(ag.duration)&&G.duration(ag.duration);isFinite(ag.padding)&&G.padding(ag.padding);isFinite(ag.outerRadius)&&G.outerRadius(ag.outerRadius);isFinite(ag.innerRadius)&&G.innerRadius(ag.innerRadius);ag.symmetry&&G.symmetry(ag.symmetry);ag.legendColor&&G.legendColor(ag.legendColor);isFinite(ag.legendSize)&&G.legendSize(ag.legendSize);M=isFinite(ag.legendTranX)?ag.legendTranX:M;K=isFinite(ag.legendTranY)?ag.legendTranY:K;isFinite(ag.legendColumnNo)&&G.legendColumnNo(ag.legendColumnNo);isFinite(ag.legendRowGap)&&G.legendRowGap(ag.legendRowGap);return this}}};if(arguments.length===1){G.options(arguments[0])}return G};h.model.circlepacking=function(){var u=h.extend();var M=i.d3;var r="Circle Packing";var F=600;var B=600;var E=F-100;var C=B-100;var K=50;var I=50;var N;var o=3;var L="Arial";var z;var A;var D;var l=1000;var J=M.format("s");var H=u.color();var s;var v=1;var y=function(P,O){return"#DD71DD"};var G=function(P,O){return"#F8F8FF"};var q=function(P,O){return"#FF7F0E"};var p=0.7;var t;u.data=function(O){if(arguments.length){if(O.type==="xml"){O=O.root;O=w(O)}N=O;t=N;return this}else{return N}};u.getType=function(){return r};u.render=function(P){A=A||M.select(P).node();if(!A||A.tagName.toLowerCase()!=="div"){console.error("The argument(element) in circlepacking.rander(_) should be <div> element")}M.select(A).classed("chart",true);D=D||M.select(A).append("svg").classed("circlepacking",true).node();s=Math.min(E,C)-5;var R=M.layout.pack().size([s,s]).value(function(T){return +T.value});z=M.select(A).select(".floatTag").node()?M.select(A).select(".floatTag"):u.floatTag(A);var Q=M.select(D).attr({width:F,height:B}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+K+","+I+")");Q=M.select(D).select("g");var O=Q.datum(t).selectAll("g").data(R.nodes);var S=O.exit().transition().duration(l).remove();S.select("circle").attr("r",0);S.select("text").attr("fill-opacity",0);n(O);x(O);Q.selectAll(".leaf").on("mouseover",function(T){m(T,true)}).on("mouseout",function(T){m(T,false)});Q.selectAll("g").on("click",function(T){if(M.event){M.event.stopPropagation();M.event.preventDefault()}t=T;u.render()});M.select("body").on("click",function(){if(M.event){M.event.stopPropagation();M.event.preventDefault()}t=t.parent||t;u.render()})};function n(O){O.each(function(P){M.select(this).attr("class",function(Q){return Q.children?"node":"leaf"}).call(function(Q){Q.transition().duration(l).attr("transform",function(R){return"translate("+R.x+","+R.y+")"});Q.select("circle").transition().duration(l).style("fill",function(R){return R.children?G(R):q(R)}).style("stroke",function(R){return R.children?y(R):"none"}).style("opacity",function(R){return R.children?p:1}).style("stroke-width",v).attr("r",function(R){return(R.r>1?R.r:0)});Q.select("text").transition().duration(l).style({"text-anchor":"middle","font-size":o,fill:fontColor,"font-family":L,opacity:1}).text(function(){return !P.children?(P.r>8?P.name.substring(0,P.r/4):""):""})})})}function x(O){O.enter().append("svg:g").attr("class",function(P){return P.children?"node":"leaf"}).attr("transform",function(P){return"translate("+P.x+","+P.y+")"}).call(function(P){P.append("svg:circle").style("cursor","pointer").attr("r",0).style("fill",function(Q){return Q.children?G(Q):q(Q)}).style("stroke",function(Q){return Q.children?y(Q):"none"}).style("opacity",function(Q){return Q.children?p:1}).style("stroke-width",v).transition().duration(l).attr("r",function(Q){return(Q.r>1?Q.r:0)});P.append("svg:text").style("opacity",0).transition().duration(l).attr({dy:"6px",color:"#FFFFFF"}).style({"text-anchor":"middle","font-size":o,fill:fontColor,"font-family":L,opacity:1}).text(function(Q){return !Q.children?(Q.r>8?Q.name.substring(0,Q.r/4):""):""})})}function m(P,O){if(O){z.style({"border-color":q(P),opacity:1,textAlign:"center",margin:"auto"}).html("name: "+P.name+"<br/>value: "+J(P.value))}else{z.style("opacity",0)}}function w(U){if(typeof U==="object"&&U.constructor===Array){var S=0;var Q;var T;var P;U.forEach(function(W,V){if(W.name!==undefined){Q=V;S++}if(W.value!==undefined){T=V;S++}});if(S===1){var O=U.filter(function(W,V){return V!==Q});for(var R=0;R<O.length;R++){O[R].children.children=w(O[R].children.children)}P={name:U[Q].name,children:U.filter(function(W,V){return V!==Q}).map(function(V){return V.children.children})}}if(S===2){P={name:U[Q].name,value:+U[T].value}}}return P}u.size=function(O){if(!arguments.length){return[F,B]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in circlepacking.size(width, height) should be number and number of svg");return this}else{F=arguments[0];B=arguments[1];return this}}};u.sizeAvail=function(O){if(!arguments.length){return[E,C]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in circlepacking.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{E=arguments[0];C=arguments[1];return this}}};u.tran=function(O){if(!arguments.length){return[K,I]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in circlepacking.tran(tranX, tranY) should be number and number of svg");return this}else{K=arguments[0];I=arguments[1];return this}}};u.fontSize=function(O){if(!arguments.length){return o}else{if(!isFinite(arguments[0])){console.error("The arguments in circlepacking.fontSize(fontSize) should be number of text");return this}else{o=arguments[0];return this}}};u.fontFamily=function(O){if(!arguments.length){return L}else{if(typeof arguments[0]!=="string"){console.error("The arguments in circlepacking.fontFamily(fontFamily) should be string of text");return this}else{o=arguments[0];return this}}};u.duration=function(O){if(!arguments.length){return l}else{if(!isFinite(arguments[0])){console.error("The arguments in circlepacking.duration(duration) should be number of transition");return this}else{l=Math.round(arguments[0]);return this}}};u.color=function(O){if(!arguments.length){return H}else{if(typeof arguments[0]!=="function"){console.error("The arguments in circlepacking.color(color) should be function of pvisual.color");return this}else{H=arguments[0];return this}}};u.tickFormat=function(O){if(!arguments.length){return J}else{if(typeof arguments[0]!=="string"){console.error("The arguments in circlepacking.tickFormat(format) should be string of d3.format");return this}else{J=M.format(arguments[0]);return this}}};u.circleLineWidth=function(O){if(!arguments.length){return v}else{if(!isFinite(arguments[0])){console.error("The arguments in circlepacking.circleLineWidth(circleLineWidth) should be number");return this}else{v=arguments[0];return this}}};u.opacity=function(O){if(!arguments.length){return p}else{if(!isFinite(arguments[0])){console.error("The arguments in circlepacking.opacity(opacity) should be number");return this}else{p=arguments[0];return this}}};u.circleLineColor=function(O){if(!arguments.length){return y}else{if(typeof arguments[0]!=="function"&&typeof arguments[0]!=="string"){console.error("The arguments in circlepacking.circleLineColor(circleLineColor) should be function or string");return this}else{y=M.functor(arguments[0]);return this}}};u.circleFillColor=function(O){if(!arguments.length){return G}else{if(typeof arguments[0]!=="function"&&typeof arguments[0]!=="string"){console.error("The arguments in circlepacking.circleFillColor(circleFillColor) should be function or string");return this}else{G=M.functor(arguments[0]);return this}}};u.nodeColor=function(O){if(!arguments.length){return q}else{if(typeof arguments[0]!=="function"&&typeof arguments[0]!=="string"){console.error("The arguments in circlepacking.nodeColor(nodeColor) should be function or string");return this}else{q=M.functor(arguments[0]);return this}}};u.options=function(O){if(!arguments.length){return{type:u.getType(),width:F,height:B,widthAvail:E,heightAvail:C,tranX:K,tranY:I,format:J,fontSize:o,fontFamily:L,color:H,duration:l,circleLineWidth:v,opacity:p,circleLineColor:y,circleFillColor:G,nodeColor:q}}else{if(typeof O!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{F=isFinite(O.width)?O.width:F;B=isFinite(O.height)?O.height:B;E=isFinite(O.widthAvail)?O.widthAvail:E;C=isFinite(O.heightAvail)?O.heightAvail:C;K=isFinite(O.tranX)?O.tranX:K;I=isFinite(O.tranY)?O.tranY:I;O.format&&u.tickFormat(O.format);O.fontFamily&&u.fontFamily(O.fontFamily);isFinite(O.fontSize)&&u.fontSize(O.fontSize);isFinite(O.duration)&&u.duration(O.duration);isFinite(O.circleLineWidth)&&u.circleLineWidth(O.circleLineWidth);isFinite(O.opacity)&&u.opacity(O.opacity);O.circleLineColor&&u.circleLineColor(O.circleLineColor);O.circleFillColor&&u.circleFillColor(O.circleFillColor);O.nodeColor&&u.nodeColor(O.nodeColor);return this}}};if(arguments.length===1){u.options(arguments[0])}return u};h.model.graph=function(){var o=h.extend();var R=i.d3;var r="网络图";var G=800;var A=800;var E=G;var B=A;var O=0;var L=0;var S;var y;var z;var C;var l=500;var N=R.format("s");var J=o.color();var w=20;var K=true;var s=0.1;var u=0.8;var t=0.9;var I=-250;var D=function(V,U){return 5};var q=function(V,U){return J(V.group)};var Q=function(V,U){return 10+V.value*5};var M=function(V,U){return 1};var P=function(V,U){return"#AAAAAA"};var p=function(V,U){return 1};var v=function(V,U){return 1};var H=function(V,U){return"#FF6666"};var T=function(V,U){return"#6666FF"};var n=function(V,U){return"#d62799"};var F=function(V,U){return 6};o.data=function(V){if(arguments.length){if(V.type==="xml"){V=V.root;V=x(V)}var U=R.map();V.nodes.forEach(function(W){U.set(W.name,W)});V.links.forEach(function(W){W.source=U.get(W.source);W.target=U.get(W.target)});V.links=V.links.filter(function(W){return W.source!==undefined&&W.target!==undefined});S=V;return this}else{return S}};o.getType=function(){return r};o.render=function(Y){z=z||R.select(Y).node();if(!z||z.tagName.toLowerCase()!=="div"){alert("The argument(element) in graph.rander(_) should be <div> element")}R.select(z).classed("chart",true);C=C||R.select(z).append("svg").classed("graph",true).node();R.select(C).select("g").remove();var Z,ab=R.layout.force().alpha(1).charge(I).gravity(s).theta(u).friction(t).linkDistance(Q).size([E-5,B-5]);ab.nodes(S.nodes).links(S.links).start();y=R.select(z).select(".floatTag").node()?R.select(z).select(".floatTag"):o.floatTag(z);var aa=R.select(C).attr({width:G,height:A}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+O+","+L+")");var X=aa.append("svg:g").datum(function(){return{selected:false,previouslySelected:false}}).classed("brush",true);aa.call(function(ac){ac.append("svg:g").classed("links",true);ac.append("svg:g").classed("nodes",true)});aa=R.select(C).select("g");var W=aa.select(".links").selectAll(".link").data(S.links);W.exit().transition().duration(l).style("opacity",0).remove();W.enter().append("svg:line").classed("link",true).style("stroke-width",M).style("stroke",P);var V=aa.select(".nodes").selectAll(".node").data(S.nodes);V.exit().transition().duration(l).style("opacity",0).remove();V.enter().append("svg:circle").classed("node",true).on("mouseover",function(ac){R.select(this).attr("r",F).style("fill-opacity",0.8).style("fill",n);aa.select(".links").selectAll(".link").each(function(ad){if(ad.source===ac){R.select(this).style("stroke-width",p).style("stroke",H)}else{if(ad.target===ac){R.select(this).style("stroke-width",v).style("stroke",T)}}});m(ac,true,aa)}).on("mouseout",function(ac){R.select(this).attr("r",D).style("fill-opacity",1).style("fill",J(ac.group));aa.select(".links").selectAll(".link").filter(function(ad){return ad.source===ac||ad.target===ac}).style("stroke-width",M).style("stroke",P);m(ac,false,aa)});V=aa.selectAll(".node").attr("r",D).style("stroke","none").style("fill",q);V.on("mousedown",function(ac){if(!ac.selected){if(!Z){V.classed("selected",function(ad){return ad.selected=ac===ad})}else{R.select(this).classed("selected",ac.selected=true)}}}).on("mouseup",function(ac){if(ac.selected&&Z){R.select(this).classed("selected",ac.selected=false)}});if(K){X.call(R.svg.brush().x(R.scale.identity().domain([0,E-5])).y(R.scale.identity().domain([0,B-5])).on("brushstart",function(){V.each(function(ac){ac.previouslySelected=Z&&ac.selected})}).on("brush",function(){var ac=R.event.target.extent();V.classed("selected",function(ad){ad.selected=ad.previouslySelected^(ac[0][0]<=ad.x&&ad.x<ac[1][0]&&ac[0][1]<=ad.y&&ad.y<ac[1][1]);R.select(this).style("stroke",ad.selected===1?"#000000":"none");return ad.selected})}).on("brushend",function(){R.event.target.clear();R.select(this).call(R.event.target)}));V.call(R.behavior.drag().on("drag",function(){U(R.event.dx,R.event.dy)}));X.select(".extent").style({"fill-opacity":0.1,stroke:"#FFFFFF","shape-rendering":"crispEdges"})}else{R.select(C).select(".brush").remove();V.call(ab.drag)}ab.on("tick",function(){W.attr("x1",function(ac){return ac.source.x}).attr("y1",function(ac){return ac.source.y}).attr("x2",function(ac){return ac.target.x}).attr("y2",function(ac){return ac.target.y});V.attr("cx",function(ac){return ac.x}).attr("cy",function(ac){return ac.y})});function U(ad,ac){V.filter(function(ae){return ae.selected}).attr("cx",function(ae){return ae.x+=ad}).attr("cy",function(ae){return ae.y+=ac});W.filter(function(ae){return ae.source.selected}).attr("x1",function(ae){return ae.source.x}).attr("y1",function(ae){return ae.source.y});W.filter(function(ae){return ae.target.selected}).attr("x2",function(ae){return ae.target.x}).attr("y2",function(ae){return ae.target.y})}};o.map=function(){function V(ak,aj){return Math.sqrt(Math.pow(aj[0]-ak.x,2)+Math.pow(aj[1]-ak.y,2))}var U=20;var af=[Number.MAX_VALUE,Number.MAX_VALUE];var ae=[Number.MIN_VALUE,Number.MIN_VALUE];S.nodes.forEach(function(aj){af[0]=af[0]>aj.x?aj.x:af[0];af[1]=af[1]>aj.y?aj.y:af[1];ae[0]=ae[0]<aj.x?aj.x:ae[0];ae[1]=ae[1]<aj.y?aj.y:ae[1]});af[0]-=10,af[1]-=10,ae[0]+=10,ae[1]+=10;var aa=R.range(Math.round(E*B/1000)).map(function(){return[Math.random()*(ae[0]-af[0])+af[0],Math.random()*(ae[1]-af[1])+af[1],-1]});for(var Z=0;Z<aa.length;Z++){var ai=aa[Z];var ac=Number.MAX_VALUE;for(var X=0;X<S.nodes.length;X++){var Y=S.nodes[X];var ab=V(Y,ai);if(ab<ac){ai[2]=Y.group;ac=ab}}if(ac>U){ai[2]=-1}}var W=S.nodes.map(function(aj){return[aj.x,aj.y,aj.group]});W=R.merge([aa,W]);var ah=R.geom.voronoi().clipExtent([af,ae]);var ag=R.select(".graph g").append("svg:g").classed("map",true).selectAll("path");ag=ag.data(ah(W),ad);ag.exit().remove();ag.enter().append("path").style("fill-opacity",0.3).style("stroke-opacity",0.1).style("fill",function(aj){return aj.point[2]===-1?"none":J(aj.point[2])}).style("stroke","none").attr("d",ad);ag.order();function ad(aj){return"M"+aj.join("L")+"Z"}};o.circle=function(ab){function U(ae,ad){return Math.sqrt(Math.pow(ad[0]-ae.x,2)+Math.pow(ad[1]-ae.y,2))}var X=R.nest().key(function(ad){return ad.group}).entries(S.nodes);z=z||R.select(ab).node();if(!z||z.tagName.toLowerCase()!=="div"){alert("The argument(element) in graph.rander(_) should be <div> element")}R.select(z).classed("chart",true);C=C||R.select(z).append("svg").classed("graph",true).node();R.select(C).select("g").remove();var W=R.layout.force().nodes(S.nodes).links(S.links).alpha(1).charge(I).gravity(s).theta(u).linkDistance(80).friction(t).size([E-5,B-5]).on("tick",Y).start();var Z=R.select(C).attr({width:G,height:A}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+O+","+L+")");Z.call(function(ad){ad.append("svg:g").classed("links",true);ad.append("svg:g").classed("nodes",true);ad.append("svg:g").classed("clusters",true)});Z=R.select(C).select("g");var ac=Z.select(".links").selectAll(".link").data(S.links);ac.exit().transition().duration(l).style("opacity",0).remove();ac.enter().append("svg:line").classed("link",true).style("stroke-width",M).style("stroke",P);var V=Z.select(".nodes").selectAll(".node").data(S.nodes);V.exit().transition().duration(l).style("opacity",0).remove();V.enter().append("svg:circle").classed("node",true);V=Z.selectAll(".node").attr("r",D).style("stroke","none").style("fill",q).call(W.drag);var aa=Z.select(".clusters").selectAll(".cluster").data(X);aa.exit().transition().duration(l).style("opacity",0).remove();aa.enter().append("svg:circle").classed("cluster",true).style("fill","none");function Y(ag){function af(ai){var ah=R.geom.quadtree().extent([[0,0],[E,B]])(ae);return function(ao){var an=ao.radius*2+w,ak=ao.x-an,aj=ao.x+an,am=ao.y-an,al=ao.y+an;ah.visit(function(ay,ar,aw,aq,av){if(ay.point&&(ay.point!==ao)){var ax=ao.x-ay.point.x,au=ao.y-ay.point.y,at=Math.sqrt(ax*ax+au*au),ap=ao.radius+ay.point.radius+w;if(at<ap){at=(at-ap)/at*ai;ao.x-=ax*=at;ao.y-=au*=at;ay.point.x+=ax;ay.point.y+=au}}return ar>aj||aq<ak||aw>al||av<am})}}function ad(ah){return function(al){var aj=ae[al.group];var ai=al.x-aj.x,am=al.y-aj.y,ak=Math.sqrt(ai*ai+am*am);ak*=ah;al.x-=ai*=ak;al.y-=am*=ak}}var ae=[];X.forEach(function(al){var ai=al.values;var ah=0;var am=0;ai.forEach(function(an){ah+=an.x;am+=an.y});ah/=ai.length;am/=ai.length;var ak=Number.MIN_VALUE;var aj;ai.forEach(function(an){aj=U(an,[ah,am]);if(ak<aj){ak=aj}});ae[al.key]={group:al.key,x:ah,y:am,radius:ak+5}});ae.forEach(af(3*ag.alpha));V.each(ad(ag.alpha*0.01)).attr("cx",function(ah){return ah.x}).attr("cy",function(ah){return ah.y});ac.attr("x1",function(ah){return ah.source.x}).attr("y1",function(ah){return ah.source.y}).attr("x2",function(ah){return ah.target.x}).attr("y2",function(ah){return ah.target.y});aa.data(ae).attr("cx",function(ah){return ah.x}).attr("cy",function(ah){return ah.y}).style("stroke",function(ah){return J(ah.group)}).attr("r",function(ah){return ah.radius})}};function m(V,U){if(U){y.style({"border-color":J(V.group),opacity:1,textAlign:"center",margin:"auto"}).html("name: "+V.name)}else{y.style("opacity",0)}}function x(X){if(typeof X==="object"&&X.constructor===Array){var V;var U;var W;X.forEach(function(ad){if(ad.nodes!==undefined){var Y;var ac;V=ad.nodes.nodes.map(function(ae){ae.node.node.forEach(function(af){if(af.name!==undefined){Y=af.name}if(af.value!==undefined){Z=af.value}if(af.group!==undefined){ac=af.group}});return{name:Y,value:Z,group:ac}})}else{if(ad.links!==undefined){var ab;var aa;var Z;U=ad.links.links.map(function(ae){ae.link.link.forEach(function(af){if(af.target!==undefined){ab=af.target}if(af.source!==undefined){aa=af.source}if(af.value!==undefined){Z=af.value}});return{source:aa,target:ab,value:Z}})}}});return{nodes:V,links:U}}}o.size=function(U){if(!arguments.length){return[G,A]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){alert("The argument(element) in graph.size(width, height) should be number and number of svg");return this}else{G=arguments[0];A=arguments[1];return this}}};o.sizeAvail=function(U){if(!arguments.length){return[E,B]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){alert("The argument(element) in graph.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{E=arguments[0];B=arguments[1];return this}}};o.tran=function(U){if(!arguments.length){return[O,L]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){alert("The argument(element) in graph.tran(tranX, tranY) should be number and number of svg");return this}else{O=arguments[0];L=arguments[1];return this}}};o.duration=function(U){if(!arguments.length){return l}else{if(!isFinite(arguments[0])){alert("The arguments in graph.duration(duration) should be number of transition");return this}else{l=Math.round(arguments[0]);return this}}};o.color=function(U){if(!arguments.length){return J}else{if(typeof arguments[0]!=="function"){alert("The arguments in graph.color(color) should be function of pvisual.color");return this}else{J=arguments[0];return this}}};o.tickFormat=function(U){if(!arguments.length){return N}else{if(typeof arguments[0]!=="string"){alert("The arguments in graph.tickFormat(format) should be string of d3.format");return this}else{N=R.format(arguments[0]);return this}}};o.dragHold=function(U){if(!arguments.length){return K}else{if(U===true||U===false){K=U}}return this};o.gravity=function(U){if(!arguments.length){return s}else{if(!isFinite(arguments[0])){alert("The arguments in graph.gravity(gravity) should be number");return this}else{s=arguments[0];return this}}};o.theta=function(U){if(!arguments.length){return u}else{if(!isFinite(arguments[0])){alert("The arguments in graph.theta(theta) should be number");return this}else{u=arguments[0];return this}}};o.friction=function(U){if(!arguments.length){return t}else{if(!isFinite(arguments[0])){alert("The arguments in graph.friction(friction) should be number");return this}else{t=arguments[0];return this}}};o.charge=function(U){if(!arguments.length){return I}else{if(!isFinite(arguments[0])){alert("The arguments in graph.charge(charge) should be number");return this}else{I=arguments[0];return this}}};o.nodeSize=function(U){if(!arguments.length){return D}else{if(typeof arguments[0]!=="function"&&!isFinite(arguments[0])){alert("The arguments in graph.nodeSize(nodeSize) should be function or number");return this}else{D=R.functor(arguments[0]);return this}}};o.nodeColor=function(U){if(!arguments.length){return q}else{if(typeof arguments[0]!=="function"&&!isFinite(arguments[0])){alert("The arguments in graph.nodeColor(nodeColor) should be function or string");return this}else{q=R.functor(arguments[0]);return this}}};o.linkDistance=function(U){if(!arguments.length){return Q}else{if(typeof arguments[0]!=="function"&&!isFinite(arguments[0])){alert("The arguments in graph.linkDistance(linkDistance) should be function or number");return this}else{Q=R.functor(arguments[0]);return this}}};o.linkWidth=function(U){if(!arguments.length){return M}else{if(typeof arguments[0]!=="function"&&!isFinite(arguments[0])){alert("The arguments in graph.linkWidth(linkWidth) should be function or number");return this}else{M=R.functor(arguments[0]);return this}}};o.linkColor=function(U){if(!arguments.length){return P}else{if(typeof arguments[0]!=="function"&&typeof arguments[0]!=="string"){alert("The arguments in graph.linkColor(linkColor) should be function or string");return this}else{P=R.functor(arguments[0]);return this}}};o.nodeLightColor=function(U){if(!arguments.length){return n}else{if(typeof arguments[0]!=="function"&&typeof arguments[0]!=="string"){alert("The arguments in graph.nodeLightColor(nodeLightColor) should be function or string");return this}else{n=R.functor(arguments[0]);return this}}};o.nodeLightSize=function(U){if(!arguments.length){return F}else{if(typeof arguments[0]!=="function"&&!isFinite(arguments[0])){alert("The arguments in graph.nodeLightSize(nodeLightSize) should be function or number");return this}else{F=R.functor(arguments[0]);return this}}};o.linkLightWidthSource=function(U){if(!arguments.length){return p}else{if(typeof arguments[0]!=="function"&&!isFinite(arguments[0])){alert("The arguments in graph.linkLightWidthSource(linkLightWidthSource) should be function or number");return this}else{p=R.functor(arguments[0]);return this}}};o.linkLightWidthTarget=function(U){if(!arguments.length){return v}else{if(typeof arguments[0]!=="function"&&!isFinite(arguments[0])){alert("The arguments in graph.linkLightWidthTarget(linkLightWidthTarget) should be function or number");return this}else{v=R.functor(arguments[0]);return this}}};o.linkLightColorSource=function(U){if(!arguments.length){return H}else{if(typeof arguments[0]!=="function"&&typeof arguments[0]!=="string"){alert("The arguments in graph.linkLightColorSource(linkLightColorSource) should be function or string");return this}else{H=R.functor(arguments[0]);return this}}};o.linkLightColorTarget=function(U){if(!arguments.length){return T}else{if(typeof arguments[0]!=="function"&&typeof arguments[0]!=="string"){alert("The arguments in graph.linkLightColorTarget(linkLightColorTarget) should be function or string");return this}else{T=R.functor(arguments[0]);return this}}};o.options=function(U){if(!arguments.length){return{type:o.getType(),width:G,height:A,widthAvail:E,heightAvail:B,tranX:O,tranY:L,format:N,color:J,duration:l,c:K,gravity:s,theta:u,friction:t,charge:I,nodeSize:D,nodeColor:q,linkDistance:Q,linkWidth:M,linkColor:P,nodeLightColor:n,nodeLightSize:F,linkLightWidthSource:p,linkLightWidthTarget:v,linkLightColorSource:H,linkLightColorTarget:T}}else{if(typeof U!=="object"){alert("The arguments in map.options(options) should be object");return this}else{G=isFinite(U.width)?U.width:G;A=isFinite(U.height)?U.height:A;E=isFinite(U.widthAvail)?U.widthAvail:E;B=isFinite(U.heightAvail)?U.heightAvail:B;O=isFinite(U.tranX)?U.tranX:O;L=isFinite(U.tranY)?U.tranY:L;U.format&&o.tickFormat(U.format);isFinite(U.duration)&&o.duration(U.duration);U.dragHold&&o.dragHold(U.dragHold);isFinite(U.gravity)&&o.gravity(U.gravity);isFinite(U.theta)&&o.theta(U.theta);isFinite(U.friction)&&o.friction(U.friction);isFinite(U.charge)&&o.charge(U.charge);U.nodeSize&&o.nodeSize(U.nodeSize);U.linkDistance&&o.linkDistance(U.linkDistance);U.linkWidth&&o.linkWidth(U.linkWidth);U.linkColor&&o.linkColor(U.linkColor);U.nodeLightColor&&o.nodeLightColor(U.nodeLightColor);U.nodeLightSize&&o.nodeLightSize(U.nodeLightSize);U.linkLightWidthSource&&o.linkLightWidthSource(U.linkLightWidthSource);U.linkLightWidthTarget&&o.linkLightWidthTarget(U.linkLightWidthTarget);U.linkLightColorSource&&o.linkLightColorSource(U.linkLightColorSource);U.linkLightColorTarget&&o.linkLightColorTarget(U.linkLightColorTarget);return this}}};if(arguments.length===1){o.options(arguments[0])}return o};h.model.groupbar=function(){var B=h.extend();var W=i.d3;var ae="柱状图";var l=800;var n=400;var v=l-200;var z=n-100;var ad=50;var ac=0;var aa;var m="Arial";var r;var Z;var p;var H=1000;var P=W.format("s");var L=B.color();var X=0.1;var U;var D;var K="";var I="";var R=0;var o=0;var F=8;var T="#000000";var s=5;var Y=5;var J=5;var M=8;var G="#929292";var Q="#929292";var V=2;var y="#000000";var q="#000000";var t=13;var O=0;var N=0;var u=10;var x=100;B.data=function(ag){if(arguments.length){if(ag.type==="xml"){ag=ag.root;ag=ag.map(function(ak){var aj={};ak.row.row.forEach(function(am){var al=h.keys(am)[0];aj[al]=am[al]});return aj})}else{if(ag.type==="xlsx"||ag.type==="xls"){var ai=[];for(var ah=0;ah<ag.length;ah++){var af=h.keys(ag[ah])[0];ai=ai.concat(ag[ah][af])}ag=ai}}U=h.keys(ag[0]).filter(function(aj){return aj!=="x"}).map(function(aj){return{name:aj,_flag:true}});D=ag.map(function(ak){var aj=U.map(function(al){return{name:al.name,y:+ak[al.name]}});return{x:ak.x,value:aj}});U.x=ag.map(function(aj){return aj.x});aa=ag;return this}else{return aa}};B.getType=function(){return ae};B.render=function(an){Z=Z||W.select(an).node();if(!Z||Z.tagName.toLowerCase()!=="div"){console.error("The argument(element) in groupbar.rander(_) should be <div> element")}W.select(Z).classed("chart",true);p=p||W.select(Z).append("svg").classed("groupbar",true).node();var aj=W.scale.ordinal().rangeRoundBands([0,v],X);var ah=W.scale.ordinal();var am=W.scale.linear().range([z,0]);aj.domain(U.x);ah.domain(U.filter(function(ao){return ao._flag}).map(function(ao){return ao.name})).rangeRoundBands([0,aj.rangeBand()]);am.domain([0,W.max(D,function(ao){return W.max(ao.value,function(ap){return ap.y})})]);var ai=W.svg.axis().scale(aj).orient("bottom").tickSize(Y);var ag=W.svg.axis().scale(am).orient("left").ticks(s).tickSize(J).tickFormat(P);r=W.select(Z).select(".floatTag").node()?W.select(Z).select(".floatTag"):B.floatTag(Z);var al=W.select(p).attr({width:l,height:n}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+ad+","+ac+")");al.call(function(ao){ao.append("svg:g").classed("dimensions",true);ao.append("svg:g").classed("x-axis axis",true);ao.append("svg:g").classed("y-axis axis",true);ao.append("svg:g").classed("legends",true)});al=W.select(p).select("g");var af=al.selectAll(".dimensions").selectAll(".dimension").data(D);af.exit().transition().duration(H).style("opacity",0).remove();w(af,aj,ah,am);A(af,aj,ah,am);var ak=al.select(".legends").attr("transform","translate("+O+","+N+")").selectAll(".legend").data(U);ak.exit().transition().duration(H).style("opacity",0).remove();S(ak);ab(ak);E(al,ai,ag)};function w(ah,ag,af,ai){ah.each(function(ak){var aj=W.select(this).selectAll("rect").data(function(al){return al.value});aj.exit().transition().duration(H).style("opacity",0).remove();aj.transition().duration(H).attr("x",function(al){return af(al.name)}).style("fill",function(al){return L(al.name)}).attr("y",function(al){return ai(al.y)}).attr("width",af.rangeBand()).attr("height",function(al){return z-ai(al.y)});aj.enter().append("svg:rect").attr("x",function(al){return af(al.name)}).attr({height:0,y:ai(0),width:af.rangeBand()}).style("fill",function(al){return L(al.name)}).on("mouseover",function(al){C(al,true)}).on("mouseout",function(al){C(al,false)}).transition().duration(H).attr("y",function(al){return ai(al.y)}).attr("height",function(al){return z-ai(al.y)});W.select(this).transition().duration(H).attr("transform",function(){return"translate("+ag(ak.x)+",0)"})})}function A(ah,ag,af,ai){ah.enter().append("svg:g").classed("dimension",true).each(function(aj){W.select(this).selectAll("rect").data(function(ak){return ak.value}).enter().append("svg:rect").attr("x",function(ak){return af(ak.name)}).attr({height:0,y:ai(0),width:af.rangeBand()}).style("fill",function(ak){return L(ak.name)}).on("mouseover",function(ak){C(ak,true)}).on("mouseout",function(ak){C(ak,false)}).transition().duration(H).attr("y",function(ak){return ai(ak.y)}).attr("height",function(ak){return z-ai(ak.y)});W.select(this).transition().duration(H).attr("transform",function(){return"translate("+ag(aj.x)+",0)"})})}function ab(af){af.enter().append("svg:g").classed("legend",true).style("cursor","pointer").on("click",function(ag){if(!W.select(this).classed("none")){if(U.length>1){W.select(this).classed("none",true);ag._flag=false;D=aa.map(function(ai){var ah=U.filter(function(aj){return aj._flag}).map(function(aj){return{name:aj.name,y:+ai[aj.name]}});return{x:ai.x,value:ah}});B.render()}}else{W.select(this).classed("none",false);ag._flag=true;D=aa.map(function(ai){var ah=U.filter(function(aj){return aj._flag}).map(function(aj){return{name:aj.name,y:+ai[aj.name]}});return{x:ai.x,value:ah}});B.render()}}).each(function(ah,ag){W.select(this).append("svg:rect").attr({x:(ag-ag%u)/u*x+v+20,y:ag%u*20}).attr({width:10,height:10}).style({fill:L(ag),stroke:L(ag)}).style("fill-opacity",ah._flag?1:0).style("opacity",0).transition().duration(H/2).style("opacity",1);W.select(this).append("svg:text").attr({x:(ag-ag%u)/u*x+v+40,y:ag%u*20+9}).style({opacity:0,fill:q,"font-size":t,"font-family":m}).transition().duration(H/2).style("opacity",1).text(ah.name)})}function S(af){af.each(function(ah,ag){W.select(this).selectAll("rect").transition().duration(H/2).style({fill:L(ag),stroke:L(ag)}).style("fill-opacity",ah._flag?1:0).attr({x:(ag-ag%u)/u*x+v+20,y:ag%u*20});W.select(this).selectAll("text").transition().duration(H/2).attr({x:(ag-ag%u)/u*x+v+40,y:ag%u*20+9}).style({"font-size":t,fill:q,"font-family":m}).text(ah.name)})}function E(ag,ah,af){ag.select(".x-axis").each(function(){W.select(this).select(".label").transition().duration(H).attr({x:v,y:-6}).style({"text-anchor":"end","font-family":m,"font-size":F,fill:T}).text(I);W.select(this).selectAll(".label").data([1]).enter().append("svg:text").classed("label",true).style({"text-anchor":"end","font-family":m,"font-size":F,fill:T}).attr({x:v,y:-6}).text(I);W.select(this).transition().duration(H).attr("transform","translate(0,"+z+")").call(ah)});ag.select(".y-axis").each(function(){W.select(this).select(".label").style({"text-anchor":"end","font-family":m,"font-size":F,fill:T}).text(K);W.select(this).selectAll(".label").data([1]).enter().append("svg:text").classed("label",true).style({"text-anchor":"end","font-family":m,"font-size":F,fill:T}).attr({transform:"rotate(-90)",y:8,dy:".71em"}).text(K);W.select(this).transition().duration(H).call(af)});ag.selectAll(".axis").call(function(ai){ai.selectAll("path").style({fill:"none",stroke:y,"stroke-width":V,"shape-rendering":"crispEdges"});ai.selectAll("line").style({fill:"none",stroke:Q,"shape-rendering":"crispEdges"})});ag.select(".x-axis").selectAll(".tick").select("text").style({"text-anchor":"middle","font-family":m,"font-size":M,fill:G}).attr("transform",function(){return"translate("+this.getComputedTextLength()*Math.abs(Math.sin(R)*0.5)+","+(this.getComputedTextLength()*(0.5*Math.abs(Math.sin(R)))+5)+")rotate("+R+")"});ag.select(".y-axis").selectAll(".tick").select("text").style({"text-anchor":"start","font-family":m,"font-size":M,fill:G}).attr("transform",function(){return"translate("+-this.getComputedTextLength()+", 0)rotate("+o+")"})}function C(ag,af){if(af){r.style({"border-color":L(ag.name),opacity:1,textAlign:"center",margin:"auto"}).html("name: "+ag.name+"<br/>value: "+P(ag.y))}else{r.style("opacity",0)}}B.size=function(af){if(!arguments.length){return[l,n]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in groupbar.size(width, height) should be number and number of svg");return this}else{l=arguments[0];n=arguments[1];return this}}};B.sizeAvail=function(af){if(!arguments.length){return[v,z]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in groupbar.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{v=arguments[0];z=arguments[1];return this}}};B.tran=function(af){if(!arguments.length){return[ad,ac]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in groupbar.tran(tranX, tranY) should be number and number of svg");return this}else{ad=arguments[0];ac=arguments[1];return this}}};B.fontFamily=function(af){if(!arguments.length){return m}else{if(typeof arguments[0]!=="string"){console.error("The arguments in groupbar.fontFamily(fontFamily) should be string of text");return this}else{fontSize=arguments[0];return this}}};B.duration=function(af){if(!arguments.length){return H}else{if(!isFinite(arguments[0])){console.error("The arguments in groupbar.duration(duration) should be number of transition");return this}else{H=Math.round(arguments[0]);return this}}};B.color=function(af){if(!arguments.length){return L}else{if(typeof arguments[0]!=="function"){console.error("The arguments in groupbar.color(color) should be function of pvisual.color");return this}else{L=arguments[0];return this}}};B.tickFormat=function(af){if(!arguments.length){return P}else{if(typeof arguments[0]!=="string"){console.error("The arguments in groupbar.tickFormat(format) should be string of d3.format");return this}else{P=W.format(arguments[0]);return this}}};B.padding=function(af){if(!arguments.length){return X}else{if(!isFinite(arguments[0])){console.error("The arguments in groupbar.padding(padding) should be number");return this}else{X=arguments[0];return this}}};B.xLegend=function(af){if(!arguments.length){return I}else{if(typeof arguments[0]!=="string"){console.error("The arguments in groupbar.xLegend(xLegend) should be string");return this}else{I=arguments[0];return this}}};B.yLegend=function(af){if(!arguments.length){return K}else{if(typeof arguments[0]!=="string"){console.error("The arguments in groupbar.yLegend(yLegend) should be string");return this}else{K=arguments[0];return this}}};B.xtickRotate=function(af){if(!arguments.length){return R}else{if(!isFinite(arguments[0])){console.error("The arguments in groupbar.xtickRotate(xtickRotate) should be number of tick");return this}else{R=Math.round(arguments[0]);return this}}};B.ytickRotate=function(af){if(!arguments.length){return o}else{if(!isFinite(arguments[0])){console.error("The arguments in groupbar.ytickRotate(ytickRotate) should be number of tick");return this}else{o=Math.round(arguments[0]);return this}}};B.labelSize=function(af){if(!arguments.length){return F}else{if(!isFinite(arguments[0])){console.error("The arguments in groupbar.labelSize(labelSize) should be string");return this}else{F=arguments[0];return this}}};B.labelColor=function(af){if(!arguments.length){return T}else{if(typeof arguments[0]!=="string"){console.error("The arguments in groupbar.labelColor(labelColor) should be string");return this}else{T=arguments[0];return this}}};B.ytickNumber=function(af){if(!arguments.length){return s}else{if(!isFinite(arguments[0])){console.error("The arguments in groupbar.ytickNumber(ytickNumber) should be number of tick");return this}else{s=Math.round(arguments[0]);return this}}};B.tickLineColor=function(af){if(!arguments.length){return Q}else{if(typeof arguments[0]!=="string"){console.error("The arguments in groupbar.tickLineColor(tickLineColor) should be string");return this}else{Q=arguments[0];return this}}};B.tickTextSize=function(af){if(!arguments.length){return M}else{if(!isFinite(arguments[0])){console.error("The arguments in groupbar.tickTextSize(tickTextSize) should be number");return this}else{M=arguments[0];return this}}};B.tickTextColor=function(af){if(!arguments.length){return G}else{if(typeof arguments[0]!=="string"){console.error("The arguments in groupbar.tickTextColor(tickTextColor) should be string");return this}else{G=arguments[0];return this}}};B.axisPathWidth=function(af){if(!arguments.length){return V}else{if(!isFinite(arguments[0])){console.error("The arguments in groupbar.axisPathWidth(axisPathWidth) should be string");return this}else{V=arguments[0];return this}}};B.axisPathColor=function(af){if(!arguments.length){return y}else{if(typeof arguments[0]!=="string"){console.error("The arguments in groupbar.axisPathColor(axisPathColor) should be string");return this}else{y=arguments[0];return this}}};B.legendTran=function(af){if(!arguments.length){return[O,N]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in groupbar.legendTran(tranX, tranY) should be number and number of svg");return this}else{O=arguments[0];N=arguments[1];return this}}};B.legendSize=function(af){if(!arguments.length){return t}else{if(!isFinite(arguments[0])){console.error("The arguments in groupbar.legendSize(legendSize) should be number of text");return this}else{t=arguments[0];return this}}};B.legendColor=function(af){if(!arguments.length){return q}else{if(typeof arguments[0]!=="string"){console.error("The arguments in groupbar.legendColor(legendColor) should be string of text");return this}else{q=arguments[0];return this}}};B.legendColumnNo=function(af){if(!arguments.length){return u}else{if(!isFinite(arguments[0])){console.error("The arguments in groupbar.legendColumnNo(legendColumnNo) should be number of text");return this}else{u=arguments[0];return this}}};B.legendRowGap=function(af){if(!arguments.length){return x}else{if(!isFinite(arguments[0])){console.error("The arguments in groupbar.legendRowGap(legendRowGap) should be number of text");return this}else{x=arguments[0];return this}}};B.options=function(af){if(!arguments.length){return{type:B.getType(),width:l,height:n,widthAvail:v,heightAvail:z,tranX:ad,tranY:ac,format:P,fontFamily:m,color:L,duration:H,padding:X,xLegend:I,yLegend:K,xtickRotate:R,ytickRotate:o,labelSize:F,labelColor:T,ytickNumber:s,tickTextSize:M,tickTextColor:G,tickLineColor:Q,xtickLineLength:Y,ytickLineLength:J,axisPathWidth:V,axisPathColor:y,legendColor:q,legendSize:t,legendTranX:O,legendTranY:N,legendColumnNo:u,legendRowGap:x}}else{if(typeof af!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{l=isFinite(af.width)?af.width:l;n=isFinite(af.height)?af.height:n;v=isFinite(af.widthAvail)?af.widthAvail:v;z=isFinite(af.heightAvail)?af.heightAvail:z;ad=isFinite(af.tranX)?af.tranX:ad;ac=isFinite(af.tranY)?af.tranY:ac;af.format&&B.tickFormat(af.format);af.fontFamily&&B.fontFamily(af.fontFamily);isFinite(af.duration)&&B.duration(af.duration);af.xLegend&&B.xLegend(af.xLegend);af.yLegend&&B.yLegend(af.yLegend);isFinite(af.xtickRotate)&&B.xtickRotate(af.xtickRotate);isFinite(af.ytickRotate)&&B.ytickRotate(af.ytickRotate);isFinite(af.labelSize)&&B.labelSize(af.labelSize);af.labelColor&&B.labelColor(af.labelColor);isFinite(af.padding)&&B.padding(af.padding);isFinite(af.ytickNumber)&&B.ytickNumber(af.ytickNumber);isFinite(af.tickTextSize)&&B.tickTextSize(af.tickTextSize);af.tickTextColor&&B.tickTextColor(af.tickTextColor);af.tickLineColor&&B.tickLineColor(af.tickLineColor);isFinite(af.xtickLineLength)&&B.xtickLineLength(af.xtickLineLength);isFinite(af.ytickLineLength)&&B.ytickLineLength(af.ytickLineLength);isFinite(af.axisPathWidth)&&B.axisPathWidth(af.axisPathWidth);af.axisPathColor&&B.axisPathColor(af.axisPathColor);af.legendColor&&B.legendColor(af.legendColor);isFinite(af.legendSize)&&B.legendSize(af.legendSize);O=isFinite(af.legendTranX)?af.legendTranX:O;N=isFinite(af.legendTranY)?af.legendTranY:N;isFinite(af.legendColumnNo)&&B.legendColumnNo(af.legendColumnNo);isFinite(af.legendRowGap)&&B.legendRowGap(af.legendRowGap);return this}}};if(arguments.length===1){B.options(arguments[0])}return B};h.model.heat=function(){var r=h.extend();var T=i.d3;var ac="热点图";var l=800;var n=400;var w=l-150;var z=n-100;var ab=40;var aa=10;var Y;var m="Arial";var s;var X;var p;var E=1000;var M=T.format("s");var I=r.color();var V=0;var R;var U=["white","steelblue"];var H="";var F="";var O=0;var o=0;var C=8;var Q="#000000";var t=5;var W=5;var G=5;var J=8;var D="#929292";var N="#929292";var S=2;var y="#000000";var q="#000000";var u=13;var L=0;var K=0;var v=10;var x=100;r.data=function(ae){if(arguments.length){if(ae.type==="xml"){ae=ae.root;ae=ae.map(function(ai){var ah={};ai.row.row.forEach(function(ak){var aj=h.keys(ak)[0];ah[aj]=ak[aj]});return ah})}else{if(ae.type==="xlsx"||ae.type==="xls"){var ag=[];for(var af=0;af<ae.length;af++){var ad=h.keys(ae[af])[0];ag=ag.concat(ae[af][ad])}ae=ag}}R={};R.x=T.set([]);R.y=T.set([]);ae.forEach(function(ah){ah.h=+ah.h;ah._flag=true;R.x.add(ah.x);R.y.add(ah.y)});R.x=R.x.values();R.y=R.y.values();Y=ae;return this}else{return Y}};r.getType=function(){return ac};r.render=function(al){X=X||T.select(al).node();if(!X||X.tagName.toLowerCase()!=="div"){console.error("The argument(element) in heat.rander(_) should be <div> element")}T.select(X).classed("chart",true);p=p||T.select(X).append("svg").classed("heat",true).node();var ak=T.scale.ordinal().rangeRoundBands([0,w],V);var aj=T.scale.ordinal().rangeRoundBands([z,0],V);var ag=T.scale.linear().range([U[0],U[1]]);ak.domain(R.x);aj.domain(R.y);ag.domain([0,T.max(Y,function(am){return am.h})]);var af=T.svg.axis().scale(ak).orient("bottom").tickSize(W);var ae=T.svg.axis().scale(aj).orient("left").ticks(t).tickSize(G).tickFormat(M);s=T.select(X).select(".floatTag").node()?T.select(X).select(".floatTag"):r.floatTag(X);var ai=T.select(p).attr({width:l,height:n}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+ab+","+aa+")");ai.call(function(am){am.append("svg:g").classed("dimensions",true);am.append("svg:g").classed("x-axis axis",true);am.append("svg:g").classed("y-axis axis",true);am.append("svg:g").classed("legends",true)});ai=T.select(p).select("g");var ad=ai.selectAll(".dimensions").selectAll(".dimension").data(Y.filter(function(am){return am._flag}));ad.exit().transition().duration(E).style("opacity",0).remove();ad.transition().duration(E).call(function(an){var ao=ak.rangeBand();var am=aj.rangeBand();an.attr("x",function(ap){return ak(ap.x)}).attr("y",function(ap){return aj(ap.y)}).style("fill",function(ap){return ag(ap.h)}).attr("width",ao).attr("height",am)});ad.enter().append("svg:rect").classed("dimension",true).on("mouseover",function(am){return A(am,true,ag)}).on("mouseout",function(am){return A(am,false,ag)}).call(function(an){var ao=ak.rangeBand();var am=aj.rangeBand();an.attr("x",function(ap){return ak(ap.x)}).attr("y",function(ap){return aj(ap.y)}).style("fill",function(ap){return ag(ap.h)}).transition().duration(E).attr("width",ao).attr("height",am)});var ah=ai.select(".legends").attr("transform","translate("+L+","+K+")").selectAll(".legend").data(ag.ticks(6).slice(1).reverse());ah.exit().transition().duration(E).style("opacity",0).remove();P(ah,ag);Z(ah,ag);B(ai,af,ae)};function Z(ad,ae){ad.enter().append("svg:g").classed("legend",true).style("cursor","pointer").on("click",function(ah,af){if(!T.select(this).classed("none")){T.select(this).classed("none",true).select("rect").transition().duration(E).style("fill-opacity",0);var ag=ae.ticks(6).slice(1).reverse();T.select(p).select(".dimensions").selectAll(".dimension").each(function(ai){if((af===ag.length-1&&ai.h<=ah)||(af===0&&ai.h>ag[1])||(ai.h<=ah&&ai.h>ag[af+1])){T.select(this).transition().duration(E).style("fill-opacity",0.2)}})}else{T.select(this).classed("none",false).select("rect").transition().duration(E).style("fill-opacity",1);var ag=ae.ticks(6).slice(1).reverse();T.select(p).select(".dimensions").selectAll(".dimension").each(function(ai){if((af===ag.length-1&&ai.h<=ah)||(af===0&&ai.h>ag[1])||(ai.h<=ah&&ai.h>ag[af+1])){T.select(this).transition().duration(E).style("fill-opacity",1)}})}}).each(function(ag,af){T.select(this).append("svg:rect").attr({x:(af-af%v)/v*x+w+20,y:af%v*20}).attr({width:10,height:10}).style("fill",ae).style("stroke",ae).style("fill-opacity",function(){return T.select(this).classed("none")?0:1}).style("opacity",0).transition().duration(E).style("opacity",1);T.select(this).append("svg:text").attr({x:(af-af%v)/v*x+w+40,y:af%v*20+9}).style({opacity:0,fill:q,"font-size":u,"font-family":m}).transition().duration(E).style("opacity",1).text(String)})}function P(ad,ae){ad.each(function(ag,af){T.select(this).selectAll("rect").transition().duration(E/2).style("fill",ae).style("stroke",ae).style("fill-opacity",function(){return T.select(this).classed("none")?0:1}).attr({x:(af-af%v)/v*x+w+20,y:af%v*20});T.select(this).selectAll("text").transition().duration(E/2).attr({x:(af-af%v)/v*x+w+40,y:af%v*20+9}).style({"font-size":u,fill:q,"font-family":m}).text(String)})}function B(ae,af,ad){ae.select(".x-axis").each(function(){T.select(this).select(".label").transition().duration(E).attr({x:w,y:-2}).style({"text-anchor":"end","font-family":m,"font-size":J}).text(F);T.select(this).selectAll(".label").data([1]).enter().append("svg:text").classed("label",true).attr({x:w,y:-2}).style({"text-anchor":"end","font-family":m,"font-size":C,fill:Q}).text(F);T.select(this).transition().duration(E).attr("transform","translate(0,"+z+")").call(af)});ae.select(".y-axis").each(function(){T.select(this).select(".label").style({"text-anchor":"end","font-family":m,"font-size":C,fill:Q}).text(H);T.select(this).selectAll(".label").data([1]).enter().append("svg:text").classed("label",true).style({"text-anchor":"end","font-family":m,"font-size":C,fill:Q}).attr({transform:"rotate(-90)",y:8,dy:".71em"}).text(H);T.select(this).transition().duration(E).call(ad)});ae.selectAll(".axis").call(function(ag){ag.selectAll("path").style({fill:"none",stroke:y,"stroke-width":S,"shape-rendering":"crispEdges"});ag.selectAll("line").style({fill:"none",stroke:N,"shape-rendering":"crispEdges"})});ae.select(".x-axis").selectAll(".tick").select("text").style({"text-anchor":"middle","font-family":m,"font-size":J,fill:D}).attr("transform",function(){return"translate("+this.getComputedTextLength()*Math.abs(Math.sin(O)*0.5)+","+(this.getComputedTextLength()*(0.5*Math.abs(Math.sin(O)))+5)+")rotate("+O+")"});ae.select(".y-axis").selectAll(".tick").select("text").style({"text-anchor":"start","font-family":m,"font-size":J,fill:D}).attr("transform",function(){return"translate("+-this.getComputedTextLength()+", 0)rotate("+o+")"})}function A(af,ae,ad){if(ae){s.style({"border-color":ad(af.h),opacity:1,textAlign:"center",margin:"auto"}).html("x: "+af.x+"<br/>y: "+af.y+"<br/>value: "+af.h)}else{s.style("opacity",0)}}r.size=function(ad){if(!arguments.length){return[l,n]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in heat.size(width, height) should be number and number of svg");return this}else{l=arguments[0];n=arguments[1];return this}}};r.sizeAvail=function(ad){if(!arguments.length){return[w,z]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in heat.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{w=arguments[0];z=arguments[1];return this}}};r.tran=function(ad){if(!arguments.length){return[ab,aa]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in heat.tran(tranX, tranY) should be number and number of svg");return this}else{ab=arguments[0];aa=arguments[1];return this}}};r.fontFamily=function(ad){if(!arguments.length){return m}else{if(typeof arguments[0]!=="string"){console.error("The arguments in heat.fontFamily(fontFamily) should be string of text");return this}else{m=arguments[0];return this}}};r.duration=function(ad){if(!arguments.length){return E}else{if(!isFinite(arguments[0])){console.error("The arguments in heat.duration(duration) should be number of transition");return this}else{E=Math.round(arguments[0]);return this}}};r.color=function(ad){if(!arguments.length){return I}else{if(typeof arguments[0]!=="function"){console.error("The arguments in heat.color(color) should be function of pvisual.color");return this}else{I=arguments[0];return this}}};r.tickFormat=function(ad){if(!arguments.length){return M}else{if(typeof arguments[0]!=="string"){console.error("The arguments in heat.tickFormat(format) should be string of d3.format");return this}else{M=T.format(arguments[0]);return this}}};r.padding=function(ad){if(!arguments.length){return V}else{if(!isFinite(arguments[0])){console.error("The arguments in heat.padding(padding) should be number");return this}else{V=arguments[0];return this}}};r.xLegend=function(ad){if(!arguments.length){return F}else{if(typeof arguments[0]!=="string"){console.error("The arguments in heat.xLegend(xLegend) should be string");return this}else{F=arguments[0];return this}}};r.yLegend=function(ad){if(!arguments.length){return H}else{if(typeof arguments[0]!=="string"){console.error("The arguments in heat.yLegend(yLegend) should be string");return this}else{H=arguments[0];return this}}};r.xtickRotate=function(ad){if(!arguments.length){return O}else{if(!isFinite(arguments[0])){console.error("The arguments in heat.xtickRotate(xtickRotate) should be number of tick");return this}else{O=Math.round(arguments[0]);return this}}};r.ytickRotate=function(ad){if(!arguments.length){return o}else{if(!isFinite(arguments[0])){console.error("The arguments in heat.ytickRotate(ytickRotate) should be number of tick");return this}else{o=Math.round(arguments[0]);return this}}};r.labelSize=function(ad){if(!arguments.length){return C}else{if(!isFinite(arguments[0])){console.error("The arguments in heat.labelSize(labelSize) should be string");return this}else{C=arguments[0];return this}}};r.labelColor=function(ad){if(!arguments.length){return Q}else{if(typeof arguments[0]!=="string"){console.error("The arguments in heat.labelColor(labelColor) should be string");return this}else{Q=arguments[0];return this}}};r.ytickNumber=function(ad){if(!arguments.length){return t}else{if(!isFinite(arguments[0])){console.error("The arguments in heat.ytickNumber(ytickNumber) should be number of tick");return this}else{t=Math.round(arguments[0]);return this}}};r.tickLineColor=function(ad){if(!arguments.length){return N}else{if(typeof arguments[0]!=="string"){console.error("The arguments in heat.tickLineColor(tickLineColor) should be string");return this}else{N=arguments[0];return this}}};r.tickTextSize=function(ad){if(!arguments.length){return J}else{if(!isFinite(arguments[0])){console.error("The arguments in heat.tickTextSize(tickTextSize) should be number");return this}else{J=arguments[0];return this}}};r.tickTextColor=function(ad){if(!arguments.length){return D}else{if(typeof arguments[0]!=="string"){console.error("The arguments in heat.tickTextColor(tickTextColor) should be string");return this}else{D=arguments[0];return this}}};r.axisPathWidth=function(ad){if(!arguments.length){return S}else{if(!isFinite(arguments[0])){console.error("The arguments in heat.axisPathWidth(axisPathWidth) should be string");return this}else{S=arguments[0];return this}}};r.axisPathColor=function(ad){if(!arguments.length){return y}else{if(typeof arguments[0]!=="string"){console.error("The arguments in heat.axisPathColor(axisPathColor) should be string");return this}else{y=arguments[0];return this}}};r.legendTran=function(ad){if(!arguments.length){return[L,K]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in heat.legendTran(tranX, tranY) should be number and number of svg");return this}else{L=arguments[0];K=arguments[1];return this}}};r.legendSize=function(ad){if(!arguments.length){return u}else{if(!isFinite(arguments[0])){console.error("The arguments in heat.legendSize(legendSize) should be number of text");return this}else{u=arguments[0];return this}}};r.legendColor=function(ad){if(!arguments.length){return q}else{if(typeof arguments[0]!=="string"){console.error("The arguments in heat.legendColor(legendColor) should be string of text");return this}else{q=arguments[0];return this}}};r.legendColumnNo=function(ad){if(!arguments.length){return v}else{if(!isFinite(arguments[0])){console.error("The arguments in heat.legendColumnNo(legendColumnNo) should be number of text");return this}else{v=arguments[0];return this}}};r.legendRowGap=function(ad){if(!arguments.length){return x}else{if(!isFinite(arguments[0])){console.error("The arguments in heat.legendRowGap(legendRowGap) should be number of text");return this}else{x=arguments[0];return this}}};r.gradientColor=function(ad){if(!arguments.length){return U}else{if(arguments.length!==2||typeof arguments[0]!=="string"||typeof arguments[1]!=="string"){console.error("The argument(element) in map.gradientColor(start, end) should be string and string of color");return this}else{U[0]=arguments[0];U[1]=arguments[1];return this}}};r.options=function(ad){if(!arguments.length){return{type:r.getType(),width:l,height:n,widthAvail:w,heightAvail:z,tranX:ab,tranY:aa,format:M,fontFamily:m,color:I,duration:E,padding:V,gradientColor:U,xLegend:F,yLegend:H,xtickRotate:O,ytickRotate:o,labelSize:C,labelColor:Q,ytickNumber:t,tickTextSize:J,tickTextColor:D,tickLineColor:N,xtickLineLength:W,ytickLineLength:G,axisPathWidth:S,axisPathColor:y,legendColor:q,legendSize:u,legendTranX:L,legendTranY:K,legendColumnNo:v,legendRowGap:x}}else{if(typeof ad!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{l=isFinite(ad.width)?ad.width:l;n=isFinite(ad.height)?ad.height:n;w=isFinite(ad.widthAvail)?ad.widthAvail:w;z=isFinite(ad.heightAvail)?ad.heightAvail:z;ab=isFinite(ad.tranX)?ad.tranX:ab;aa=isFinite(ad.tranY)?ad.tranY:aa;ad.format&&r.tickFormat(ad.format);ad.fontFamily&&r.fontFamily(ad.fontFamily);isFinite(ad.duration)&&r.duration(ad.duration);typeof ad.gradientColor==="object"&&ad.gradientColor.constructor===Array&&ad.gradientColor.length===2&&r.gradientColor(ad.gradientColor[0],ad.gradientColor[1]);ad.xLegend&&r.xLegend(ad.xLegend);ad.yLegend&&r.yLegend(ad.yLegend);isFinite(ad.xtickRotate)&&r.xtickRotate(ad.xtickRotate);isFinite(ad.ytickRotate)&&r.ytickRotate(ad.ytickRotate);isFinite(ad.labelSize)&&r.labelSize(ad.labelSize);ad.labelColor&&r.labelColor(ad.labelColor);isFinite(ad.padding)&&r.padding(ad.padding);isFinite(ad.ytickNumber)&&r.ytickNumber(ad.ytickNumber);isFinite(ad.tickTextSize)&&r.tickTextSize(ad.tickTextSize);ad.tickTextColor&&r.tickTextColor(ad.tickTextColor);ad.tickLineColor&&r.tickLineColor(ad.tickLineColor);isFinite(ad.xtickLineLength)&&r.xtickLineLength(ad.xtickLineLength);isFinite(ad.ytickLineLength)&&r.ytickLineLength(ad.ytickLineLength);isFinite(ad.axisPathWidth)&&r.axisPathWidth(ad.axisPathWidth);ad.axisPathColor&&r.axisPathColor(ad.axisPathColor);ad.legendColor&&r.legendColor(ad.legendColor);isFinite(ad.legendSize)&&r.legendSize(ad.legendSize);L=isFinite(ad.legendTranX)?ad.legendTranX:L;K=isFinite(ad.legendTranY)?ad.legendTranY:K;isFinite(ad.legendColumnNo)&&r.legendColumnNo(ad.legendColumnNo);isFinite(ad.legendRowGap)&&r.legendRowGap(ad.legendRowGap);return this}}};if(arguments.length===1){r.options(arguments[0])}return r};h.model.map=function(){var G=h.extend();var O=i.d3;var W="Map";var l=1000;var p=600;var w=l;var A=p;var V=0;var U=0;var R;var B=3;var n="Arial";var L="#000";var s;var Q;var q;var F=500;var J=O.format("s");var H=G.color();var T=550;var m=[0,100];var P=["white","green"];var x=O.map([]);var M=function(Y,X){return"orange"};var D=function(Y,X){return"#DDDDDD"};var u=function(Y,X){return"#FFFFFF"};var o={type:"FeatureCollection",features:[{type:"Feature",id:"65",properties:{name:"新疆",cp:[84.9023,41.748],childNum:18},geometry:{type:"Polygon",coordinates:[[[96.416,42.7588],[96.416,42.7148],[95.9766,42.4951],[96.0645,42.3193],[96.2402,42.2314],[95.9766,41.9238],[95.2734,41.6162],[95.1855,41.792],[94.5703,41.4844],[94.043,41.0889],[93.8672,40.6934],[93.0762,40.6494],[92.6367,39.6387],[92.373,39.3311],[92.373,39.1113],[92.373,39.0234],[90.1758,38.4961],[90.3516,38.2324],[90.6152,38.3203],[90.5273,37.8369],[91.0547,37.4414],[91.3184,37.0898],[90.7031,36.7822],[90.791,36.6064],[91.0547,36.5186],[91.0547,36.0791],[90.8789,36.0352],[90,36.2549],[89.9121,36.0791],[89.7363,36.0791],[89.209,36.2988],[88.7695,36.3428],[88.5938,36.4746],[87.3633,36.4307],[86.2207,36.167],[86.1328,35.8594],[85.6055,35.6836],[85.0781,35.7275],[84.1992,35.376],[83.1445,35.4199],[82.8809,35.6836],[82.4414,35.7275],[82.002,35.332],[81.6504,35.2441],[80.4199,35.4199],[80.2441,35.2881],[80.332,35.1563],[80.2441,35.2002],[79.8926,34.8047],[79.8047,34.4971],[79.1016,34.4531],[79.0137,34.3213],[78.2227,34.7168],[78.0469,35.2441],[78.0469,35.5078],[77.4316,35.4639],[76.8164,35.6396],[76.5527,35.8594],[76.2012,35.8154],[75.9375,36.0352],[76.0254,36.4746],[75.8496,36.6943],[75.498,36.7383],[75.4102,36.958],[75.0586,37.002],[74.8828,36.9141],[74.7949,37.0459],[74.5313,37.0898],[74.5313,37.2217],[74.8828,37.2217],[75.1465,37.4414],[74.8828,37.5732],[74.9707,37.749],[74.8828,38.4521],[74.3555,38.6719],[74.1797,38.6719],[74.0918,38.54],[73.8281,38.584],[73.7402,38.8477],[73.8281,38.9795],[73.4766,39.375],[73.916,39.5068],[73.916,39.6826],[73.8281,39.7705],[74.0039,40.0342],[74.8828,40.3418],[74.7949,40.5176],[75.2344,40.4297],[75.5859,40.6494],[75.7617,40.2979],[76.377,40.3857],[76.9043,41.001],[77.6074,41.001],[78.1348,41.2207],[78.1348,41.3965],[80.1563,42.0557],[80.2441,42.2754],[80.1563,42.627],[80.2441,42.8467],[80.5078,42.8906],[80.4199,43.0664],[80.7715,43.1982],[80.4199,44.165],[80.4199,44.6045],[79.9805,44.8242],[79.9805,44.9561],[81.7383,45.3955],[82.0898,45.2197],[82.5293,45.2197],[82.2656,45.6592],[83.0566,47.2412],[83.6719,47.0215],[84.7266,47.0215],[84.9023,46.8896],[85.5176,47.0654],[85.6934,47.2852],[85.5176,48.1201],[85.7813,48.4277],[86.5723,48.5596],[86.8359,48.8232],[86.748,48.9551],[86.8359,49.1309],[87.8027,49.1748],[87.8906,48.999],[87.7148,48.9111],[88.0664,48.7354],[87.9785,48.6035],[88.5059,48.3838],[88.6816,48.1641],[89.1211,47.9883],[89.5605,48.0322],[89.7363,47.8564],[90.0879,47.8564],[90.3516,47.6807],[90.5273,47.2412],[90.8789,46.9775],[91.0547,46.582],[90.8789,46.3184],[91.0547,46.0107],[90.7031,45.7471],[90.7031,45.5273],[90.8789,45.2197],[91.582,45.0879],[93.5156,44.9561],[94.7461,44.3408],[95.3613,44.2969],[95.3613,44.0332],[95.5371,43.9014],[95.8887,43.2422],[96.3281,42.9346],[96.416,42.7588]]]}},{type:"Feature",id:"54",properties:{name:"西藏",cp:[88.7695,31.6846],childNum:7},geometry:{type:"Polygon",coordinates:[[[79.0137,34.3213],[79.1016,34.4531],[79.8047,34.4971],[79.8926,34.8047],[80.2441,35.2002],[80.332,35.1563],[80.2441,35.2881],[80.4199,35.4199],[81.6504,35.2441],[82.002,35.332],[82.4414,35.7275],[82.8809,35.6836],[83.1445,35.4199],[84.1992,35.376],[85.0781,35.7275],[85.6055,35.6836],[86.1328,35.8594],[86.2207,36.167],[87.3633,36.4307],[88.5938,36.4746],[88.7695,36.3428],[89.209,36.2988],[89.7363,36.0791],[89.3848,36.0352],[89.4727,35.9033],[89.7363,35.7715],[89.7363,35.4199],[89.4727,35.376],[89.4727,35.2441],[89.5605,34.8926],[89.8242,34.8486],[89.7363,34.6729],[89.8242,34.3652],[89.6484,34.0137],[90.0879,33.4863],[90.7031,33.1348],[91.4063,33.1348],[91.9336,32.8271],[92.1973,32.8271],[92.2852,32.7393],[92.9883,32.7393],[93.5156,32.4756],[93.7793,32.5635],[94.1309,32.4316],[94.6582,32.6074],[95.1855,32.4316],[95.0098,32.2998],[95.1855,32.3438],[95.2734,32.2119],[95.3613,32.168],[95.3613,31.9922],[95.4492,31.8164],[95.8008,31.6846],[95.9766,31.8164],[96.1523,31.5967],[96.2402,31.9482],[96.5039,31.7285],[96.8555,31.6846],[96.7676,31.9922],[97.2949,32.0801],[97.3828,32.5635],[97.7344,32.5195],[98.1738,32.3438],[98.4375,31.8604],[98.877,31.4209],[98.6133,31.2012],[98.9648,30.7617],[99.1406,29.2676],[98.9648,29.1357],[98.9648,28.8281],[98.7891,28.8721],[98.7891,29.0039],[98.7012,28.916],[98.6133,28.5205],[98.7891,28.3447],[98.7012,28.2129],[98.3496,28.125],[98.2617,28.3887],[98.1738,28.125],[97.5586,28.5205],[97.2949,28.0811],[97.3828,27.9053],[97.0313,27.7295],[96.5039,28.125],[95.7129,28.2568],[95.3613,28.125],[95.2734,27.9492],[94.2188,27.5537],[93.8672,27.0264],[93.6035,26.9385],[92.1094,26.8506],[92.0215,27.4658],[91.582,27.5537],[91.582,27.9053],[91.4063,28.0371],[91.0547,27.8613],[90.7031,28.0811],[89.8242,28.2129],[89.6484,28.1689],[89.1211,27.5977],[89.1211,27.334],[89.0332,27.2021],[88.7695,27.4219],[88.8574,27.9932],[88.6816,28.125],[88.1543,27.9053],[87.8906,27.9492],[87.7148,27.8174],[87.0996,27.8174],[86.748,28.125],[86.5723,28.125],[86.4844,27.9053],[86.1328,28.125],[86.0449,27.9053],[85.6934,28.3447],[85.6055,28.2568],[85.166,28.3447],[85.166,28.6523],[84.9023,28.5645],[84.4629,28.7402],[84.2871,28.8721],[84.1992,29.2236],[84.1113,29.2676],[83.584,29.1797],[83.2324,29.5752],[82.1777,30.0586],[82.0898,30.3223],[81.3867,30.3662],[81.2109,30.0146],[81.0352,30.2344],[80.0684,30.5859],[79.7168,30.9375],[79.0137,31.0693],[78.75,31.333],[78.8379,31.5967],[78.6621,31.8164],[78.75,31.9043],[78.4863,32.124],[78.3984,32.5195],[78.75,32.6953],[78.9258,32.3438],[79.2773,32.5635],[79.1016,33.1787],[78.6621,33.6621],[78.6621,34.1016],[78.9258,34.1455],[79.0137,34.3213]]]}},{type:"Feature",id:"15",properties:{name:"内蒙古",cp:[117.5977,44.3408],childNum:12},geometry:{type:"Polygon",coordinates:[[[97.207,42.8027],[99.4922,42.583],[100.8105,42.6709],[101.7773,42.4951],[102.041,42.2314],[102.7441,42.1436],[103.3594,41.8799],[103.8867,41.792],[104.502,41.8799],[104.502,41.6602],[105.0293,41.5723],[105.7324,41.9238],[107.4023,42.4512],[109.4238,42.4512],[110.3906,42.7588],[111.0059,43.3301],[111.9727,43.6816],[111.9727,43.8135],[111.4453,44.3848],[111.7969,45],[111.9727,45.0879],[113.6426,44.7363],[114.1699,44.9561],[114.5215,45.3955],[115.6641,45.4395],[116.1914,45.7031],[116.2793,45.9668],[116.543,46.2744],[117.334,46.3623],[117.4219,46.582],[117.7734,46.5381],[118.3008,46.7578],[118.7402,46.7139],[118.916,46.7578],[119.0918,46.6699],[119.707,46.626],[119.9707,46.7139],[119.707,47.1973],[118.4766,47.9883],[117.8613,48.0322],[117.334,47.6807],[116.8066,47.9004],[116.1914,47.8564],[115.9277,47.6807],[115.5762,47.9004],[115.4883,48.1641],[115.8398,48.252],[115.8398,48.5596],[116.7188,49.834],[117.7734,49.5264],[118.5645,49.9219],[119.2676,50.0977],[119.3555,50.3174],[119.1797,50.3613],[119.5313,50.7568],[119.5313,50.8887],[119.707,51.0645],[120.1465,51.6797],[120.6738,51.9434],[120.7617,52.1191],[120.7617,52.251],[120.5859,52.3389],[120.6738,52.5146],[120.4102,52.6465],[120.0586,52.6025],[120.0586,52.7344],[120.8496,53.2617],[121.4648,53.3496],[121.8164,53.042],[121.2012,52.5586],[121.6406,52.4268],[121.7285,52.2949],[121.9922,52.2949],[122.168,52.5146],[122.6953,52.251],[122.6074,52.0752],[122.959,51.3281],[123.3105,51.2402],[123.6621,51.3721],[124.3652,51.2842],[124.541,51.3721],[124.8926,51.3721],[125.0684,51.6357],[125.332,51.6357],[126.0352,51.0205],[125.7715,50.7568],[125.7715,50.5371],[125.332,50.1416],[125.1563,49.834],[125.2441,49.1748],[124.8047,49.1309],[124.4531,48.1201],[124.2773,48.5156],[122.4316,47.373],[123.0469,46.7139],[123.3984,46.8896],[123.3984,46.9775],[123.4863,46.9775],[123.5742,46.8457],[123.5742,46.8896],[123.5742,46.6699],[123.0469,46.582],[123.2227,46.2305],[122.7832,46.0107],[122.6953,45.7031],[122.4316,45.8789],[122.2559,45.791],[121.8164,46.0107],[121.7285,45.7471],[121.9043,45.7031],[122.2559,45.2637],[122.0801,44.8682],[122.3438,44.2529],[123.1348,44.4727],[123.4863,43.7256],[123.3105,43.5059],[123.6621,43.374],[123.5742,43.0225],[123.3105,42.9785],[123.1348,42.8027],[122.7832,42.7148],[122.3438,42.8467],[122.3438,42.6709],[121.9922,42.7148],[121.7285,42.4512],[121.4648,42.4951],[120.498,42.0996],[120.1465,41.7041],[119.8828,42.1875],[119.5313,42.3633],[119.3555,42.2754],[119.2676,41.7041],[119.4434,41.6162],[119.2676,41.3086],[118.3887,41.3086],[118.125,41.748],[118.3008,41.792],[118.3008,42.0996],[118.125,42.0557],[117.9492,42.2314],[118.0371,42.4072],[117.7734,42.627],[117.5098,42.583],[117.334,42.4512],[116.8945,42.4072],[116.8066,42.0117],[116.2793,42.0117],[116.0156,41.792],[115.9277,41.9238],[115.2246,41.5723],[114.9609,41.6162],[114.873,42.0996],[114.5215,42.1436],[114.1699,41.792],[114.2578,41.5723],[113.9063,41.4404],[113.9941,41.2207],[113.9063,41.1328],[114.082,40.7373],[114.082,40.5176],[113.8184,40.5176],[113.5547,40.3418],[113.2031,40.3857],[112.7637,40.166],[112.3242,40.2539],[111.9727,39.5947],[111.4453,39.6387],[111.3574,39.4189],[111.0938,39.375],[111.0938,39.5947],[110.6543,39.2871],[110.127,39.4629],[110.2148,39.2871],[109.8633,39.2432],[109.9512,39.1553],[108.9844,38.3203],[109.0723,38.0127],[108.8965,37.9688],[108.8086,38.0127],[108.7207,37.7051],[108.1934,37.6172],[107.666,37.8809],[107.3145,38.1006],[106.7871,38.1885],[106.5234,38.3203],[106.9629,38.9795],[106.7871,39.375],[106.3477,39.2871],[105.9082,38.7158],[105.8203,37.793],[104.3262,37.4414],[103.4473,37.8369],[103.3594,38.0127],[103.5352,38.1445],[103.4473,38.3643],[104.2383,38.9795],[104.0625,39.4189],[103.3594,39.3311],[103.0078,39.1113],[102.4805,39.2432],[101.8652,39.1113],[102.041,38.8916],[101.7773,38.6719],[101.3379,38.7598],[101.25,39.0234],[100.9863,38.9355],[100.8105,39.4189],[100.5469,39.4189],[100.0195,39.7705],[99.4922,39.8584],[100.1074,40.2539],[100.1953,40.6494],[99.9316,41.001],[99.2285,40.8691],[99.0527,40.6934],[98.9648,40.7813],[98.7891,40.6055],[98.5254,40.7373],[98.6133,40.6494],[98.3496,40.5615],[98.3496,40.9131],[97.4707,41.4844],[97.8223,41.6162],[97.8223,41.748],[97.207,42.8027]]]}},{type:"Feature",id:"63",properties:{name:"青海",cp:[96.2402,35.4199],childNum:8},geometry:{type:"Polygon",coordinates:[[[89.7363,36.0791],[89.9121,36.0791],[90,36.2549],[90.8789,36.0352],[91.0547,36.0791],[91.0547,36.5186],[90.791,36.6064],[90.7031,36.7822],[91.3184,37.0898],[91.0547,37.4414],[90.5273,37.8369],[90.6152,38.3203],[90.3516,38.2324],[90.1758,38.4961],[92.373,39.0234],[92.373,39.1113],[93.1641,39.1992],[93.1641,38.9795],[93.6914,38.9355],[93.8672,38.7158],[94.3066,38.7598],[94.5703,38.3643],[95.0098,38.4082],[95.4492,38.2764],[95.7129,38.3643],[96.2402,38.1006],[96.416,38.2324],[96.6797,38.1885],[96.6797,38.4521],[97.1191,38.584],[97.0313,39.1992],[98.1738,38.8037],[98.3496,39.0234],[98.6133,38.9355],[98.7891,39.0674],[99.1406,38.9355],[99.8438,38.3643],[100.1953,38.2764],[100.0195,38.4521],[100.1074,38.4961],[100.459,38.2764],[100.7227,38.2324],[101.1621,37.8369],[101.5137,37.8809],[101.7773,37.6172],[101.9531,37.7051],[102.1289,37.4414],[102.5684,37.1777],[102.4805,36.958],[102.6563,36.8262],[102.5684,36.7383],[102.832,36.3428],[103.0078,36.2549],[102.9199,36.0791],[102.9199,35.9033],[102.6563,35.7715],[102.832,35.5957],[102.4805,35.5957],[102.3047,35.4199],[102.3926,35.2002],[101.9531,34.8486],[101.9531,34.6289],[102.2168,34.4092],[102.1289,34.2773],[101.6895,34.1016],[100.9863,34.3652],[100.8105,34.2773],[101.25,33.6621],[101.5137,33.7061],[101.6016,33.5303],[101.7773,33.5303],[101.6895,33.3105],[101.7773,33.2227],[101.6016,33.1348],[101.1621,33.2227],[101.25,32.6953],[100.7227,32.6514],[100.7227,32.5195],[100.3711,32.7393],[100.1074,32.6514],[100.1074,32.8711],[99.8438,33.0029],[99.7559,32.7393],[99.2285,32.915],[99.2285,33.0469],[98.877,33.1787],[98.4375,34.0576],[97.8223,34.1895],[97.6465,34.1016],[97.7344,33.9258],[97.3828,33.8818],[97.4707,33.5742],[97.7344,33.3984],[97.3828,32.8711],[97.4707,32.6953],[97.7344,32.5195],[97.3828,32.5635],[97.2949,32.0801],[96.7676,31.9922],[96.8555,31.6846],[96.5039,31.7285],[96.2402,31.9482],[96.1523,31.5967],[95.9766,31.8164],[95.8008,31.6846],[95.4492,31.8164],[95.3613,31.9922],[95.3613,32.168],[95.2734,32.2119],[95.1855,32.3438],[95.0098,32.2998],[95.1855,32.4316],[94.6582,32.6074],[94.1309,32.4316],[93.7793,32.5635],[93.5156,32.4756],[92.9883,32.7393],[92.2852,32.7393],[92.1973,32.8271],[91.9336,32.8271],[91.4063,33.1348],[90.7031,33.1348],[90.0879,33.4863],[89.6484,34.0137],[89.8242,34.3652],[89.7363,34.6729],[89.8242,34.8486],[89.5605,34.8926],[89.4727,35.2441],[89.4727,35.376],[89.7363,35.4199],[89.7363,35.7715],[89.4727,35.9033],[89.3848,36.0352],[89.7363,36.0791]]]}},{type:"Feature",id:"51",properties:{name:"四川",cp:[102.9199,30.1904],childNum:21},geometry:{type:"Polygon",coordinates:[[[101.7773,33.5303],[101.8652,33.5742],[101.9531,33.4424],[101.8652,33.0908],[102.4805,33.4424],[102.2168,33.9258],[102.9199,34.3213],[103.0957,34.1895],[103.1836,33.7939],[104.1504,33.6182],[104.2383,33.3984],[104.4141,33.3105],[104.3262,33.2227],[104.4141,33.0469],[104.3262,32.8711],[104.4141,32.7393],[105.2051,32.6074],[105.3809,32.7393],[105.3809,32.8711],[105.4688,32.915],[105.5566,32.7393],[106.084,32.8711],[106.084,32.7393],[106.3477,32.6514],[107.0508,32.6953],[107.1387,32.4756],[107.2266,32.4316],[107.4023,32.5195],[108.0176,32.168],[108.2813,32.2559],[108.5449,32.2119],[108.3691,32.168],[108.2813,31.9043],[108.5449,31.6846],[108.1934,31.5088],[107.9297,30.8496],[107.4902,30.8496],[107.4023,30.7617],[107.4902,30.6299],[107.0508,30.0146],[106.7871,30.0146],[106.6113,30.3223],[106.2598,30.1904],[105.8203,30.4541],[105.6445,30.2783],[105.5566,30.1025],[105.7324,29.8828],[105.293,29.5313],[105.4688,29.3115],[105.7324,29.2676],[105.8203,28.96],[106.2598,28.8721],[106.3477,28.5205],[105.9961,28.7402],[105.6445,28.4326],[105.9082,28.125],[106.1719,28.125],[106.3477,27.8174],[105.6445,27.6416],[105.5566,27.7734],[105.293,27.7295],[105.2051,27.9932],[105.0293,28.0811],[104.8535,27.9053],[104.4141,27.9492],[104.3262,28.0371],[104.4141,28.125],[104.4141,28.2568],[104.2383,28.4326],[104.4141,28.6084],[103.8867,28.6523],[103.7988,28.3008],[103.4473,28.125],[103.4473,27.7734],[102.9199,27.29],[103.0078,26.3672],[102.6563,26.1914],[102.5684,26.3672],[102.1289,26.1035],[101.8652,26.0596],[101.6016,26.2354],[101.6895,26.3672],[101.4258,26.5869],[101.4258,26.8066],[101.4258,26.7188],[101.1621,27.0264],[101.1621,27.1582],[100.7227,27.8613],[100.3711,27.8174],[100.2832,27.7295],[100.0195,28.125],[100.1953,28.3447],[99.668,28.8281],[99.4043,28.5205],[99.4043,28.1689],[99.2285,28.3008],[99.1406,29.2676],[98.9648,30.7617],[98.6133,31.2012],[98.877,31.4209],[98.4375,31.8604],[98.1738,32.3438],[97.7344,32.5195],[97.4707,32.6953],[97.3828,32.8711],[97.7344,33.3984],[97.4707,33.5742],[97.3828,33.8818],[97.7344,33.9258],[97.6465,34.1016],[97.8223,34.1895],[98.4375,34.0576],[98.877,33.1787],[99.2285,33.0469],[99.2285,32.915],[99.7559,32.7393],[99.8438,33.0029],[100.1074,32.8711],[100.1074,32.6514],[100.3711,32.7393],[100.7227,32.5195],[100.7227,32.6514],[101.25,32.6953],[101.1621,33.2227],[101.6016,33.1348],[101.7773,33.2227],[101.6895,33.3105],[101.7773,33.5303]]]}},{type:"Feature",id:"23",properties:{name:"黑龙江",cp:[128.1445,48.5156],childNum:13},geometry:{type:"Polygon",coordinates:[[[121.4648,53.3496],[123.6621,53.5693],[124.8926,53.0859],[125.0684,53.2178],[125.5957,53.0859],[125.6836,52.9102],[126.123,52.7783],[126.0352,52.6025],[126.2109,52.5146],[126.3867,52.2949],[126.3867,52.207],[126.5625,52.1631],[126.4746,51.9434],[126.9141,51.3721],[126.8262,51.2842],[127.002,51.3281],[126.9141,51.1084],[127.2656,50.7568],[127.3535,50.2734],[127.6172,50.2295],[127.5293,49.8779],[127.793,49.6143],[128.7598,49.5703],[129.1113,49.3506],[129.4629,49.4385],[130.2539,48.8672],[130.6934,48.8672],[130.5176,48.6475],[130.8691,48.2959],[130.6934,48.1201],[131.0449,47.6807],[132.5391,47.7246],[132.627,47.9443],[133.0664,48.1201],[133.5059,48.1201],[134.209,48.3838],[135.0879,48.4277],[134.7363,48.252],[134.5605,47.9883],[134.7363,47.6807],[134.5605,47.4609],[134.3848,47.4609],[134.209,47.2852],[134.209,47.1533],[133.8574,46.5381],[133.9453,46.2744],[133.5059,45.835],[133.418,45.5713],[133.2422,45.5273],[133.0664,45.1318],[132.8906,45.0439],[131.9238,45.3516],[131.5723,45.0439],[131.0449,44.8682],[131.3086,44.0771],[131.2207,43.7256],[131.3086,43.4619],[130.8691,43.418],[130.5176,43.6377],[130.3418,43.9893],[129.9902,43.8574],[129.9023,44.0332],[129.8145,43.9014],[129.2871,43.8135],[129.1992,43.5938],[128.8477,43.5498],[128.4961,44.165],[128.4082,44.4727],[128.0566,44.3408],[128.0566,44.1211],[127.7051,44.1211],[127.5293,44.6045],[127.0898,44.6045],[127.002,44.7803],[127.0898,45],[126.9141,45.1318],[126.5625,45.2637],[126.0352,45.1758],[125.7715,45.3076],[125.6836,45.5273],[125.0684,45.3955],[124.8926,45.5273],[124.3652,45.4395],[124.0137,45.7471],[123.9258,46.2305],[123.2227,46.2305],[123.0469,46.582],[123.5742,46.6699],[123.5742,46.8896],[123.5742,46.8457],[123.4863,46.9775],[123.3984,46.9775],[123.3984,46.8896],[123.0469,46.7139],[122.4316,47.373],[124.2773,48.5156],[124.4531,48.1201],[124.8047,49.1309],[125.2441,49.1748],[125.1563,49.834],[125.332,50.1416],[125.7715,50.5371],[125.7715,50.7568],[126.0352,51.0205],[125.332,51.6357],[125.0684,51.6357],[124.8926,51.3721],[124.541,51.3721],[124.3652,51.2842],[123.6621,51.3721],[123.3105,51.2402],[122.959,51.3281],[122.6074,52.0752],[122.6953,52.251],[122.168,52.5146],[121.9922,52.2949],[121.7285,52.2949],[121.6406,52.4268],[121.2012,52.5586],[121.8164,53.042],[121.4648,53.3496]]]}},{type:"Feature",id:"62",properties:{name:"甘肃",cp:[95.7129,40.166],childNum:14},geometry:{type:"Polygon",coordinates:[[[96.416,42.7148],[97.207,42.8027],[97.8223,41.748],[97.8223,41.6162],[97.4707,41.4844],[98.3496,40.9131],[98.3496,40.5615],[98.6133,40.6494],[98.5254,40.7373],[98.7891,40.6055],[98.9648,40.7813],[99.0527,40.6934],[99.2285,40.8691],[99.9316,41.001],[100.1953,40.6494],[100.1074,40.2539],[99.4922,39.8584],[100.0195,39.7705],[100.5469,39.4189],[100.8105,39.4189],[100.9863,38.9355],[101.25,39.0234],[101.3379,38.7598],[101.7773,38.6719],[102.041,38.8916],[101.8652,39.1113],[102.4805,39.2432],[103.0078,39.1113],[103.3594,39.3311],[104.0625,39.4189],[104.2383,38.9795],[103.4473,38.3643],[103.5352,38.1445],[103.3594,38.0127],[103.4473,37.8369],[104.3262,37.4414],[104.5898,37.4414],[104.5898,37.2217],[104.8535,37.2217],[105.293,36.8262],[105.2051,36.6943],[105.4688,36.123],[105.293,35.9912],[105.3809,35.7715],[105.7324,35.7275],[105.8203,35.5518],[105.9961,35.4639],[105.9082,35.4199],[105.9961,35.4199],[106.084,35.376],[106.2598,35.4199],[106.3477,35.2441],[106.5234,35.332],[106.4355,35.6836],[106.6992,35.6836],[106.9629,35.8154],[106.875,36.123],[106.5234,36.2549],[106.5234,36.4746],[106.4355,36.5625],[106.6113,36.7822],[106.6113,37.0898],[107.3145,37.0898],[107.3145,36.9141],[108.7207,36.3428],[108.6328,35.9912],[108.5449,35.8594],[108.6328,35.5518],[108.5449,35.2881],[107.7539,35.2881],[107.7539,35.1123],[107.8418,35.0244],[107.666,34.9365],[107.2266,34.8926],[106.9629,35.0684],[106.6113,35.0684],[106.5234,34.7607],[106.3477,34.585],[106.6992,34.3213],[106.5234,34.2773],[106.6113,34.1455],[106.4355,33.9258],[106.5234,33.5303],[105.9961,33.6182],[105.7324,33.3984],[105.9961,33.1787],[105.9082,33.0029],[105.4688,32.915],[105.3809,32.8711],[105.3809,32.7393],[105.2051,32.6074],[104.4141,32.7393],[104.3262,32.8711],[104.4141,33.0469],[104.3262,33.2227],[104.4141,33.3105],[104.2383,33.3984],[104.1504,33.6182],[103.1836,33.7939],[103.0957,34.1895],[102.9199,34.3213],[102.2168,33.9258],[102.4805,33.4424],[101.8652,33.0908],[101.9531,33.4424],[101.8652,33.5742],[101.7773,33.5303],[101.6016,33.5303],[101.5137,33.7061],[101.25,33.6621],[100.8105,34.2773],[100.9863,34.3652],[101.6895,34.1016],[102.1289,34.2773],[102.2168,34.4092],[101.9531,34.6289],[101.9531,34.8486],[102.3926,35.2002],[102.3047,35.4199],[102.4805,35.5957],[102.832,35.5957],[102.6563,35.7715],[102.9199,35.9033],[102.9199,36.0791],[103.0078,36.2549],[102.832,36.3428],[102.5684,36.7383],[102.6563,36.8262],[102.4805,36.958],[102.5684,37.1777],[102.1289,37.4414],[101.9531,37.7051],[101.7773,37.6172],[101.5137,37.8809],[101.1621,37.8369],[100.7227,38.2324],[100.459,38.2764],[100.1074,38.4961],[100.0195,38.4521],[100.1953,38.2764],[99.8438,38.3643],[99.1406,38.9355],[98.7891,39.0674],[98.6133,38.9355],[98.3496,39.0234],[98.1738,38.8037],[97.0313,39.1992],[97.1191,38.584],[96.6797,38.4521],[96.6797,38.1885],[96.416,38.2324],[96.2402,38.1006],[95.7129,38.3643],[95.4492,38.2764],[95.0098,38.4082],[94.5703,38.3643],[94.3066,38.7598],[93.8672,38.7158],[93.6914,38.9355],[93.1641,38.9795],[93.1641,39.1992],[92.373,39.1113],[92.373,39.3311],[92.6367,39.6387],[93.0762,40.6494],[93.8672,40.6934],[94.043,41.0889],[94.5703,41.4844],[95.1855,41.792],[95.2734,41.6162],[95.9766,41.9238],[96.2402,42.2314],[96.0645,42.3193],[95.9766,42.4951],[96.416,42.7148]]]}},{type:"Feature",id:"53",properties:{name:"云南",cp:[101.8652,25.1807],childNum:16},geometry:{type:"Polygon",coordinates:[[[98.1738,28.125],[98.2617,28.3887],[98.3496,28.125],[98.7012,28.2129],[98.7891,28.3447],[98.6133,28.5205],[98.7012,28.916],[98.7891,29.0039],[98.7891,28.8721],[98.9648,28.8281],[98.9648,29.1357],[99.1406,29.2676],[99.2285,28.3008],[99.4043,28.1689],[99.4043,28.5205],[99.668,28.8281],[100.1953,28.3447],[100.0195,28.125],[100.2832,27.7295],[100.3711,27.8174],[100.7227,27.8613],[101.1621,27.1582],[101.1621,27.0264],[101.4258,26.7188],[101.4258,26.8066],[101.4258,26.5869],[101.6895,26.3672],[101.6016,26.2354],[101.8652,26.0596],[102.1289,26.1035],[102.5684,26.3672],[102.6563,26.1914],[103.0078,26.3672],[102.9199,27.29],[103.4473,27.7734],[103.4473,28.125],[103.7988,28.3008],[103.8867,28.6523],[104.4141,28.6084],[104.2383,28.4326],[104.4141,28.2568],[104.4141,28.125],[104.3262,28.0371],[104.4141,27.9492],[104.8535,27.9053],[105.0293,28.0811],[105.2051,27.9932],[105.293,27.7295],[105.2051,27.3779],[104.5898,27.334],[104.4141,27.4658],[104.1504,27.2461],[103.8867,27.4219],[103.623,27.0264],[103.7109,26.9824],[103.7109,26.7627],[103.8867,26.543],[104.4141,26.6748],[104.6777,26.4111],[104.3262,25.708],[104.8535,25.2246],[104.5898,25.0488],[104.6777,24.9609],[104.502,24.7412],[104.6777,24.3457],[104.7656,24.4775],[105.0293,24.4336],[105.2051,24.082],[105.4688,24.0381],[105.5566,24.126],[105.9961,24.126],[106.1719,23.8184],[106.1719,23.5547],[105.6445,23.4229],[105.5566,23.2031],[105.293,23.3789],[104.8535,23.1592],[104.7656,22.8516],[104.3262,22.6758],[104.1504,22.8076],[103.9746,22.5439],[103.623,22.7637],[103.5352,22.5879],[103.3594,22.8076],[103.0957,22.4561],[102.4805,22.7637],[102.3047,22.4121],[101.8652,22.3682],[101.7773,22.5],[101.6016,22.1924],[101.8652,21.6211],[101.7773,21.1377],[101.6016,21.2256],[101.25,21.1816],[101.1621,21.7529],[100.6348,21.4453],[100.1074,21.4893],[99.9316,22.0605],[99.2285,22.1484],[99.4043,22.5879],[99.3164,22.7197],[99.4922,23.0713],[98.877,23.2031],[98.7012,23.9502],[98.877,24.126],[98.1738,24.082],[97.7344,23.8623],[97.5586,23.9063],[97.7344,24.126],[97.6465,24.4336],[97.5586,24.4336],[97.5586,24.7412],[97.7344,24.8291],[97.8223,25.2686],[98.1738,25.4004],[98.1738,25.6201],[98.3496,25.5762],[98.5254,25.8398],[98.7012,25.8838],[98.6133,26.0596],[98.7012,26.1475],[98.7891,26.5869],[98.7012,27.5098],[98.5254,27.6416],[98.3496,27.5098],[98.1738,28.125]]]}},{type:"Feature",id:"45",properties:{name:"广西",cp:[108.2813,23.6426],childNum:14},geometry:{type:"Polygon",coordinates:[[[104.502,24.7412],[104.6777,24.6094],[105.2051,24.9609],[105.9961,24.6533],[106.1719,24.7852],[106.1719,24.9609],[106.875,25.1807],[107.0508,25.2686],[106.9629,25.4883],[107.2266,25.6201],[107.4902,25.2246],[107.7539,25.2246],[107.8418,25.1367],[108.1055,25.2246],[108.1934,25.4443],[108.3691,25.5322],[108.6328,25.3125],[108.6328,25.5762],[109.0723,25.5322],[108.9844,25.752],[109.3359,25.708],[109.5117,26.0156],[109.7754,25.8838],[109.9512,26.1914],[110.2148,25.9717],[110.5664,26.3232],[111.1816,26.3232],[111.2695,26.2354],[111.2695,25.8838],[111.4453,25.8398],[111.0059,25.0049],[111.0938,24.9609],[111.3574,25.1367],[111.5332,24.6533],[111.709,24.7852],[112.0605,24.7412],[111.8848,24.6533],[112.0605,24.3457],[111.8848,24.2139],[111.8848,23.9941],[111.7969,23.8184],[111.6211,23.8184],[111.6211,23.6865],[111.3574,23.4668],[111.4453,23.0273],[111.2695,22.8076],[110.7422,22.5439],[110.7422,22.2803],[110.6543,22.1484],[110.3027,22.1484],[110.3027,21.8848],[109.9512,21.8408],[109.8633,21.665],[109.7754,21.6211],[109.7754,21.4014],[109.5996,21.4453],[109.1602,21.3574],[109.248,20.874],[109.0723,20.9619],[109.0723,21.5332],[108.7207,21.5332],[108.6328,21.665],[108.2813,21.4893],[107.8418,21.6211],[107.4023,21.6211],[107.0508,21.7969],[107.0508,21.9287],[106.6992,22.0166],[106.6113,22.4121],[106.7871,22.7637],[106.6992,22.8955],[105.9082,22.9395],[105.5566,23.0713],[105.5566,23.2031],[105.6445,23.4229],[106.1719,23.5547],[106.1719,23.8184],[105.9961,24.126],[105.5566,24.126],[105.4688,24.0381],[105.2051,24.082],[105.0293,24.4336],[104.7656,24.4775],[104.6777,24.3457],[104.502,24.7412]]]}},{type:"Feature",id:"43",properties:{name:"湖南",cp:[111.5332,27.3779],childNum:14},geometry:{type:"Polygon",coordinates:[[[109.248,28.4766],[109.248,29.1357],[109.5117,29.6191],[109.6875,29.6191],[109.7754,29.751],[110.4785,29.6631],[110.6543,29.751],[110.4785,30.0146],[110.8301,30.1465],[111.7969,29.9268],[112.2363,29.5313],[112.5,29.6191],[112.6758,29.5752],[112.9395,29.7949],[113.0273,29.751],[112.9395,29.4873],[113.0273,29.4434],[113.5547,29.8389],[113.5547,29.707],[113.7305,29.5752],[113.6426,29.3115],[113.7305,29.0918],[113.9063,29.0479],[114.1699,28.8281],[114.082,28.5645],[114.2578,28.3447],[113.7305,27.9492],[113.6426,27.5977],[113.6426,27.3779],[113.8184,27.29],[113.7305,27.1143],[113.9063,26.9385],[113.9063,26.6309],[114.082,26.5869],[113.9941,26.1914],[114.2578,26.1475],[113.9941,26.0596],[113.9063,25.4443],[113.6426,25.3125],[113.2031,25.5322],[112.8516,25.3564],[113.0273,25.2246],[113.0273,24.9609],[112.8516,24.917],[112.5879,25.1367],[112.2363,25.1807],[112.1484,24.873],[112.0605,24.7412],[111.709,24.7852],[111.5332,24.6533],[111.3574,25.1367],[111.0938,24.9609],[111.0059,25.0049],[111.4453,25.8398],[111.2695,25.8838],[111.2695,26.2354],[111.1816,26.3232],[110.5664,26.3232],[110.2148,25.9717],[109.9512,26.1914],[109.7754,25.8838],[109.5117,26.0156],[109.4238,26.2793],[109.248,26.3232],[109.4238,26.5869],[109.3359,26.7188],[109.5117,26.8066],[109.5117,27.0264],[109.3359,27.1582],[108.8965,27.0264],[108.8086,27.1143],[109.4238,27.5977],[109.3359,27.9053],[109.3359,28.2568],[109.248,28.4766]]]}},{type:"Feature",id:"61",properties:{name:"陕西",cp:[109.5996,35.6396],childNum:10},geometry:{type:"Polygon",coordinates:[[[105.4688,32.915],[105.9082,33.0029],[105.9961,33.1787],[105.7324,33.3984],[105.9961,33.6182],[106.5234,33.5303],[106.4355,33.9258],[106.6113,34.1455],[106.5234,34.2773],[106.6992,34.3213],[106.3477,34.585],[106.5234,34.7607],[106.6113,35.0684],[106.9629,35.0684],[107.2266,34.8926],[107.666,34.9365],[107.8418,35.0244],[107.7539,35.1123],[107.7539,35.2881],[108.5449,35.2881],[108.6328,35.5518],[108.5449,35.8594],[108.6328,35.9912],[108.7207,36.3428],[107.3145,36.9141],[107.3145,37.0898],[107.3145,37.6172],[107.666,37.8809],[108.1934,37.6172],[108.7207,37.7051],[108.8086,38.0127],[108.8965,37.9688],[109.0723,38.0127],[108.9844,38.3203],[109.9512,39.1553],[109.8633,39.2432],[110.2148,39.2871],[110.127,39.4629],[110.6543,39.2871],[111.0938,39.5947],[111.0938,39.375],[111.1816,39.2432],[110.918,38.7158],[110.8301,38.4961],[110.4785,38.1885],[110.4785,37.9688],[110.8301,37.6611],[110.3906,37.002],[110.4785,36.123],[110.5664,35.6396],[110.2148,34.8926],[110.2148,34.6729],[110.3906,34.585],[110.4785,34.2334],[110.6543,34.1455],[110.6543,33.8379],[111.0059,33.5303],[111.0059,33.2666],[110.7422,33.1348],[110.5664,33.2666],[110.3027,33.1787],[109.5996,33.2666],[109.4238,33.1348],[109.7754,33.0469],[109.7754,32.915],[110.127,32.7393],[110.127,32.6074],[109.6875,32.6074],[109.5117,32.4316],[109.5996,31.7285],[109.248,31.7285],[109.0723,31.9482],[108.5449,32.2119],[108.2813,32.2559],[108.0176,32.168],[107.4023,32.5195],[107.2266,32.4316],[107.1387,32.4756],[107.0508,32.6953],[106.3477,32.6514],[106.084,32.7393],[106.084,32.8711],[105.5566,32.7393],[105.4688,32.915]]]}},{type:"Feature",id:"44",properties:{name:"广东",cp:[113.4668,22.8076],childNum:21},geometry:{type:"Polygon",coordinates:[[[109.7754,21.4014],[109.7754,21.6211],[109.8633,21.665],[109.9512,21.8408],[110.3027,21.8848],[110.3027,22.1484],[110.6543,22.1484],[110.7422,22.2803],[110.7422,22.5439],[111.2695,22.8076],[111.4453,23.0273],[111.3574,23.4668],[111.6211,23.6865],[111.6211,23.8184],[111.7969,23.8184],[111.8848,23.9941],[111.8848,24.2139],[112.0605,24.3457],[111.8848,24.6533],[112.0605,24.7412],[112.1484,24.873],[112.2363,25.1807],[112.5879,25.1367],[112.8516,24.917],[113.0273,24.9609],[113.0273,25.2246],[112.8516,25.3564],[113.2031,25.5322],[113.6426,25.3125],[113.9063,25.4443],[113.9941,25.2686],[114.6094,25.4004],[114.7852,25.2686],[114.6973,25.1367],[114.4336,24.9609],[114.1699,24.6973],[114.4336,24.5215],[115.4004,24.7852],[115.8398,24.5654],[115.752,24.7852],[115.9277,24.917],[116.2793,24.7852],[116.3672,24.873],[116.543,24.6094],[116.7188,24.6533],[116.9824,24.1699],[116.9824,23.9063],[117.1582,23.5547],[117.334,23.2471],[116.8945,23.3789],[116.6309,23.1152],[116.543,22.8516],[115.9277,22.7197],[115.6641,22.7637],[115.5762,22.6318],[115.0488,22.6758],[114.6094,22.3682],[114.3457,22.5439],[113.9941,22.5],[113.8184,22.1924],[114.3457,22.1484],[114.4336,22.0166],[114.082,21.9287],[113.9941,21.7969],[113.5547,22.0166],[113.1152,21.8408],[112.9395,21.5771],[112.4121,21.4453],[112.2363,21.5332],[111.5332,21.4893],[111.2695,21.3574],[110.7422,21.3574],[110.6543,21.2256],[110.7422,20.918],[110.4785,20.874],[110.6543,20.2588],[110.5664,20.2588],[110.3906,20.127],[110.0391,20.127],[109.8633,20.127],[109.8633,20.3027],[109.5996,20.918],[109.7754,21.4014],[109.7754,21.4014]],[[113.5986,22.1649],[113.6096,22.1265],[113.5547,22.11],[113.5437,22.2034],[113.5767,22.2034],[113.5986,22.1649]]]}},{type:"Feature",id:"22",properties:{name:"吉林",cp:[126.4746,43.5938],childNum:9},geometry:{type:"Polygon",coordinates:[[[123.2227,46.2305],[123.9258,46.2305],[124.0137,45.7471],[124.3652,45.4395],[124.8926,45.5273],[125.0684,45.3955],[125.6836,45.5273],[125.7715,45.3076],[126.0352,45.1758],[126.5625,45.2637],[126.9141,45.1318],[127.0898,45],[127.002,44.7803],[127.0898,44.6045],[127.5293,44.6045],[127.7051,44.1211],[128.0566,44.1211],[128.0566,44.3408],[128.4082,44.4727],[128.4961,44.165],[128.8477,43.5498],[129.1992,43.5938],[129.2871,43.8135],[129.8145,43.9014],[129.9023,44.0332],[129.9902,43.8574],[130.3418,43.9893],[130.5176,43.6377],[130.8691,43.418],[131.3086,43.4619],[131.3086,43.3301],[131.1328,42.9346],[130.4297,42.7148],[130.6055,42.6709],[130.6055,42.4512],[130.2539,42.7588],[130.2539,42.8906],[130.166,42.9785],[129.9023,43.0225],[129.7266,42.4951],[129.375,42.4512],[128.9355,42.0117],[128.0566,42.0117],[128.3203,41.5723],[128.1445,41.3525],[127.0898,41.5283],[127.1777,41.5723],[126.9141,41.792],[126.6504,41.6602],[126.4746,41.3965],[126.123,40.957],[125.6836,40.8691],[125.5957,40.9131],[125.7715,41.2207],[125.332,41.6602],[125.332,41.9678],[125.4199,42.0996],[125.332,42.1436],[124.8926,42.8027],[124.8926,43.0664],[124.7168,43.0664],[124.4531,42.8467],[124.2773,43.2422],[123.8379,43.4619],[123.6621,43.374],[123.3105,43.5059],[123.4863,43.7256],[123.1348,44.4727],[122.3438,44.2529],[122.0801,44.8682],[122.2559,45.2637],[121.9043,45.7031],[121.7285,45.7471],[121.8164,46.0107],[122.2559,45.791],[122.4316,45.8789],[122.6953,45.7031],[122.7832,46.0107],[123.2227,46.2305]]]}},{type:"Feature",id:"13",properties:{name:"河北",cp:[115.4004,37.9688],childNum:11},geometry:{type:"MultiPolygon",coordinates:[[[[114.5215,39.5068],[114.3457,39.8584],[113.9941,39.9902],[114.5215,40.3418],[114.3457,40.3857],[114.2578,40.6055],[114.082,40.7373],[113.9063,41.1328],[113.9941,41.2207],[113.9063,41.4404],[114.2578,41.5723],[114.1699,41.792],[114.5215,42.1436],[114.873,42.0996],[114.9609,41.6162],[115.2246,41.5723],[115.9277,41.9238],[116.0156,41.792],[116.2793,42.0117],[116.8066,42.0117],[116.8945,42.4072],[117.334,42.4512],[117.5098,42.583],[117.7734,42.627],[118.0371,42.4072],[117.9492,42.2314],[118.125,42.0557],[118.3008,42.0996],[118.3008,41.792],[118.125,41.748],[118.3887,41.3086],[119.2676,41.3086],[118.8281,40.8252],[119.2676,40.5176],[119.5313,40.5615],[119.707,40.1221],[119.8828,39.9463],[119.5313,39.6826],[119.4434,39.4189],[118.916,39.0674],[118.4766,38.9355],[118.125,39.0234],[118.0371,39.1992],[118.0371,39.2432],[117.8613,39.4189],[117.9492,39.5947],[117.6855,39.5947],[117.5098,39.7705],[117.5098,39.9902],[117.6855,39.9902],[117.6855,40.0781],[117.4219,40.21],[117.2461,40.5176],[117.4219,40.6494],[116.9824,40.6934],[116.6309,41.0449],[116.3672,40.9131],[116.4551,40.7813],[116.1914,40.7813],[116.1035,40.6055],[115.752,40.5615],[115.9277,40.2539],[115.4004,39.9463],[115.4883,39.6387],[115.752,39.5068],[116.1914,39.5947],[116.3672,39.4629],[116.543,39.5947],[116.8066,39.5947],[116.8945,39.1113],[116.7188,38.9355],[116.7188,38.8037],[117.2461,38.54],[117.5977,38.6279],[117.9492,38.3203],[117.4219,37.8369],[116.8066,37.8369],[116.4551,37.4854],[116.2793,37.5732],[116.2793,37.3535],[116.0156,37.3535],[115.752,36.9141],[115.3125,36.5186],[115.4883,36.167],[115.3125,36.0791],[115.1367,36.2109],[114.9609,36.0791],[114.873,36.123],[113.7305,36.3428],[113.4668,36.6504],[113.7305,36.8701],[113.7305,37.1338],[114.1699,37.6611],[113.9941,37.7051],[113.8184,38.1445],[113.5547,38.2764],[113.5547,38.54],[113.8184,38.8037],[113.8184,38.9355],[113.9063,39.0234],[114.3457,39.0674],[114.5215,39.5068]]],[[[117.2461,40.0781],[117.1582,39.8145],[117.1582,39.6387],[116.8945,39.6826],[116.8945,39.8145],[116.8066,39.9902],[117.2461,40.0781]]]]}},{type:"Feature",id:"42",properties:{name:"湖北",cp:[112.2363,31.1572],childNum:17},geometry:{type:"Polygon",coordinates:[[[110.2148,31.1572],[110.127,31.377],[109.6875,31.5527],[109.7754,31.6846],[109.5996,31.7285],[109.5117,32.4316],[109.6875,32.6074],[110.127,32.6074],[110.127,32.7393],[109.7754,32.915],[109.7754,33.0469],[109.4238,33.1348],[109.5996,33.2666],[110.3027,33.1787],[110.5664,33.2666],[110.7422,33.1348],[111.0059,33.2666],[111.5332,32.6074],[112.3242,32.3438],[113.2031,32.4316],[113.4668,32.2998],[113.7305,32.4316],[113.8184,31.8604],[113.9941,31.7725],[114.1699,31.8604],[114.5215,31.7725],[114.6094,31.5527],[114.7852,31.4648],[115.1367,31.5967],[115.2246,31.4209],[115.4004,31.4209],[115.5762,31.2012],[116.0156,31.0254],[115.752,30.6738],[116.1035,30.1904],[116.1035,29.8389],[115.9277,29.707],[115.4883,29.7949],[114.873,29.3994],[114.2578,29.3555],[113.9063,29.0479],[113.7305,29.0918],[113.6426,29.3115],[113.7305,29.5752],[113.5547,29.707],[113.5547,29.8389],[113.0273,29.4434],[112.9395,29.4873],[113.0273,29.751],[112.9395,29.7949],[112.6758,29.5752],[112.5,29.6191],[112.2363,29.5313],[111.7969,29.9268],[110.8301,30.1465],[110.4785,30.0146],[110.6543,29.751],[110.4785,29.6631],[109.7754,29.751],[109.6875,29.6191],[109.5117,29.6191],[109.248,29.1357],[109.0723,29.3555],[108.9844,29.3115],[108.6328,29.8389],[108.457,29.7949],[108.5449,30.2344],[108.457,30.4102],[108.6328,30.5859],[108.8086,30.498],[109.0723,30.6299],[109.1602,30.542],[109.248,30.6299],[109.4238,30.542],[109.8633,30.8936],[110.0391,30.8057],[110.2148,31.1572]]]}},{type:"Feature",id:"52",properties:{name:"贵州",cp:[106.6113,26.9385],childNum:9},geometry:{type:"Polygon",coordinates:[[[104.1504,27.2461],[104.4141,27.4658],[104.5898,27.334],[105.2051,27.3779],[105.293,27.7295],[105.5566,27.7734],[105.6445,27.6416],[106.3477,27.8174],[106.1719,28.125],[105.9082,28.125],[105.6445,28.4326],[105.9961,28.7402],[106.3477,28.5205],[106.5234,28.5645],[106.4355,28.7842],[106.5234,28.7842],[106.6113,28.6523],[106.6113,28.5205],[106.6992,28.4766],[106.875,28.7842],[107.4023,28.8721],[107.4023,29.1797],[107.5781,29.2236],[107.8418,29.1357],[107.8418,29.0039],[108.2813,29.0918],[108.3691,28.6523],[108.5449,28.6523],[108.5449,28.3887],[108.7207,28.4766],[108.7207,28.2129],[109.0723,28.2129],[109.248,28.4766],[109.3359,28.2568],[109.3359,27.9053],[109.4238,27.5977],[108.8086,27.1143],[108.8965,27.0264],[109.3359,27.1582],[109.5117,27.0264],[109.5117,26.8066],[109.3359,26.7188],[109.4238,26.5869],[109.248,26.3232],[109.4238,26.2793],[109.5117,26.0156],[109.3359,25.708],[108.9844,25.752],[109.0723,25.5322],[108.6328,25.5762],[108.6328,25.3125],[108.3691,25.5322],[108.1934,25.4443],[108.1055,25.2246],[107.8418,25.1367],[107.7539,25.2246],[107.4902,25.2246],[107.2266,25.6201],[106.9629,25.4883],[107.0508,25.2686],[106.875,25.1807],[106.1719,24.9609],[106.1719,24.7852],[105.9961,24.6533],[105.2051,24.9609],[104.6777,24.6094],[104.502,24.7412],[104.6777,24.9609],[104.5898,25.0488],[104.8535,25.2246],[104.3262,25.708],[104.6777,26.4111],[104.4141,26.6748],[103.8867,26.543],[103.7109,26.7627],[103.7109,26.9824],[103.623,27.0264],[103.8867,27.4219],[104.1504,27.2461]]]}},{type:"Feature",id:"37",properties:{name:"山东",cp:[118.7402,36.4307],childNum:17},geometry:{type:"Polygon",coordinates:[[[115.4883,36.167],[115.3125,36.5186],[115.752,36.9141],[116.0156,37.3535],[116.2793,37.3535],[116.2793,37.5732],[116.4551,37.4854],[116.8066,37.8369],[117.4219,37.8369],[117.9492,38.3203],[118.125,38.1445],[118.916,38.1445],[119.3555,37.6611],[119.0039,37.5293],[119.0039,37.3535],[119.3555,37.1338],[119.707,37.1338],[119.8828,37.3975],[120.498,37.8369],[120.5859,38.1445],[120.9375,38.4521],[121.0254,37.8369],[121.2012,37.6611],[121.9043,37.4854],[122.168,37.6172],[122.2559,37.4854],[122.6074,37.4854],[122.6953,37.3535],[122.6074,36.9141],[122.4316,36.7822],[121.8164,36.8701],[121.7285,36.6943],[121.1133,36.6064],[121.1133,36.4307],[121.377,36.2549],[120.7617,36.167],[120.9375,35.8594],[120.6738,36.0352],[119.707,35.4639],[119.9707,34.9805],[119.3555,35.0244],[119.2676,35.1123],[118.916,35.0244],[118.7402,34.7168],[118.4766,34.6729],[118.3887,34.4092],[118.2129,34.4092],[118.125,34.6289],[117.9492,34.6729],[117.5977,34.4531],[117.334,34.585],[117.2461,34.4531],[116.8066,34.9365],[116.4551,34.8926],[116.3672,34.6289],[116.1914,34.585],[115.5762,34.585],[115.4004,34.8486],[114.7852,35.0684],[115.0488,35.376],[115.2246,35.4199],[115.4883,35.7275],[116.1035,36.0791],[115.3125,35.8154],[115.4883,36.167]]]}},{type:"Feature",id:"36",properties:{name:"江西",cp:[116.0156,27.29],childNum:11},geometry:{type:"Polygon",coordinates:[[[114.2578,28.3447],[114.082,28.5645],[114.1699,28.8281],[113.9063,29.0479],[114.2578,29.3555],[114.873,29.3994],[115.4883,29.7949],[115.9277,29.707],[116.1035,29.8389],[116.2793,29.7949],[116.7188,30.0586],[116.8945,29.9268],[116.7188,29.751],[116.7188,29.6191],[117.1582,29.707],[117.0703,29.8389],[117.1582,29.9268],[117.5098,29.6191],[118.0371,29.5752],[118.2129,29.3994],[118.0371,29.1797],[118.0371,29.0479],[118.3887,28.7842],[118.4766,28.3447],[118.4766,28.3008],[118.3008,28.0811],[117.7734,27.8174],[117.5098,27.9932],[116.9824,27.6416],[117.1582,27.29],[117.0703,27.1143],[116.543,26.8066],[116.6309,26.4551],[116.3672,26.2354],[116.4551,26.1035],[116.1914,25.8838],[116.0156,25.2686],[115.8398,25.2246],[115.9277,24.917],[115.752,24.7852],[115.8398,24.5654],[115.4004,24.7852],[114.4336,24.5215],[114.1699,24.6973],[114.4336,24.9609],[114.6973,25.1367],[114.7852,25.2686],[114.6094,25.4004],[113.9941,25.2686],[113.9063,25.4443],[113.9941,26.0596],[114.2578,26.1475],[113.9941,26.1914],[114.082,26.5869],[113.9063,26.6309],[113.9063,26.9385],[113.7305,27.1143],[113.8184,27.29],[113.6426,27.3779],[113.6426,27.5977],[113.7305,27.9492],[114.2578,28.3447]]]}},{type:"Feature",id:"41",properties:{name:"河南",cp:[113.4668,33.8818],childNum:17},geometry:{type:"Polygon",coordinates:[[[110.3906,34.585],[110.8301,34.6289],[111.1816,34.8047],[111.5332,34.8486],[111.7969,35.0684],[112.0605,35.0684],[112.0605,35.2881],[112.7637,35.2002],[113.1152,35.332],[113.6426,35.6836],[113.7305,36.3428],[114.873,36.123],[114.9609,36.0791],[115.1367,36.2109],[115.3125,36.0791],[115.4883,36.167],[115.3125,35.8154],[116.1035,36.0791],[115.4883,35.7275],[115.2246,35.4199],[115.0488,35.376],[114.7852,35.0684],[115.4004,34.8486],[115.5762,34.585],[116.1914,34.585],[116.1914,34.4092],[116.543,34.2773],[116.6309,33.9258],[116.1914,33.7061],[116.0156,33.9697],[115.6641,34.0576],[115.5762,33.9258],[115.5762,33.6621],[115.4004,33.5303],[115.3125,33.1787],[114.873,33.1348],[114.873,33.0029],[115.1367,32.8711],[115.2246,32.6074],[115.5762,32.4316],[115.8398,32.5195],[115.9277,31.7725],[115.4883,31.6846],[115.4004,31.4209],[115.2246,31.4209],[115.1367,31.5967],[114.7852,31.4648],[114.6094,31.5527],[114.5215,31.7725],[114.1699,31.8604],[113.9941,31.7725],[113.8184,31.8604],[113.7305,32.4316],[113.4668,32.2998],[113.2031,32.4316],[112.3242,32.3438],[111.5332,32.6074],[111.0059,33.2666],[111.0059,33.5303],[110.6543,33.8379],[110.6543,34.1455],[110.4785,34.2334],[110.3906,34.585]]]}},{type:"Feature",id:"21",properties:{name:"辽宁",cp:[122.3438,41.0889],childNum:14},geometry:{type:"Polygon",coordinates:[[[119.2676,41.3086],[119.4434,41.6162],[119.2676,41.7041],[119.3555,42.2754],[119.5313,42.3633],[119.8828,42.1875],[120.1465,41.7041],[120.498,42.0996],[121.4648,42.4951],[121.7285,42.4512],[121.9922,42.7148],[122.3438,42.6709],[122.3438,42.8467],[122.7832,42.7148],[123.1348,42.8027],[123.3105,42.9785],[123.5742,43.0225],[123.6621,43.374],[123.8379,43.4619],[124.2773,43.2422],[124.4531,42.8467],[124.7168,43.0664],[124.8926,43.0664],[124.8926,42.8027],[125.332,42.1436],[125.4199,42.0996],[125.332,41.9678],[125.332,41.6602],[125.7715,41.2207],[125.5957,40.9131],[125.6836,40.8691],[124.541,40.21],[124.1016,39.6826],[123.3984,39.6826],[123.1348,39.4189],[123.1348,39.0234],[122.0801,39.0234],[121.5527,38.7158],[121.1133,38.6719],[120.9375,38.9795],[121.377,39.1992],[121.2012,39.5508],[122.0801,40.3857],[121.9922,40.6934],[121.7285,40.8252],[121.2012,40.8252],[120.5859,40.21],[119.8828,39.9463],[119.707,40.1221],[119.5313,40.5615],[119.2676,40.5176],[118.8281,40.8252],[119.2676,41.3086]]]}},{type:"Feature",id:"14",properties:{name:"山西",cp:[112.4121,37.6611],childNum:11},geometry:{type:"Polygon",coordinates:[[[110.918,38.7158],[111.1816,39.2432],[111.0938,39.375],[111.3574,39.4189],[111.4453,39.6387],[111.9727,39.5947],[112.3242,40.2539],[112.7637,40.166],[113.2031,40.3857],[113.5547,40.3418],[113.8184,40.5176],[114.082,40.5176],[114.082,40.7373],[114.2578,40.6055],[114.3457,40.3857],[114.5215,40.3418],[113.9941,39.9902],[114.3457,39.8584],[114.5215,39.5068],[114.3457,39.0674],[113.9063,39.0234],[113.8184,38.9355],[113.8184,38.8037],[113.5547,38.54],[113.5547,38.2764],[113.8184,38.1445],[113.9941,37.7051],[114.1699,37.6611],[113.7305,37.1338],[113.7305,36.8701],[113.4668,36.6504],[113.7305,36.3428],[113.6426,35.6836],[113.1152,35.332],[112.7637,35.2002],[112.0605,35.2881],[112.0605,35.0684],[111.7969,35.0684],[111.5332,34.8486],[111.1816,34.8047],[110.8301,34.6289],[110.3906,34.585],[110.2148,34.6729],[110.2148,34.8926],[110.5664,35.6396],[110.4785,36.123],[110.3906,37.002],[110.8301,37.6611],[110.4785,37.9688],[110.4785,38.1885],[110.8301,38.4961],[110.918,38.7158]]]}},{type:"Feature",id:"34",properties:{name:"安徽",cp:[117.2461,32.0361],childNum:17},geometry:{type:"Polygon",coordinates:[[[116.6309,33.9258],[116.543,34.2773],[116.1914,34.4092],[116.1914,34.585],[116.3672,34.6289],[116.8945,34.4092],[117.1582,34.0576],[117.5977,34.0137],[117.7734,33.7061],[118.125,33.75],[117.9492,33.2227],[118.0371,33.1348],[118.2129,33.2227],[118.3008,32.7832],[118.7402,32.7393],[118.916,32.959],[119.1797,32.8271],[119.1797,32.4756],[118.5645,32.5635],[118.6523,32.2119],[118.4766,32.168],[118.3887,31.9482],[118.916,31.5527],[118.7402,31.377],[118.8281,31.2451],[119.3555,31.2891],[119.4434,31.1572],[119.6191,31.1133],[119.6191,31.0693],[119.4434,30.6738],[119.2676,30.6299],[119.3555,30.4102],[118.916,30.3223],[118.916,29.9707],[118.7402,29.707],[118.2129,29.3994],[118.0371,29.5752],[117.5098,29.6191],[117.1582,29.9268],[117.0703,29.8389],[117.1582,29.707],[116.7188,29.6191],[116.7188,29.751],[116.8945,29.9268],[116.7188,30.0586],[116.2793,29.7949],[116.1035,29.8389],[116.1035,30.1904],[115.752,30.6738],[116.0156,31.0254],[115.5762,31.2012],[115.4004,31.4209],[115.4883,31.6846],[115.9277,31.7725],[115.8398,32.5195],[115.5762,32.4316],[115.2246,32.6074],[115.1367,32.8711],[114.873,33.0029],[114.873,33.1348],[115.3125,33.1787],[115.4004,33.5303],[115.5762,33.6621],[115.5762,33.9258],[115.6641,34.0576],[116.0156,33.9697],[116.1914,33.7061],[116.6309,33.9258]]]}},{type:"Feature",id:"35",properties:{name:"福建",cp:[118.3008,25.9277],childNum:9},geometry:{type:"Polygon",coordinates:[[[118.4766,28.3008],[118.8281,28.2568],[118.7402,28.0371],[118.916,27.4658],[119.2676,27.4219],[119.6191,27.6855],[119.7949,27.29],[120.2344,27.4219],[120.4102,27.1582],[120.7617,27.0264],[120.6738,26.8945],[120.2344,26.8506],[120.2344,26.7188],[120.4102,26.6748],[120.498,26.3672],[120.2344,26.2793],[120.4102,26.1475],[120.0586,26.1914],[119.9707,25.9277],[119.7949,25.9277],[119.9707,25.4004],[119.7949,25.2686],[119.5313,25.1367],[119.4434,25.0049],[119.2676,25.0928],[118.916,24.8291],[118.6523,24.5215],[118.4766,24.5215],[118.4766,24.4336],[118.2129,24.3457],[118.2129,24.1699],[117.8613,23.9941],[117.7734,23.7744],[117.5098,23.5986],[117.1582,23.5547],[116.9824,23.9063],[116.9824,24.1699],[116.7188,24.6533],[116.543,24.6094],[116.3672,24.873],[116.2793,24.7852],[115.9277,24.917],[115.8398,25.2246],[116.0156,25.2686],[116.1914,25.8838],[116.4551,26.1035],[116.3672,26.2354],[116.6309,26.4551],[116.543,26.8066],[117.0703,27.1143],[117.1582,27.29],[116.9824,27.6416],[117.5098,27.9932],[117.7734,27.8174],[118.3008,28.0811],[118.4766,28.3008]]]}},{type:"Feature",id:"33",properties:{name:"浙江",cp:[120.498,29.0918],childNum:11},geometry:{type:"Polygon",coordinates:[[[118.2129,29.3994],[118.7402,29.707],[118.916,29.9707],[118.916,30.3223],[119.3555,30.4102],[119.2676,30.6299],[119.4434,30.6738],[119.6191,31.0693],[119.6191,31.1133],[119.9707,31.1572],[120.498,30.8057],[120.9375,31.0254],[121.2891,30.6738],[121.9922,30.8057],[122.6953,30.8936],[122.8711,30.7178],[122.959,30.1465],[122.6074,30.1025],[122.6074,29.9268],[122.168,29.5313],[122.3438,28.8721],[121.9922,28.8721],[121.9922,28.4326],[121.7285,28.3447],[121.7285,28.2129],[121.4648,28.2129],[121.5527,28.0371],[121.2891,27.9492],[121.1133,27.4219],[120.6738,27.334],[120.6738,27.1582],[120.9375,27.0264],[120.7617,27.0264],[120.4102,27.1582],[120.2344,27.4219],[119.7949,27.29],[119.6191,27.6855],[119.2676,27.4219],[118.916,27.4658],[118.7402,28.0371],[118.8281,28.2568],[118.4766,28.3008],[118.4766,28.3447],[118.3887,28.7842],[118.0371,29.0479],[118.0371,29.1797],[118.2129,29.3994]]]}},{type:"Feature",id:"32",properties:{name:"江苏",cp:[120.0586,32.915],childNum:13},geometry:{type:"Polygon",coordinates:[[[116.3672,34.6289],[116.4551,34.8926],[116.8066,34.9365],[117.2461,34.4531],[117.334,34.585],[117.5977,34.4531],[117.9492,34.6729],[118.125,34.6289],[118.2129,34.4092],[118.3887,34.4092],[118.4766,34.6729],[118.7402,34.7168],[118.916,35.0244],[119.2676,35.1123],[119.3555,35.0244],[119.3555,34.8486],[119.707,34.585],[120.3223,34.3652],[120.9375,33.0469],[121.0254,32.6514],[121.377,32.4756],[121.4648,32.168],[121.9043,31.9922],[121.9922,31.6846],[121.9922,31.5967],[121.2012,31.8604],[121.1133,31.7285],[121.377,31.5088],[121.2012,31.4648],[120.9375,31.0254],[120.498,30.8057],[119.9707,31.1572],[119.6191,31.1133],[119.4434,31.1572],[119.3555,31.2891],[118.8281,31.2451],[118.7402,31.377],[118.916,31.5527],[118.3887,31.9482],[118.4766,32.168],[118.6523,32.2119],[118.5645,32.5635],[119.1797,32.4756],[119.1797,32.8271],[118.916,32.959],[118.7402,32.7393],[118.3008,32.7832],[118.2129,33.2227],[118.0371,33.1348],[117.9492,33.2227],[118.125,33.75],[117.7734,33.7061],[117.5977,34.0137],[117.1582,34.0576],[116.8945,34.4092],[116.3672,34.6289]]]}},{type:"Feature",id:"50",properties:{name:"重庆",cp:[107.7539,30.1904],childNum:40},geometry:{type:"Polygon",coordinates:[[[108.5449,31.6846],[108.2813,31.9043],[108.3691,32.168],[108.5449,32.2119],[109.0723,31.9482],[109.248,31.7285],[109.5996,31.7285],[109.7754,31.6846],[109.6875,31.5527],[110.127,31.377],[110.2148,31.1572],[110.0391,30.8057],[109.8633,30.8936],[109.4238,30.542],[109.248,30.6299],[109.1602,30.542],[109.0723,30.6299],[108.8086,30.498],[108.6328,30.5859],[108.457,30.4102],[108.5449,30.2344],[108.457,29.7949],[108.6328,29.8389],[108.9844,29.3115],[109.0723,29.3555],[109.248,29.1357],[109.248,28.4766],[109.0723,28.2129],[108.7207,28.2129],[108.7207,28.4766],[108.5449,28.3887],[108.5449,28.6523],[108.3691,28.6523],[108.2813,29.0918],[107.8418,29.0039],[107.8418,29.1357],[107.5781,29.2236],[107.4023,29.1797],[107.4023,28.8721],[106.875,28.7842],[106.6992,28.4766],[106.6113,28.5205],[106.6113,28.6523],[106.5234,28.7842],[106.4355,28.7842],[106.5234,28.5645],[106.3477,28.5205],[106.2598,28.8721],[105.8203,28.96],[105.7324,29.2676],[105.4688,29.3115],[105.293,29.5313],[105.7324,29.8828],[105.5566,30.1025],[105.6445,30.2783],[105.8203,30.4541],[106.2598,30.1904],[106.6113,30.3223],[106.7871,30.0146],[107.0508,30.0146],[107.4902,30.6299],[107.4023,30.7617],[107.4902,30.8496],[107.9297,30.8496],[108.1934,31.5088],[108.5449,31.6846]]]}},{type:"Feature",id:"64",properties:{name:"宁夏",cp:[105.9961,37.3096],childNum:5},geometry:{type:"Polygon",coordinates:[[[104.3262,37.4414],[105.8203,37.793],[105.9082,38.7158],[106.3477,39.2871],[106.7871,39.375],[106.9629,38.9795],[106.5234,38.3203],[106.7871,38.1885],[107.3145,38.1006],[107.666,37.8809],[107.3145,37.6172],[107.3145,37.0898],[106.6113,37.0898],[106.6113,36.7822],[106.4355,36.5625],[106.5234,36.4746],[106.5234,36.2549],[106.875,36.123],[106.9629,35.8154],[106.6992,35.6836],[106.4355,35.6836],[106.5234,35.332],[106.3477,35.2441],[106.2598,35.4199],[106.084,35.376],[105.9961,35.4199],[106.084,35.4639],[105.9961,35.4639],[105.8203,35.5518],[105.7324,35.7275],[105.3809,35.7715],[105.293,35.9912],[105.4688,36.123],[105.2051,36.6943],[105.293,36.8262],[104.8535,37.2217],[104.5898,37.2217],[104.5898,37.4414],[104.3262,37.4414]]]}},{type:"Feature",id:"46",properties:{name:"海南",cp:[109.9512,19.2041],childNum:18},geometry:{type:"Polygon",coordinates:[[[108.6328,19.3799],[109.0723,19.6436],[109.248,19.9512],[109.5996,20.0391],[110.0391,20.127],[110.3906,20.127],[110.5664,20.2588],[110.6543,20.2588],[111.0938,19.9512],[111.2695,19.9951],[110.6543,19.1602],[110.5664,18.6768],[110.2148,18.5889],[110.0391,18.3691],[109.8633,18.3691],[109.6875,18.1055],[108.9844,18.2813],[108.6328,18.457],[108.6328,19.3799]]]}},{type:"Feature",id:"71",properties:{name:"台湾",cp:[121.0254,23.5986],childNum:1},geometry:{type:"Polygon",coordinates:[[[121.9043,25.0488],[121.9922,25.0049],[121.8164,24.7412],[121.9043,24.5654],[121.6406,24.0381],[121.377,23.1152],[121.0254,22.6758],[120.8496,22.0605],[120.7617,21.9287],[120.6738,22.3242],[120.2344,22.5879],[120.0586,23.0713],[120.1465,23.6865],[121.0254,25.0488],[121.5527,25.3125],[121.9043,25.0488]]]}},{type:"Feature",id:"11",properties:{name:"北京",cp:[116.4551,40.2539],childNum:19},geometry:{type:"Polygon",coordinates:[[[117.4219,40.21],[117.334,40.1221],[117.2461,40.0781],[116.8066,39.9902],[116.8945,39.8145],[116.8945,39.6826],[116.8066,39.5947],[116.543,39.5947],[116.3672,39.4629],[116.1914,39.5947],[115.752,39.5068],[115.4883,39.6387],[115.4004,39.9463],[115.9277,40.2539],[115.752,40.5615],[116.1035,40.6055],[116.1914,40.7813],[116.4551,40.7813],[116.3672,40.9131],[116.6309,41.0449],[116.9824,40.6934],[117.4219,40.6494],[117.2461,40.5176],[117.4219,40.21]]]}},{type:"Feature",id:"12",properties:{name:"天津",cp:[117.4219,39.4189],childNum:18},geometry:{type:"Polygon",coordinates:[[[116.8066,39.5947],[116.8945,39.6826],[117.1582,39.6387],[117.1582,39.8145],[117.2461,40.0781],[117.334,40.1221],[117.4219,40.21],[117.6855,40.0781],[117.6855,39.9902],[117.5098,39.9902],[117.5098,39.7705],[117.6855,39.5947],[117.9492,39.5947],[117.8613,39.4189],[118.0371,39.2432],[118.0371,39.1992],[117.8613,39.1113],[117.5977,38.6279],[117.2461,38.54],[116.7188,38.8037],[116.7188,38.9355],[116.8945,39.1113],[116.8066,39.5947]]]}},{type:"Feature",id:"31",properties:{name:"上海",cp:[121.4648,31.2891],childNum:19},geometry:{type:"Polygon",coordinates:[[[120.9375,31.0254],[121.2012,31.4648],[121.377,31.5088],[121.1133,31.7285],[121.2012,31.8604],[121.9922,31.5967],[121.9043,31.1572],[121.9922,30.8057],[121.2891,30.6738],[120.9375,31.0254]]]}},{type:"Feature",id:"81",properties:{name:"香港",cp:[114.2578,22.3242],childNum:1},geometry:{type:"Polygon",coordinates:[[[114.6094,22.4121],[114.5215,22.1484],[114.3457,22.1484],[113.9063,22.1484],[113.8184,22.1924],[113.9063,22.4121],[114.1699,22.5439],[114.3457,22.5439],[114.4336,22.5439],[114.4336,22.4121],[114.6094,22.4121]]]}},{type:"Feature",id:"82",properties:{name:"澳门",cp:[113.5547,22.1484],childNum:1},geometry:{type:"Polygon",coordinates:[[[113.5986,22.1649],[113.6096,22.1265],[113.5547,22.11],[113.5437,22.2034],[113.5767,22.2034],[113.5986,22.1649]]]}}]};var r="#000000";var t=13;var K=0;var I=20;var v=10;var z=100;G.data=function(Y){if(arguments.length){if(Y.type==="xml"){Y=Y.root;Y=Y.map(function(ac){var ab={};ac.row.row.forEach(function(ae){var ad=h.keys(ae)[0];ab[ad]=ae[ad]});return ab})}else{if(Y.type==="xlsx"||Y.type==="xls"){var aa=[];for(var Z=0;Z<Y.length;Z++){var X=h.keys(Y[Z])[0];aa=aa.concat(Y[Z][X])}Y=aa}}R=Y;R.forEach(function(ac,ab){if(!isFinite(parseFloat(ac.value))){alert('Attribute "value" in line '+ab+" should be a number")}});return this}else{return R}};G.getType=function(){return W};G.render=function(Z){Q=Q||O.select(Z).node();if(!Q||Q.tagName.toLowerCase()!=="div"){alert("The argument(element) in map.rander(_) should be <div> element")}O.select(Q).classed("chart",true);q=q||O.select(Q).append("svg").classed("map",true).node();w=O.min([l,p]);A=O.min([l,p]);var aa=O.scale.linear().range([P[0],P[1]]);aa.domain(m);s=O.select(Q).select(".floatTag").node()?O.select(Q).select(".floatTag"):G.floatTag(Q);var ab=O.select(q).attr({width:l,height:p}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+V+","+U+")");ab.call(function(ac){ac.append("svg:g").classed("map",true);ac.append("svg:g").classed("legends",true)});ab=O.select(q).select("g");y(ab);E(ab);var Y=ab.select(".map").selectAll(".state");R.forEach(function(ac){if(x.has(ac.name)){O.select(x.get(ac.name)).data([ac]).select("path").attr("data-color",aa(ac.value)).style("fill",aa(ac.value))}});Y.on("mouseover",function(ac){C(ac,true,aa);O.select(this).select("path").transition().duration(F).style("fill",M)}).on("mouseout",function(ac){C(ac,false,aa);O.select(this).select("path").transition().duration(F).style("fill",function(){return O.select(this).attr("data-color")})});var X=ab.select(".legends").attr("transform","translate("+K+","+I+")").selectAll(".legend").data(aa.ticks(6).slice(1).reverse());X.exit().transition().duration(F).style("opacity",0).remove();N(X,aa);S(X,aa)};function y(Y){var X=O.geo.mercator().center([122,40]).scale(T);var Z=O.geo.path().projection(X);Y.select(".map").selectAll(".state").append("svg:g").call(function(aa){aa.select("path").transition().duration(F).attr("d",Z).attr("data-color",D).style("fill",D).style("stroke",u);aa.select("text").transition().duration(F).attr("x",function(ab){return X(ab.properties.cp)[0]}).attr("y",function(ab){return X(ab.properties.cp)[1]}).style({"font-family":n,"font-size":B,fill:L})})}function E(Z){var X=O.geo.mercator().center([122,40]).scale(T);var aa=O.geo.path().projection(X);var Y=Z.select(".map").selectAll(".state").data(o.features).enter();Y.append("svg:g").classed("state",true).attr("id",function(ab){return ab.properties.name}).call(function(ab){ab.each(function(ac){x.set(ac.properties.name,this)});ab.append("svg:path").attr("d",aa).attr("data-color",D).style("fill",D).style("stroke",u);ab.append("svg:text").attr("x",function(ac){return X(ac.properties.cp)[0]}).attr("y",function(ac){return X(ac.properties.cp)[1]}).style("text-anchor",function(ac){if(ac.properties.name==="澳门"){return"end"}else{if(ac.properties.name==="香港"){return"start"}else{return"middle"}}}).style({"font-family":n,"font-size":B,fill:L}).text(function(ac){return ac.properties.name})})}function S(X,Y){X.enter().append("svg:g").classed("legend",true).each(function(aa,Z){O.select(this).append("svg:rect").attr({x:(Z-Z%v)/v*z+w+20,y:Z%v*20}).attr({width:10,height:10}).style("fill",Y).style("stroke",Y).style("fill-opacity",1).style("opacity",0).transition().duration(F).style("opacity",1);O.select(this).append("svg:text").attr({x:(Z-Z%v)/v*z+w+40,y:Z%v*20+9}).style({opacity:0,fill:r,"font-size":t,"font-family":n}).transition().duration(F).style("opacity",1).text(String)})}function N(X,Y){X.each(function(aa,Z){O.select(this).selectAll("rect").transition().duration(F/2).style("fill",Y).style("stroke",Y).style("fill-opacity",1).attr({x:(Z-Z%v)/v*z+w+20,y:Z%v*20});O.select(this).selectAll("text").transition().duration(F/2).attr({x:(Z-Z%v)/v*z+w+40,y:Z%v*20+9}).style({"font-size":t,fill:r,"font-family":n}).text(String)})}function C(Z,Y,X){if(Y){s.style({"border-color":X(Z.value),opacity:1,textAlign:"center",margin:"auto"}).html("name: "+Z.name+"<br/>value: "+Z.value)}else{s.style("opacity",0)}}G.size=function(X){if(!arguments.length){return[l,p]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in map.size(width, height) should be number and number of svg");return this}else{l=arguments[0];p=arguments[1];return this}}};G.sizeAvail=function(X){if(!arguments.length){return[w,A]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in map.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{w=arguments[0];A=arguments[1];return this}}};G.tran=function(X){if(!arguments.length){return[V,U]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in map.tran(tranX, tranY) should be number and number of svg");return this}else{V=arguments[0];U=arguments[1];return this}}};G.fontSize=function(X){if(!arguments.length){return B}else{if(!isFinite(arguments[0])){console.error("The arguments in map.fontSize(fontSize) should be number of text");return this}else{B=arguments[0];return this}}};G.fontFamily=function(X){if(!arguments.length){return n}else{if(typeof arguments[0]!=="string"){console.error("The arguments in map.fontFamily(fontFamily) should be string of text");return this}else{B=arguments[0];return this}}};G.fontColor=function(X){if(!arguments.length){return L}else{if(typeof arguments[0]!=="string"){console.error("The arguments in map.fontColor(fontColor) should be string of text");return this}else{L=arguments[0];return this}}};G.duration=function(X){if(!arguments.length){return F}else{if(!isFinite(arguments[0])){console.error("The arguments in map.duration(duration) should be number of transition");return this}else{F=Math.round(arguments[0]);return this}}};G.color=function(X){if(!arguments.length){return H}else{if(typeof arguments[0]!=="function"){console.error("The arguments in map.color(color) should be function of pvisual.color");return this}else{H=arguments[0];return this}}};G.tickFormat=function(X){if(!arguments.length){return J}else{if(typeof arguments[0]!=="string"){console.error("The arguments in map.tickFormat(format) should be string of d3.format");return this}else{J=O.format(arguments[0]);return this}}};G.mapScale=function(X){if(!arguments.length){return T}else{if(!isFinite(arguments[0])){console.error("The arguments in map.mapScale(mapScale) should be number of map");return this}else{T=arguments[0];return this}}};G.extentValue=function(X){if(!arguments.length){return m}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in map.extentValue(start, end) should be number and number of color");return this}else{m[0]=arguments[0];m[1]=arguments[1];return this}}};G.gradientColor=function(X){if(!arguments.length){return P}else{if(arguments.length!==2||typeof arguments[0]!=="string"||typeof arguments[1]!=="string"){console.error("The argument(element) in map.gradientColor(start, end) should be string and string of color");return this}else{P[0]=arguments[0];P[1]=arguments[1];return this}}};G.stateFillColor=function(X){if(!arguments.length){return D}else{if(typeof arguments[0]!=="string"&&typeof arguments[0]!=="function"){console.error("The arguments in map.stateFillColor(stateFillColor) should be string or function of map");return this}else{D=O.functor(arguments[0]);return this}}};G.stateStrokeColor=function(X){if(!arguments.length){return u}else{if(typeof arguments[0]!=="string"&&typeof arguments[0]!=="function"){console.error("The arguments in map.stateStrokeColor(stateStrokeColor) should be string or function of map");return this}else{u=O.functor(arguments[0]);return this}}};G.activeStateColor=function(X){if(!arguments.length){return M}else{if(typeof arguments[0]!=="string"&&typeof arguments[0]!=="function"){console.error("The arguments in map.activeStateColor(activeStateColor) should be string or function of map");return this}else{M=O.functor(arguments[0]);return this}}};G.options=function(X){if(!arguments.length){return{type:G.getType(),width:l,height:p,widthAvail:w,heightAvail:A,tranX:V,tranY:U,format:J,fontSize:B,fontColor:L,fontFamily:n,color:H,duration:F,mapScale:T,extentValue:m,stateFillColor:D,stateStrokeColor:u,activeStateColor:M,gradientColor:P}}else{if(typeof X!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{l=isFinite(X.width)?X.width:l;p=isFinite(X.height)?X.height:p;w=isFinite(X.widthAvail)?X.widthAvail:w;A=isFinite(X.heightAvail)?X.heightAvail:A;V=isFinite(X.tranX)?X.tranX:V;U=isFinite(X.tranY)?X.tranY:U;X.format&&G.tickFormat(X.format);X.fontFamily&&G.fontFamily(X.fontFamily);X.fontColor&&G.fontColor(X.fontColor);isFinite(X.fontSize)&&G.fontSize(X.fontSize);isFinite(X.duration)&&G.duration(X.duration);isFinite(X.mapScale)&&G.mapScale(X.mapScale);typeof X.extentValue==="object"&&X.extentValue.constructor===Array&&X.extentValue.length===2&&G.extentValue(X.extentValue[0],X.extentValue[1]);typeof X.gradientColor==="object"&&X.gradientColor.constructor===Array&&X.gradientColor.length===2&&G.gradientColor(X.gradientColor[0],X.gradientColor[1]);X.stateFillColor&&G.stateFillColor(X.stateFillColor);X.stateStrokeColor&&G.stateStrokeColor(X.stateStrokeColor);X.activeStateColor&&G.activeStateColor(X.activeStateColor);return this}}};if(arguments.length===1){G.options(arguments[0])}return G};h.model.multiline=function(){var v=h.extend();var Y=i.d3;var ai="多线图";var l=800;var n=400;var x=l-200;var B=n-100;var ah=50;var af=0;var ad;var m="Arial";var s;var aa;var p;var G=1000;var O=Y.format("s");var K=v.color();var P=true;var ab=false;var S=null;var ac="liner";var ag=0.7;var X;var J="";var H="";var R=0;var o=0;var E=8;var U="#000000";var V=8;var t=5;var Z=5;var I=-x;var L=8;var F="#929292";var Q="#929292";var W=2;var A="#000000";var r="#000000";var u=13;var N=0;var M=0;var w=10;var z=100;v.data=function(ak){if(arguments.length){if(ak.type==="xml"){ak=ak.root;ak=ak.map(function(ap){var ao={};ap.row.row.forEach(function(ar){var aq=h.keys(ar)[0];ao[aq]=ar[aq]});return ao});ak=q(ak);var an={x:Y.set()};X=ak.map(function(ao){an[ao.name]=Y.map();return{name:ao.name,_flag:true}});ak.forEach(function(ao){ao.points.forEach(function(ap){ap.y=+ap.y;an[ao.name].set(ap.x,{x:ap.x,y:ap.y});an.x.add(ap.x)})});ad=h.keys(an).filter(function(ao){return ao!=="x"}).map(function(ao){return{name:ao,points:an[ao].values()}});X.x=an.x.values()}else{if(ak.type==="xlsx"||ak.type==="xls"){var am=[];for(var al=0;al<ak.length;al++){var aj=h.keys(ak[al])[0];am=am.concat(ak[al][aj])}ak=am;var an={x:Y.set()};X=h.keys(ak[0]).filter(function(ao){return ao!=="x"}).map(function(ao){an[ao]=Y.map();return{name:ao,_flag:true}});ak.forEach(function(ao){X.forEach(function(ap){ao.x=""+ao.x;an[ap.name].set(ao.x,{x:ao.x,y:+ao[ap.name]});an.x.add(ao.x)})});ad=h.keys(an).filter(function(ao){return ao!=="x"}).map(function(ao){return{name:ao,points:an[ao].values()}});X.x=an.x.values()}else{if(ak.type==="tsv"||ak.type==="csv"){var an={x:Y.set()};X=h.keys(ak[0]).filter(function(ao){return ao!=="x"}).map(function(ao){an[ao]=Y.map();return{name:ao,_flag:true}});ak.forEach(function(ao){X.forEach(function(ap){an[ap.name].set(ao.x,{x:ao.x,y:+ao[ap.name]});an.x.add(ao.x)})});ad=h.keys(an).filter(function(ao){return ao!=="x"}).map(function(ao){return{name:ao,points:an[ao].values()}});X.x=an.x.values()}else{if(ak.type==="json"){var an={x:Y.set()};X=ak.map(function(ao){an[ao.name]=Y.map();return{name:ao.name,_flag:true}});ak.forEach(function(ao){ao.points.forEach(function(ap){ap.y=+ap.y;an[ao.name].set(ap.x,{x:ap.x,y:ap.y});an.x.add(ap.x)})});ad=h.keys(an).filter(function(ao){return ao!=="x"}).map(function(ao){return{name:ao,points:an[ao].values()}});X.x=an.x.values()}}}}return this}else{return ad}};v.getType=function(){return ai};v.render=function(ar){aa=aa||Y.select(ar).node();if(!aa||aa.tagName.toLowerCase()!=="div"){console.error("The argument(element) in multiline.rander(_) should be <div> element")}Y.select(aa).classed("chart",true);p=p||Y.select(aa).append("svg").classed("multiline",true).node();var ak=v.clone(ad).filter(function(av){var au=true;X.forEach(function(aw){if(aw.name===av.name){au=aw._flag}});return au});if(S!==null){ab=true}var aq;var ap;var am;var al;if(ab){aq=Y.time.scale().domain(Y.extent(X.x,function(au){return S.parse(au)})).range([0,x]);ak.forEach(function(au){au.points.forEach(function(av){av.x=S.parse(av.x)})});ak.forEach(function(au){au.points.sort(function(aw,av){return aw.x.getTime()-av.x.getTime()})});am=Y.svg.axis().scale(aq).orient("bottom").tickSize(Z).ticks(V)}else{if(P){aq=Y.scale.linear().domain(Y.extent(X.x,function(au){return +au})).range([0,x]);ak.forEach(function(au){au.points.forEach(function(av){av.x=+av.x})});ak.forEach(function(au){au.points.sort(function(aw,av){return aw.x-av.x})});am=Y.svg.axis().scale(aq).orient("bottom").ticks(V).tickSize(Z).tickFormat(O)}else{aq=Y.scale.ordinal().domain(X.x,function(au){return""+au}).range([0,x]);am=Y.svg.axis().scale(aq).orient("bottom").tickSize(Z)}}ap=Y.scale.linear().domain([Y.min(ak,function(au){return Y.min(au.points,function(av){return av.y})}),Y.max(ak,function(au){return Y.max(au.points,function(av){return av.y})})]).range([B,0]);al=Y.svg.axis().scale(ap).orient("left").ticks(t).tickSize(I).tickFormat(O);var at=Y.svg.line().interpolate(ac).tension(ag).x(function(au){return aq(au.x)}).y(function(au){return ap(au.y)});s=Y.select(aa).select(".floatTag").node()?Y.select(aa).select(".floatTag"):v.floatTag(aa);var ao=Y.select(p).attr({width:l,height:n}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+ah+","+af+")");ao.call(function(au){au.append("svg:g").classed("dimensions",true);au.append("svg:g").classed("x-axis axis",true);au.append("svg:g").classed("y-axis axis",true);au.append("svg:g").classed("legends",true)});ao=Y.select(p).select("g");var aj=ao.selectAll(".dimensions").selectAll(".dimension").data(ak);aj.exit().transition().duration(G).style("opacity",0).remove();y(aj,at,aq,ap);C(aj,at,aq,ap,ak);var an=ao.select(".legends").attr("transform","translate("+N+","+M+")").selectAll(".legend").data(X);an.exit().transition().duration(G).style("opacity",0).remove();T(an);ae(an);D(ao,am,al)};function y(al,ak,aj,am){al.call(function(an){an.select(".line").transition().duration(G).attr("d",function(ao){return ak(ao.points)}).style("stroke",function(ao){return K(ao.name)})})}function C(al,ak,aj,an,am){al.enter().append("svg:g").classed("dimension",true).call(function(ao){ao.append("svg:path").classed("line",true).attr("d",function(ap){return ak(ap.points)}).style("fill","none").style("stroke",function(ap){return K(ap.name)}).style("opacity",0).transition().duration(G).style("opacity",1)})}function ae(aj){aj.enter().append("svg:g").classed("legend",true).style("cursor","pointer").on("click",function(ak){if(!Y.select(this).classed("none")){if(X.length>1){Y.select(this).classed("none",true);ak._flag=false;v.render()}}else{Y.select(this).classed("none",false);ak._flag=true;v.render()}}).each(function(al,ak){Y.select(this).append("svg:rect").attr({x:(ak-ak%w)/w*z+x+20,y:ak%w*20+9}).attr({width:10,height:10}).style({fill:K(ak),stroke:K(ak)}).style("fill-opacity",al._flag?1:0).style("opacity",0).transition().duration(G).style("opacity",1);Y.select(this).append("svg:text").attr({x:(ak-ak%w)/w*z+x+40,y:ak%w*20+19}).style({opacity:0,"font-size":u,fill:r,"font-family":m}).transition().duration(G).style("opacity",1).text(al.name)})}function T(aj){aj.each(function(al,ak){Y.select(this).selectAll("rect").transition().duration(G).style({fill:K(ak),stroke:K(ak)}).style("fill-opacity",al._flag?1:0).attr({x:(ak-ak%w)/w*z+x+20,y:ak%w*20+9});Y.select(this).selectAll("text").transition().duration(G).attr({x:(ak-ak%w)/w*z+x+40,y:ak%w*20+19}).style({"font-size":u,fill:r,"font-family":m}).text(al.name)})}function D(ak,al,aj){ak.select(".x-axis").each(function(){Y.select(this).select(".label").transition().duration(G).attr({x:x,y:-6}).style({"text-anchor":"end","font-family":m,"font-size":E,fill:U}).text(H);Y.select(this).selectAll(".label").data([1]).enter().append("svg:text").classed("label",true).style({"text-anchor":"end","font-family":m,"font-size":E,fill:U}).attr({x:x,y:-6}).text(H);Y.select(this).transition().duration(G).attr("transform","translate(0,"+B+")").call(al)});ak.select(".y-axis").each(function(){Y.select(this).select(".label").style({"text-anchor":"end","font-family":m,"font-size":E,fill:U}).text(J);Y.select(this).selectAll(".label").data([1]).enter().append("svg:text").classed("label",true).style({"text-anchor":"end","font-family":m,"font-size":E,fill:U}).attr({transform:"rotate(-90)",y:8,dy:".71em"}).text(J);Y.select(this).transition().duration(G).call(aj)});ak.selectAll(".axis").call(function(am){am.selectAll("path").style({fill:"none",stroke:A,"stroke-width":W,"shape-rendering":"crispEdges"});am.selectAll("line").style({fill:"none","stroke-dasharray":"3,1",stroke:Q,"shape-rendering":"crispEdges"})});ak.select(".x-axis").selectAll(".tick").select("text").style({"text-anchor":"middle","font-family":m,"font-size":L,fill:F}).attr("transform",function(){return"translate("+this.getComputedTextLength()*Math.abs(Math.sin(R)*0.5)+","+(this.getComputedTextLength()*(0.3*Math.abs(Math.sin(R))))+")rotate("+R+")"});ak.select(".y-axis").selectAll(".tick").select("text").style({"text-anchor":"start","font-family":m,"font-size":L,fill:F}).attr("transform",function(){return"translate("+-this.getComputedTextLength()+", 0)rotate("+o+")"})}function q(ak){var aj;if(typeof ak==="object"&&ak.constructor===Array){aj=ak.map(function(am){var al=am.points.points.map(function(ao){var an;var ap;ao.point.point.forEach(function(aq){if(aq.x!==undefined){an=aq.x}if(aq.y!==undefined){ap=aq.y}});return{x:""+an,y:ap}});return{name:am.name,points:al}})}return aj}v.size=function(aj){if(!arguments.length){return[l,n]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in multiline.size(width, height) should be number and number of svg");return this}else{l=arguments[0];n=arguments[1];return this}}};v.sizeAvail=function(aj){if(!arguments.length){return[x,B]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in multiline.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{x=arguments[0];B=arguments[1];return this}}};v.tran=function(aj){if(!arguments.length){return[ah,af]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in multiline.tran(tranX, tranY) should be number and number of svg");return this}else{ah=arguments[0];af=arguments[1];return this}}};v.fontSize=function(aj){if(!arguments.length){return fontSize}else{if(!isFinite(arguments[0])){console.error("The arguments in multiline.fontSize(fontSize) should be number of text");return this}else{fontSize=arguments[0];return this}}};v.fontFamily=function(aj){if(!arguments.length){return m}else{if(typeof arguments[0]!=="string"){console.error("The arguments in multiline.fontFamily(fontFamily) should be string of text");return this}else{fontSize=arguments[0];return this}}};v.duration=function(aj){if(!arguments.length){return G}else{if(!isFinite(arguments[0])){console.error("The arguments in multiline.duration(duration) should be number of transition");return this}else{G=Math.round(arguments[0]);return this}}};v.color=function(aj){if(!arguments.length){return K}else{if(typeof arguments[0]!=="function"){console.error("The arguments in multiline.color(color) should be function of pvisual.color");return this}else{K=arguments[0];return this}}};v.tickFormat=function(aj){if(!arguments.length){return O}else{if(typeof arguments[0]!=="string"){console.error("The arguments in multiline.tickFormat(format) should be string of d3.format");return this}else{O=Y.format(arguments[0]);return this}}};v.timeFormat=function(aj){if(!arguments.length){return S}else{if(typeof arguments[0]!=="string"){console.error("The arguments in multiline.timeFormat(format) should be string of d3.format");return this}else{S=Y.time.format(arguments[0]);return this}}};v.isLinear=function(aj){if(!arguments.length){return P}else{if(P!==true&&P!==false){console.error("The arguments in multiline.isLinear(isLinear) should be bool");return this}else{P=arguments[0];return this}}};v.xLegend=function(aj){if(!arguments.length){return H}else{if(typeof arguments[0]!=="string"){console.error("The arguments in multiline.xLegend(xLegend) should be string");return this}else{H=arguments[0];return this}}};v.yLegend=function(aj){if(!arguments.length){return J}else{if(typeof arguments[0]!=="string"){console.error("The arguments in multiline.yLegend(yLegend) should be string");return this}else{J=arguments[0];return this}}};v.xtickRotate=function(aj){if(!arguments.length){return R}else{if(!isFinite(arguments[0])){console.error("The arguments in multiline.xtickRotate(xtickRotate) should be number of tick");return this}else{R=Math.round(arguments[0]);return this}}};v.ytickRotate=function(aj){if(!arguments.length){return o}else{if(!isFinite(arguments[0])){console.error("The arguments in multiline.ytickRotate(ytickRotate) should be number of tick");return this}else{o=Math.round(arguments[0]);return this}}};v.labelSize=function(aj){if(!arguments.length){return E}else{if(!isFinite(arguments[0])){console.error("The arguments in multiline.labelSize(labelSize) should be string");return this}else{E=arguments[0];return this}}};v.labelColor=function(aj){if(!arguments.length){return U}else{if(typeof arguments[0]!=="string"){console.error("The arguments in multiline.labelColor(labelColor) should be string");return this}else{U=arguments[0];return this}}};v.tickLineColor=function(aj){if(!arguments.length){return Q}else{if(typeof arguments[0]!=="string"){console.error("The arguments in multiline.tickLineColor(tickLineColor) should be string");return this}else{Q=arguments[0];return this}}};v.tickTextSize=function(aj){if(!arguments.length){return L}else{if(!isFinite(arguments[0])){console.error("The arguments in multiline.tickTextSize(tickTextSize) should be number");return this}else{L=arguments[0];return this}}};v.tickTextColor=function(aj){if(!arguments.length){return F}else{if(typeof arguments[0]!=="string"){console.error("The arguments in multiline.tickTextColor(tickTextColor) should be string");return this}else{F=arguments[0];return this}}};v.xtickNumber=function(aj){if(!arguments.length){return V}else{if(!isFinite(arguments[0])){console.error("The arguments in multiline.xtickNumber(xtickNumber) should be number of tick");return this}else{V=Math.round(arguments[0]);return this}}};v.ytickNumber=function(aj){if(!arguments.length){return t}else{if(!isFinite(arguments[0])){console.error("The arguments in multiline.ytickNumber(ytickNumber) should be number of tick");return this}else{t=Math.round(arguments[0]);return this}}};v.axisPathWidth=function(aj){if(!arguments.length){return W}else{if(!isFinite(arguments[0])){console.error("The arguments in multiline.axisPathWidth(axisPathWidth) should be string");return this}else{W=arguments[0];return this}}};v.axisPathColor=function(aj){if(!arguments.length){return A}else{if(typeof arguments[0]!=="string"){console.error("The arguments in multiline.axisPathColor(axisPathColor) should be string");return this}else{A=arguments[0];return this}}};v.legendTran=function(aj){if(!arguments.length){return[N,M]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in multiline.legendTran(tranX, tranY) should be number and number of svg");return this}else{N=arguments[0];M=arguments[1];return this}}};v.legendSize=function(aj){if(!arguments.length){return u}else{if(!isFinite(arguments[0])){console.error("The arguments in multiline.legendSize(legendSize) should be number of text");return this}else{u=arguments[0];return this}}};v.legendColor=function(aj){if(!arguments.length){return r}else{if(typeof arguments[0]!=="string"){console.error("The arguments in multiline.legendColor(legendColor) should be string of text");return this}else{r=arguments[0];return this}}};v.legendColumnNo=function(aj){if(!arguments.length){return w}else{if(!isFinite(arguments[0])){console.error("The arguments in multiline.legendColumnNo(legendColumnNo) should be number of text");return this}else{w=arguments[0];return this}}};v.legendRowGap=function(aj){if(!arguments.length){return z}else{if(!isFinite(arguments[0])){console.error("The arguments in multiline.legendRowGap(legendRowGap) should be number of text");return this}else{z=arguments[0];return this}}};v.tension=function(aj){if(!arguments.length){return ag}else{if(!isFinite(arguments[0])){console.error("The arguments in multiline.tension(tension) should be number");return this}else{ag=arguments[0];return this}}};v.interpolate=function(aj){if(!arguments.length){return ac}else{if(typeof arguments[0]!=="string"){console.error("The arguments in multiline.interpolate(interpolate) should be string");return this}else{ac=arguments[0];return this}}};v.options=function(aj){if(!arguments.length){return{type:v.getType(),width:l,height:n,widthAvail:x,heightAvail:B,tranX:ah,tranY:af,format:O,fontFamily:m,color:K,duration:G,interpolate:ac,tension:ag,timeFormat:S,isLinear:P,xLegend:H,yLegend:J,xtickRotate:R,ytickRotate:o,labelSize:E,labelColor:U,xtickNumber:V,ytickNumber:t,tickTextSize:L,tickTextColor:F,tickLineColor:Q,xtickLineLength:Z,ytickLineLength:I,axisPathWidth:W,axisPathColor:A,legendColor:r,legendSize:u,legendTranX:N,legendTranY:M,legendColumnNo:w,legendRowGap:z}}else{if(typeof aj!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{l=isFinite(aj.width)?aj.width:l;n=isFinite(aj.height)?aj.height:n;x=isFinite(aj.widthAvail)?aj.widthAvail:x;B=isFinite(aj.heightAvail)?aj.heightAvail:B;ah=isFinite(aj.tranX)?aj.tranX:ah;af=isFinite(aj.tranY)?aj.tranY:af;aj.format&&v.tickFormat(aj.format);aj.fontFamily&&v.fontFamily(aj.fontFamily);isFinite(aj.duration)&&v.duration(aj.duration);isFinite(aj.tension)&&v.tension(aj.tension);aj.isLinear&&v.isLinear(aj.isLinear);aj.interpolate&&v.interpolate(aj.interpolate);aj.xLegend&&v.xLegend(aj.xLegend);aj.yLegend&&v.yLegend(aj.yLegend);isFinite(aj.xtickRotate)&&v.xtickRotate(aj.xtickRotate);isFinite(aj.ytickRotate)&&v.ytickRotate(aj.ytickRotate);isFinite(aj.labelSize)&&v.labelSize(aj.labelSize);aj.labelColor&&v.labelColor(aj.labelColor);isFinite(aj.xtickNumber)&&v.xtickNumber(aj.xtickNumber);isFinite(aj.ytickNumber)&&v.ytickNumber(aj.ytickNumber);isFinite(aj.tickTextSize)&&v.tickTextSize(aj.tickTextSize);aj.tickTextColor&&v.tickTextColor(aj.tickTextColor);aj.tickLineColor&&v.tickLineColor(aj.tickLineColor);isFinite(aj.xtickLineLength)&&v.xtickLineLength(aj.xtickLineLength);isFinite(aj.ytickLineLength)&&v.ytickLineLength(aj.ytickLineLength);isFinite(aj.axisPathWidth)&&v.axisPathWidth(aj.axisPathWidth);aj.axisPathColor&&v.axisPathColor(aj.axisPathColor);aj.legendColor&&v.legendColor(aj.legendColor);isFinite(aj.legendSize)&&v.legendSize(aj.legendSize);N=isFinite(aj.legendTranX)?aj.legendTranX:N;M=isFinite(aj.legendTranY)?aj.legendTranY:M;isFinite(aj.legendColumnNo)&&v.legendColumnNo(aj.legendColumnNo);isFinite(aj.legendRowGap)&&v.legendRowGap(aj.legendRowGap);return this}}};if(arguments.length===1){v.options(arguments[0])}return v};h.model.parallel=function(){var O=h.extend();var P=i.d3;var w="平行坐标系";var F=800;var B=400;var E=F-10;var C=B-20;var J=10;var H=10;var Q;var v=8;var M="Arial";var p="#000000";var z;var A;var D;var m=1000;var I=P.format("s");var G=O.color();var N;var o=function(S,R){return G(S.name)};var l=function(S,R){return 1};var y=function(S,R){return"#EEEEEE"};var L=0;var t=5;var u=5;var s=8;var K="#929292";var x="#929292";var n=2;var r="#000000";O.data=function(S){if(arguments.length){if(S.type==="xml"){S=S.root;S=S.map(function(W){var V={};W.row.row.forEach(function(Y){var X=h.keys(Y)[0];V[X]=Y[X]});return V})}else{if(S.type==="xlsx"||S.type==="xls"){var U=[];for(var T=0;T<S.length;T++){var R=h.keys(S[T])[0];U=U.concat(S[T][R])}S=U}}N=h.keys(S[0]).filter(function(V){return V!=="name"});N.x=P.set(S.map(function(V){return V.name}));N.x=N.x.values();Q=S;return this}else{return Q}};O.getType=function(){return w};O.render=function(U){A=A||P.select(U).node();if(!A||A.tagName.toLowerCase()!=="div"){console.error("The argument(element) in parallel.rander(_) should be <div> element")}P.select(A).classed("chart",true);D=D||P.select(A).append("svg").classed("parallel",true).node();var R=P.scale.ordinal().rangePoints([0,E],1).domain(N);var Y={};var S=P.svg.line();N.forEach(function(Z){Y[Z]=P.scale.linear().domain(P.extent(Q,function(aa){return +aa[Z]})).range([C,0])});N.forEach(function(Z){Y[Z].brush=P.svg.brush().y(Y[Z]).on("brush",T);Y[Z].yAxis=P.svg.axis().orient("left").scale(Y[Z]).ticks(t).tickSize(u).tickFormat(I)});z=P.select(A).select(".floatTag").node()?P.select(A).select(".floatTag"):O.floatTag(A);var W=P.select(D).attr({width:F,height:B}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+J+","+H+")");W.call(function(Z){Z.append("svg:g").classed("dimensions",true);Z.append("svg:g").classed("y-axis axis",true)});W=P.select(D).select("g");var V=W.select(".dimensions").style({fill:"none","stroke-opacity":"0.2","shape-rendering":"crispEdges"}).selectAll("path").data(Q);V.exit().transition().duration(m).style("opacity",0).remove();V.transition().duration(m).style("stroke",o).style("stroke-width",l).attr("d",X);V.enter().append("svg:path").style("stroke",o).style("stroke-width",l).attr("d",X);q(W,R,Y);function X(Z){return S(N.map(function(aa){return[R(aa),Y[aa](+Z[aa])]}))}function T(){var ab=N.filter(function(ad){return !Y[ad].brush.empty()});var aa=ab.map(function(ad){return Y[ad].brush.extent()});var Z=[];ab.forEach(function(ae,ad){Z[ad]={dimension:ae,extent:aa[ad]}});var ac=[];P.select(D).select(".dimensions").selectAll("path").style("stroke",function(ae){var ad=ab.every(function(ag,af){return aa[af][0]<=ae[ag]&&ae[ag]<=aa[af][1]});if(ad){ac.push(ae)}return ad?o(ae):y(ae)})}};function q(T,R,U){var S=T.select(".y-axis").selectAll(".y").data(N);S.exit().transition().duration(m).style("opacity",0).remove();S.transition().duration(m).attr("transform",function(V){return"translate("+R(V)+",0)"}).each(function(V){P.select(this).call(U[V].yAxis).select(".brush").call(U[V].brush)});S.enter().append("svg:g").classed("y",true).attr("transform",function(V){return"translate("+R(V)+",0)"}).each(function(V){P.select(this).call(U[V].yAxis).append("svg:g").classed("brush",true).call(U[V].brush).selectAll("rect").attr("x",-8).attr("width",16).style({"fill-opacity":0.3,stroke:"#FFFFFF","shape-rendering":"crispEdges"})});T.select(".y-axis").selectAll(".y").each(function(V){P.select(this).select(".label").style({"text-anchor":"end","font-family":M,"font-size":v,fill:p}).text(V);P.select(this).selectAll(".label").data([1]).enter().append("svg:text").classed("label",true).style({"text-anchor":"end","font-family":M,"font-size":v,fill:p}).attr({transform:"rotate(-90)",y:8,dy:".71em"}).text(V)});T.selectAll(".axis").call(function(V){V.selectAll("path").style({fill:"none",stroke:r,"stroke-width":n,"shape-rendering":"crispEdges"});V.selectAll("line").style({fill:"none",stroke:x,"shape-rendering":"crispEdges"})});T.select(".y-axis").selectAll(".tick").select("text").style({"text-anchor":"start","font-family":M,"font-size":s,fill:K}).attr("transform",function(){return"translate("+-this.getComputedTextLength()+", 0)rotate("+L+")"})}O.size=function(R){if(!arguments.length){return[F,B]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in parallel.size(width, height) should be number and number of svg");return this}else{F=arguments[0];B=arguments[1];return this}}};O.sizeAvail=function(R){if(!arguments.length){return[E,C]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in parallel.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{E=arguments[0];C=arguments[1];return this}}};O.tran=function(R){if(!arguments.length){return[J,H]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in parallel.tran(tranX, tranY) should be number and number of svg");return this}else{J=arguments[0];H=arguments[1];return this}}};O.fontSize=function(R){if(!arguments.length){return v}else{if(!isFinite(arguments[0])){console.error("The arguments in parallel.fontSize(fontSize) should be number of text");return this}else{v=arguments[0];return this}}};O.fontFamily=function(R){if(!arguments.length){return M}else{if(typeof arguments[0]!=="string"){console.error("The arguments in parallel.fontFamily(fontFamily) should be string of text");return this}else{v=arguments[0];return this}}};O.fontColor=function(R){if(!arguments.length){return p}else{if(typeof arguments[0]!=="string"){console.error("The arguments in parallel.fontColor(fontColor) should be string of text");return this}else{p=arguments[0];return this}}};O.duration=function(R){if(!arguments.length){return m}else{if(!isFinite(arguments[0])){console.error("The arguments in parallel.duration(duration) should be number of transition");return this}else{m=Math.round(arguments[0]);return this}}};O.color=function(R){if(!arguments.length){return G}else{if(typeof arguments[0]!=="function"){console.error("The arguments in parallel.color(color) should be function of pvisual.color");return this}else{G=arguments[0];return this}}};O.tickFormat=function(R){if(!arguments.length){return I}else{if(typeof arguments[0]!=="string"){console.error("The arguments in parallel.tickFormat(format) should be string of d3.format");return this}else{I=P.format(arguments[0]);return this}}};O.ytickRotate=function(R){if(!arguments.length){return L}else{if(!isFinite(arguments[0])){console.error("The arguments in parallel.ytickRotate(ytickRotate) should be number of tick");return this}else{L=Math.round(arguments[0]);return this}}};O.ytickNumber=function(R){if(!arguments.length){return t}else{if(!isFinite(arguments[0])){console.error("The arguments in parallel.ytickNumber(ytickNumber) should be number of tick");return this}else{t=Math.round(arguments[0]);return this}}};O.tickLineColor=function(R){if(!arguments.length){return x}else{if(typeof arguments[0]!=="string"){console.error("The arguments in parallel.tickLineColor(tickLineColor) should be string");return this}else{x=arguments[0];return this}}};O.tickTextSize=function(R){if(!arguments.length){return s}else{if(!isFinite(arguments[0])){console.error("The arguments in parallel.tickTextSize(tickTextSize) should be number");return this}else{s=arguments[0];return this}}};O.tickTextColor=function(R){if(!arguments.length){return K}else{if(typeof arguments[0]!=="string"){console.error("The arguments in parallel.tickTextColor(tickTextColor) should be string");return this}else{K=arguments[0];return this}}};O.axisPathWidth=function(R){if(!arguments.length){return n}else{if(!isFinite(arguments[0])){console.error("The arguments in parallel.axisPathWidth(axisPathWidth) should be string");return this}else{n=arguments[0];return this}}};O.axisPathColor=function(R){if(!arguments.length){return r}else{if(typeof arguments[0]!=="string"){console.error("The arguments in parallel.axisPathColor(axisPathColor) should be string");return this}else{r=arguments[0];return this}}};O.lineColor=function(R){if(!arguments.length){return o}else{if(typeof arguments[0]!=="function"&&typeof arguments[0]!=="string"){console.error("The arguments in parallel.lineColor(lineColor) should be function or string");return this}else{o=P.functor(arguments[0]);return this}}};O.backColor=function(R){if(!arguments.length){return y}else{if(typeof arguments[0]!=="function"&&typeof arguments[0]!=="string"){console.error("The arguments in parallel.backColor(backColor) should be function or string");return this}else{y=P.functor(arguments[0]);return this}}};O.lineWidth=function(R){if(!arguments.length){return l}else{if(typeof arguments[0]!=="function"&&!isFinite(arguments[0])){console.error("The arguments in parallel.lineWidth(lineWidth) should be function or number");return this}else{l=P.functor(arguments[0]);return this}}};O.options=function(R){if(!arguments.length){return{type:O.getType(),width:F,height:B,widthAvail:E,heightAvail:C,tranX:J,tranY:H,format:I,fontSize:v,fontColor:p,fontFamily:M,color:G,duration:m,lineColor:o,lineWidth:l,backColor:y,ytickRotate:L,ytickNumber:t,tickTextSize:s,tickTextColor:K,tickLineColor:x,ytickLineLength:u,axisPathWidth:n,axisPathColor:r}}else{if(typeof R!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{F=isFinite(R.width)?R.width:F;B=isFinite(R.height)?R.height:B;E=isFinite(R.widthAvail)?R.widthAvail:E;C=isFinite(R.heightAvail)?R.heightAvail:C;J=isFinite(R.tranX)?R.tranX:J;H=isFinite(R.tranY)?R.tranY:H;R.format&&O.tickFormat(R.format);R.fontFamily&&O.fontFamily(R.fontFamily);R.fontColor&&O.fontColor(R.fontColor);isFinite(R.fontSize)&&O.fontSize(R.fontSize);isFinite(R.duration)&&O.duration(R.duration);R.lineColor&&O.lineColor(R.lineColor);R.lineWidth&&O.lineWidth(R.lineWidth);R.backColor&&O.backColor(R.backColor);isFinite(R.tickTextSize)&&O.tickTextSize(R.tickTextSize);R.tickTextColor&&O.tickTextColor(R.tickTextColor);R.tickLineColor&&O.tickLineColor(R.tickLineColor);isFinite(R.ytickRotate)&&O.ytickRotate(R.ytickRotate);isFinite(R.ytickNumber)&&O.ytickNumber(R.ytickNumber);isFinite(R.ytickLineLength)&&O.ytickLineLength(R.ytickLineLength);isFinite(R.axisPathWidth)&&O.axisPathWidth(R.axisPathWidth);R.axisPathColor&&O.axisPathColor(R.axisPathColor);return this}}};if(arguments.length===1){O.options(arguments[0])}return O};h.model.pie=function(){var w=h.extend();var R=i.d3;var p="饼图";var E=900;var z=700;var D=E;var A=z;var O=0;var M=0;var S;var o=10;var P="Arial";var n="#000";var v;var x;var B;var l=1000;var N=R.format("s");var K=w.color();var I="bounce";var s=0;var H=Math.min(D,A)*0.42;var C="#000000";var J=13;var G=0;var F=0;var Q=10;var L=100;w.data=function(V){if(arguments.length){if(V.type==="xml"){V=V.root;V=V.map(function(Z){var Y={};Z.row.row.forEach(function(ab){var aa=h.keys(ab)[0];Y[aa]=ab[aa]});return Y})}else{if(V.type==="xlsx"||V.type==="xls"){var X=[];for(var W=0;W<V.length;W++){var U=h.keys(V[W])[0];X=X.concat(V[W][U])}V=X}}S=V.map(function(Z,Y){return{index:Y,value:+Z.value,data:+Z.value,name:Z.name,_flag:true}});return this}else{return S}};w.getType=function(){return p};w.render=function(V){x=x||R.select(V).node();if(!x||x.tagName.toLowerCase()!=="div"){w.log({priority:"Error",position:"pie",info:"The argument(element) in pie.rander(_) should be <div> element"});console.error("The argument(element) in pie.rander(_) should be <div> element")}R.select(x).classed("chart",true);B=B||R.select(x).append("svg").classed("pie",true).node();v=R.select(x).select(".floatTag").node()?R.select(x).select(".floatTag"):w.floatTag(x);var Z=R.layout.pie().value(function(ab){return ab.value}).sort(function(ac,ab){return ab.value-ac.value});var W=R.svg.arc().innerRadius(s).outerRadius(H);var Y=R.select(B).attr({width:E,height:z}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+(O+H*1.2)+","+(M+H*1.2)+")");Y.call(function(ab){ab.append("svg:g").classed("arcs",true);ab.append("svg:g").classed("labels",true);ab.append("svg:g").classed("legends",true)});Y=R.select(B).select("g");var X=Y.select(".arcs").datum(S.filter(function(ab){return ab._flag})).selectAll("path").data(Z);X.exit().attr("opacity",1).transition().duration(l).attr("opacity",0).remove();u(X,W);t(X,Y,W);var aa=Y.select(".labels").datum(S.filter(function(ab){return ab._flag})).selectAll(".label").data(Z);aa.exit().attr("opacity",1).transition().duration(l).attr("opacity",0).remove();r(aa);q(aa);var U=Y.select(".legends").attr("transform","translate("+G+","+F+")").selectAll(".legend").data(S);U.exit().transition().duration(l).style("opacity",0).remove();T(U);y(U)};function u(V,U){V.transition().duration(l).attrTween("d",function(Y){var W=R.interpolate(+R.select(this).attr("data-startAngle"),Y.startAngle);var X=R.interpolate(+R.select(this).attr("data-endAngle"),Y.endAngle);return function(Z){return U({startAngle:X(Z),endAngle:W(Z)})}}).attr("fill",function(W){return K(W.data.index)}).attr("data-startAngle",function(W){return W.startAngle}).attr("data-endAngle",function(W){return W.endAngle})}function t(W,V,U){W.enter().append("svg:path").attr("fill",function(X){return K(X.data.index)}).attr("opacity",0).on("mouseover",function(X){m(X.data,true)}).on("mouseout",function(X){m(X.data,false)}).on("click",function(ad){var aa=this;var Y=V.select(".labels").selectAll(".label");var ab=V.select(".arcs").selectAll("path");if(!R.select(this).classed("out")){R.select(this).classed("out",true);var ac=0.5*((ad.startAngle+ad.endAngle)-Math.PI);var X={x:H*0.1*Math.cos(ac),y:H*0.1*Math.sin(ac)};Y.each(function(ae){if(ae.data.index===ad.data.index){R.select(this).transition().duration(l/2).ease(I).attr("transform","rotate("+((ad.endAngle+ad.startAngle)*90/Math.PI-87)+")translate("+H*1.2+",0)")}});R.select(this).transition().duration(l/2).ease(I).attr("opacity",1).attr("transform","translate("+(X.x)+", "+(X.y)+")");ab.filter(function(){return this!==aa}).transition().duration(l/2).attr("opacity",function(){return R.select(this).classed("out")?1:0.3})}else{R.select(this).classed("out",false);Y.each(function(ae){if(ae.data.index===ad.data.index){R.select(this).transition().duration(l/2).ease(I).attr("transform","rotate("+((ad.endAngle+ad.startAngle)*90/Math.PI-87)+")translate("+H+",0)")}});var Z=V.select(".arcs").selectAll(".out").node()?true:false;R.select(this).transition().duration(l/2).ease(I).attr("transform","").attr("opacity",Z?0.3:1);ab.filter(function(){return this!==aa}).transition().duration(l/2).attr("opacity",function(){return !Z?1:R.select(this).classed("out")?1:0.3})}}).transition().duration(l).attrTween("d",function(Y){var X=R.interpolate(Y.startAngle,Y.endAngle);return function(Z){return U({startAngle:Y.startAngle,endAngle:X(Z)})}}).attr("opacity",1).attr("data-startAngle",function(X){return X.startAngle}).attr("data-endAngle",function(X){return X.endAngle})}function r(U){U.transition().duration(l).attrTween("transform",function(W){var V=R.interpolate(+R.select(this).attr("data-Angle"),W.endAngle+W.startAngle);return function(X){return"rotate("+(V(X)*90/Math.PI-87)+")translate("+H+",0)"}}).attr("data-Angle",function(V){return V.endAngle+V.startAngle}).select("text").style("text-anchor",function(V){return(V.endAngle+V.startAngle)/2>Math.PI?"end":null}).attr("transform",function(V){return(V.endAngle+V.startAngle)/2>Math.PI?"rotate(180)translate(-16)":null}).style({"font-family":P,fill:n,"font-size":o}).text(function(V){return V.endAngle-V.startAngle>0.03?V.data.name:"..."})}function q(U){U.enter().append("svg:g").classed("label",true).style({"font-family":P,fill:n,"font-size":o}).attr("transform",function(V){return"rotate("+((V.endAngle+V.startAngle)*90/Math.PI-87)+")translate("+H+",0)"}).attr("data-Angle",function(V){return V.endAngle+V.startAngle}).append("svg:text").attr("opacity",0).style("text-anchor",function(V){return(V.endAngle+V.startAngle)/2>Math.PI?"end":null}).attr("transform",function(V){return(V.endAngle+V.startAngle)/2>Math.PI?"rotate(180)translate(-16)":null}).transition().duration(l).ease("exp").attr({x:8,dy:20}).style("opacity",1).text(function(V){return V.endAngle-V.startAngle>0.03?V.data.name:"..."})}function T(U){U.each(function(V){R.select(this).select("rect").transition().duration(l).style("fill-opacity",V._flag?1:0).attr({x:(V.index-V.index%Q)/Q*L+H,y:V.index%Q*20-H*1.1-9}).style({fill:K(V.index),stroke:K(V.index)});R.select(this).select("text").transition().duration(l).attr({x:(V.index-V.index%Q)/Q*L+H+20,y:V.index%Q*20-H*1.1}).style({"font-size":J,fill:C,"font-family":P}).text(V.name)})}function y(U){U.enter().append("svg:g").classed("legend",true).style("cursor","pointer").on("click",function(V){if(!R.select(this).classed("none")){R.select(this).classed("none",true);V._flag=false}else{R.select(this).classed("none",false);V._flag=true}w.render(S)}).each(function(V){R.select(this).append("svg:rect").attr({x:(V.index-V.index%Q)/Q*L+H,y:V.index%Q*20-H*1.1-9}).attr({width:10,height:10}).style({fill:K(V.index),stroke:K(V.index)}).style("fill-opacity",1).style("opacity",0).transition().duration(l).style("fill-opacity",V._flag?1:0).style("opacity",1);R.select(this).append("svg:text").attr({x:(V.index-V.index%Q)/Q*L+H+20,y:V.index%Q*20-H*1.1}).style({opacity:0,"font-size":J,fill:C,"font-family":P}).transition().duration(l).style("opacity",1).text(V.name)})}function m(V,U){if(U){v.style({"border-color":K(V.name),opacity:1,textAlign:"center",margin:"auto"}).html('<p style="color:#3f7ed8; font-weight:bold; font-size:11px;margin-bottom:5px;">name: '+V.name+"</p>value: "+N(V.value))}else{v.style("opacity",0)}}w.size=function(U){if(!arguments.length){return[E,z]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in pie.size(width, height) should be number and number of svg");return this}else{E=arguments[0];z=arguments[1];return this}}};w.sizeAvail=function(U){if(!arguments.length){return[D,A]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in pie.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{D=arguments[0];A=arguments[1];return this}}};w.tran=function(U){if(!arguments.length){return[O,M]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in pie.tran(tranX, tranY) should be number and number of svg");return this}else{O=arguments[0];M=arguments[1];return this}}};w.fontSize=function(U){if(!arguments.length){return o}else{if(!isFinite(arguments[0])){console.error("The arguments in pie.fontSize(fontSize) should be number of text");return this}else{o=arguments[0];return this}}};w.fontFamily=function(U){if(!arguments.length){return P}else{if(typeof arguments[0]!=="string"){console.error("The arguments in pie.fontFamily(fontFamily) should be string of text");return this}else{o=arguments[0];return this}}};w.fontColor=function(U){if(!arguments.length){return n}else{if(typeof arguments[0]!=="string"){console.error("The arguments in pie.fontColor(fontColor) should be string of text");return this}else{n=arguments[0];return this}}};w.duration=function(U){if(!arguments.length){return l}else{if(!isFinite(arguments[0])){console.error("The arguments in pie.duration(duration) should be number of transition");return this}else{l=Math.round(arguments[0]);return this}}};w.color=function(U){if(!arguments.length){return K}else{if(typeof arguments[0]!=="function"){console.error("The arguments in pie.color(color) should be function of pvisual.color");return this}else{K=arguments[0];return this}}};w.tickFormat=function(U){if(!arguments.length){return N}else{if(typeof arguments[0]!=="string"){console.error("The arguments in pie.tickFormat(format) should be string of d3.format");return this}else{N=R.format(arguments[0]);return this}}};w.legendTran=function(U){if(!arguments.length){return[G,F]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in pie.legendTran(tranX, tranY) should be number and number of svg");return this}else{G=arguments[0];F=arguments[1];return this}}};w.legendSize=function(U){if(!arguments.length){return J}else{if(!isFinite(arguments[0])){console.error("The arguments in pie.legendSize(legendSize) should be number of text");return this}else{J=arguments[0];return this}}};w.legendColor=function(U){if(!arguments.length){return C}else{if(typeof arguments[0]!=="string"){console.error("The arguments in pie.legendColor(legendColor) should be string of text");return this}else{C=arguments[0];return this}}};w.legendColumnNo=function(U){if(!arguments.length){return Q}else{if(!isFinite(arguments[0])){console.error("The arguments in pie.legendColumnNo(legendColumnNo) should be number of text");return this}else{Q=arguments[0];return this}}};w.ease=function(U){if(!arguments.length){return I}else{if(typeof arguments[0]!=="string"){console.error("The arguments in pie.ease(ease) should be string");return this}else{I=arguments[0];return this}}};w.outerRadius=function(U){if(!arguments.length){return H}else{if(!isFinite(arguments[0])){console.error("The arguments in pie.outerRadius(outerRadius) should be number of");return this}else{H=Math.round(arguments[0]);return this}}};w.innerRadius=function(U){if(!arguments.length){return s}else{if(!isFinite(arguments[0])){console.error("The arguments in pie.innerRadius(innerRadius) should be number");return this}else{s=Math.round(arguments[0]);return this}}};w.options=function(U){if(!arguments.length){return{type:w.getType(),width:E,height:z,widthAvail:D,heightAvail:A,tranX:O,tranY:M,format:N,fontSize:o,fontColor:n,fontFamily:P,color:K,duration:l,outerRadius:H,innerRadius:s,ease:I,legendColor:C,legendSize:J,legendTranX:G,legendTranY:F,legendColumnNo:Q,legendRowGap:L}}else{if(typeof U!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{E=isFinite(U.width)?U.width:E;z=isFinite(U.height)?U.height:z;D=isFinite(U.widthAvail)?U.widthAvail:D;A=isFinite(U.heightAvail)?U.heightAvail:A;O=isFinite(U.tranX)?U.tranX:O;M=isFinite(U.tranY)?U.tranY:M;U.format&&w.tickFormat(U.format);U.fontFamily&&w.fontFamily(U.fontFamily);U.fontColor&&w.fontColor(U.fontColor);isFinite(U.fontSize)&&w.fontSize(U.fontSize);isFinite(U.duration)&&w.duration(U.duration);U.ease&&w.ease(U.ease);isFinite(U.innerRadius)&&w.innerRadius(U.innerRadius);isFinite(U.outerRadius)&&w.outerRadius(U.outerRadius);U.legendColor&&w.legendColor(U.legendColor);isFinite(U.legendSize)&&w.legendSize(U.legendSize);G=isFinite(U.legendTranX)?U.legendTranX:G;F=isFinite(U.legendTranY)?U.legendTranY:F;isFinite(U.legendColumnNo)&&w.legendColumnNo(U.legendColumnNo);isFinite(U.legendRowGap)&&w.legendRowGap(U.legendRowGap);return this}}};if(arguments.length===1){w.options(arguments[0])}return w};h.model.radar=function(){var t=h.extend();var V=i.d3;var ac="雷达图";var l=700;var n=700;var y=l;var B=n;var ab=0;var aa=0;var X;var C=10;var m="Arial";var N="#737373";var u=13;var W;var o;var G=1000;var L=V.format(".2s");var I=t.color();var T;var x;var R;var Q=6;var Z="grey";var J=8;var F="#929292";var U=1;var A="#CCCCCC";var r="#000000";var u=13;var M=0;var K=0;var v=10;var z=100;t.data=function(ae){if(arguments.length){if(ae.type==="csv"||ae.type==="tsv"){ae=ae.map(function(ai){var ah=[];ah=h.keys(ai).filter(function(aj){return aj!=="name"}).map(function(aj){return{axis:aj,value:+ai[aj]}});return{name:ai.name,data:ah}})}else{if(ae.type==="xml"){ae=ae.root;ae=ae.map(function(ai){var ah={};ai.row.row.forEach(function(ak){var aj=h.keys(ak)[0];ah[aj]=ak[aj]});return ah});ae=p(ae)}else{if(ae.type==="xlsx"||ae.type==="xls"){var ag=[];for(var af=0;af<ae.length;af++){var ad=h.keys(ae[af])[0];ag=ag.concat(ae[af][ad])}ae=ag;ae=ae.map(function(ai){var ah=[];ah=h.keys(ai).filter(function(aj){return aj!=="name"}).map(function(aj){return{axis:aj,value:+ai[aj]}});return{name:ai.name,data:ah}})}}}ae.forEach(function(ah){ah._flag=true});X=ae;return this}else{return X}};t.getType=function(){return ac};t.render=function(ah){W=W||V.select(ah).node();if(!W||W.tagName.toLowerCase()!=="div"){console.error("The argument(element) in radar.rander(_) should be <div> element")}V.select(W).classed("chart",true);o=o||V.select(W).append("svg").classed("radar",true).node();T=Math.min(y,B)*0.4;x=V.max(X,function(al){if(al._flag){return V.max(al.data.map(function(am){return am.value}))}else{return 0}});R=V.set();X.forEach(function(al){al.data.forEach(function(am){R.add(am.axis)})});R=R.values();X.forEach(function(al){al.data.forEach(function(am){am.index=R.indexOf(am.axis)})});X.forEach(function(al){al.data.forEach(function(am){am.position=[y/2-T*((parseFloat(Math.max(am.value,0))/x)*Math.sin(am.index*2*Math.PI/R.length)),B/2-T*((parseFloat(Math.max(am.value,0))/x)*Math.cos(am.index*2*Math.PI/R.length))]})});var aj=V.select(o).attr({width:l,height:n}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+ab+","+aa+")");aj.call(function(al){al.append("svg:g").classed("levels",true);al.append("svg:g").classed("ticks",true);al.append("svg:g").classed("items",true);al.append("svg:g").classed("axises",true);al.append("svg:g").classed("legends",true)});aj=V.select(o).select("g");var ag=aj.select(".items").selectAll(".item").data(X.filter(function(al){return al._flag}));ag.exit().transition().duration(G/2).style("opacity",0).remove();var ak=aj.select(".items").selectAll(".mark").data([1]).enter().append("svg:text").classed("mark",true).style({opacity:0,"font-family":m,fill:N,"font-size":C});H(ag,ak);s(ag,ak);var ae=aj.select(".levels").selectAll(".level").data(V.range(Q));ae.exit().transition().duration(G/2).style("opacity",0).remove();O(ae);q(ae);var ai=aj.select(".ticks").selectAll(".tick").data(V.range(Q));ai.exit().transition().duration(G/2).style("opacity",0).remove();D(ai);E(ai);var af=aj.select(".axises").selectAll(".axis").data(R);af.exit().transition().duration(G/2).style("opacity",0).remove();S(af);w(af);var ad=aj.select(".legends").attr("transform","translate("+M+","+K+")").selectAll(".legend").data(X);ad.exit().transition().duration(G/2).style("opacity",0).remove();P(ad);Y(ad)};function s(ae,af){var ad=V.svg.line().x(function(ag){return ag.position[0]}).y(function(ag){return ag.position[1]});ae.enter().append("svg:g").classed("item",true).each(function(ai,ag){V.select(this).append("svg:path").classed("radar",true).on("mouseover",function(){var aj=this;ae.selectAll(".radar").each(function(){if(this!==aj){V.select(this).transition(200).style("fill-opacity",0.1)}else{V.select(aj).transition(200).style("fill-opacity",0.7)}})}).on("mouseout",function(){ae.selectAll(".radar").transition(200).style("fill-opacity",0.5)}).style({"stroke-width":"2px","fill-opacity":0,"stroke-opacity":0,stroke:I(ag),fill:I(ag)}).transition().duration(G).style({"fill-opacity":0.5,"stroke-opacity":1}).attr("d",function(){var aj=t.clone(ai.data);aj.push(aj[0]);return ad(aj)});var ah=V.select(this).append("svg:g").classed("nodes",true).selectAll(".node").data(ai.data);ah.exit().transition().duration(G/2).style("opacity",0).remove();ah.enter().append("svg:circle").classed("node",true).style({fill:I(ag),"fill-opacity":0}).on("mouseover",function(ak){var aj=this;ae.selectAll(".radar").each(function(){if(this!==aj){V.select(this).transition(200).style("fill-opacity",0.1)}else{V.select(aj).transition(200).style("fill-opacity",0.7)}});af.attr("x",parseFloat(V.select(aj).attr("cx"))-10).attr("y",parseFloat(V.select(aj).attr("cy"))-5).text(L(ak.value)).transition(200).style("opacity",1)}).on("mouseout",function(){ae.selectAll(".radar").transition(200).style("fill-opacity",0.5);af.transition(200).style("opacity",0)}).transition().duration(G).style("fill-opacity",0.9).attr("r",4).attr("cx",function(aj){return aj.position[0]}).attr("cy",function(aj){return aj.position[1]}).attr("data-id",function(aj){return aj.axis})})}function H(ae,af){var ad=V.svg.line().x(function(ag){return ag.position[0]}).y(function(ag){return ag.position[1]});ae.each(function(ai,ag){V.select(this).selectAll(".radar").transition().duration(G).style({stroke:I(ag),fill:I(ag)}).attr("d",function(){var aj=t.clone(ai.data);aj.push(aj[0]);return ad(aj)});var ah=V.select(this).selectAll(".nodes").selectAll(".node").data(ai.data);ah.exit().transition().duration(G/2).style("opacity",0).remove();ah.transition().duration(G).style("fill",I(ag)).attr("r",4).attr("cx",function(aj){return aj.position[0]}).attr("cy",function(aj){return aj.position[1]}).attr("data-id",function(aj){return aj.axis});ah.enter().append("svg:circle").classed("node",true).style({fill:I(ag),"fill-opacity":0}).on("mouseover",function(ak){var aj=this;ae.selectAll(".radar").each(function(){if(this!==aj){V.select(this).transition(200).style("fill-opacity",0.1)}else{V.select(aj).transition(200).style("fill-opacity",0.7)}});af.attr("x",parseFloat(V.select(aj).attr("cx"))-10).attr("y",parseFloat(V.select(aj).attr("cy"))-5).text(L(ak.value)).transition(200).style("opacity",1)}).on("mouseout",function(){ae.selectAll(".radar").transition(200).style("fill-opacity",0.5);af.transition(200).style("opacity",0)}).transition().duration(G).style("fill-opacity",0.9).attr("r",4).attr("cx",function(aj){return aj.position[0]}).attr("cy",function(aj){return aj.position[1]}).attr("data-id",function(aj){return aj.axis})})}function q(ad){ad.enter().append("svg:g").classed("level",true).each(function(ag){var af=T*(++ag/Q);var ae=V.select(this).selectAll(".line").data(R);ae.exit().transition().duration(G/2).style("opacity",0).remove();ae.enter().append("svg:line").classed("line",true).style({stroke:Z,"stroke-dasharray":"3,1","stroke-opacity":"0","stroke-width":1}).transition().duration(G).attr("x1",function(ai,ah){return y/2-af*Math.sin(ah*2*Math.PI/R.length)}).attr("y1",function(ai,ah){return B/2-af*Math.cos(ah*2*Math.PI/R.length)}).attr("x2",function(ai,ah){return y/2-af*Math.sin((ah+1)*2*Math.PI/R.length)}).attr("y2",function(ai,ah){return B/2-af*Math.cos((ah+1)*2*Math.PI/R.length)}).style("stroke-opacity",0.75)})}function O(ad){ad.each(function(ag){var af=T*(++ag/Q);var ae=V.select(this).selectAll(".line").data(R);ae.exit().transition().duration(G/2).style("opacity",0).remove();ae.transition().duration(G).attr("x1",function(ai,ah){return y/2-af*Math.sin(ah*2*Math.PI/R.length)}).attr("y1",function(ai,ah){return B/2-af*Math.cos(ah*2*Math.PI/R.length)}).attr("x2",function(ai,ah){return y/2-af*Math.sin((ah+1)*2*Math.PI/R.length)}).attr("y2",function(ai,ah){return B/2-af*Math.cos((ah+1)*2*Math.PI/R.length)});ae.enter().append("svg:line").classed("line",true).style({stroke:Z,"stroke-dasharray":"3,1","stroke-opacity":"0","stroke-width":1}).transition().duration(G).attr("x1",function(ai,ah){return y/2-af*Math.sin(ah*2*Math.PI/R.length)}).attr("y1",function(ai,ah){return B/2-af*Math.cos(ah*2*Math.PI/R.length)}).attr("x2",function(ai,ah){return y/2-af*Math.sin((ah+1)*2*Math.PI/R.length)}).attr("y2",function(ai,ah){return B/2-af*Math.cos((ah+1)*2*Math.PI/R.length)}).style("stroke-opacity",0.75)})}function E(ad){ad.enter().append("svg:text").classed("tick",true).each(function(af){var ae=T*(++af/Q);V.select(this).style({"font-family":m,fill:N,"font-size":C}).transition().duration(G).attr("x",function(){return y/2-ae*Math.sin(0)+2}).attr("y",function(){return B/2-ae*Math.cos(0)}).text(L(af*x/Q))})}function D(ad){ad.each(function(af){var ae=T*(++af/Q);V.select(this).transition().duration(G).style({"font-family":m,fill:N,"font-size":C}).attr("x",function(){return y/2-ae*Math.sin(0)+2}).attr("y",function(){return B/2-ae*Math.cos(0)}).text(L(af*x/Q))})}function w(ad){ad.enter().append("svg:g").classed("axis",true).each(function(ai,ag){var af=+(V.select(this).attr("data-index")||0);var ae=V.select(this).selectAll(".line").data([ai]);ae.exit().transition().duration(G/2).style("opacity",0).remove();ae.enter().append("svg:line").classed("line",true).style({stroke:A,"stroke-width":U}).attr({x1:y/2,y1:B/2}).transition().duration(G).attrTween("x2",function(){var aj=V.interpolate(af*2*Math.PI,ag*2*Math.PI/R.length);return function(ak){return y/2-T*Math.sin(aj(ak))}}).attrTween("y2",function(){var aj=V.interpolate(af*2*Math.PI,ag*2*Math.PI/R.length);return function(ak){return B/2-T*Math.cos(aj(ak))}});var ah=V.select(this).selectAll(".text").data([ai]);ah.exit().transition().duration(G/2).style("opacity",0).remove();ah.enter().append("svg:text").classed("text",true).style({"font-family":F,"font-size":J,opacity:0}).attr({transform:"translate(0, -10)","text-anchor":"middle",dy:"1.5em"}).transition().duration(G).attrTween("x",function(){var aj=V.interpolate(af*2*Math.PI,ag*2*Math.PI/R.length);return function(ak){return y/2-T*0.85*Math.sin(aj(ak))-60*Math.sin(aj(ak))}}).attrTween("y",function(){var aj=V.interpolate(af*2*Math.PI,ag*2*Math.PI/R.length);return function(ak){return B/2-T*Math.cos(aj(ak))-20*Math.cos(aj(ak))}}).style("opacity",1).text(ai);V.select(this).attr("data-index",ag/R.length)})}function S(ad){ad.each(function(ai,ag){var af=+(V.select(this).attr("data-index")||0);var ae=V.select(this).selectAll(".line");ae.transition().duration(G).style({stroke:A,"stroke-width":U}).attrTween("x2",function(){var aj=V.interpolate(af*2*Math.PI,ag*2*Math.PI/R.length);return function(ak){return y/2-T*Math.sin(aj(ak))}}).attrTween("y2",function(){var aj=V.interpolate(af*2*Math.PI,ag*2*Math.PI/R.length);return function(ak){return B/2-T*Math.cos(aj(ak))}});var ah=V.select(this).selectAll(".text");ah.style({"font-family":F,"font-size":J}).transition().duration(G).attrTween("x",function(){var aj=V.interpolate(af*2*Math.PI,ag*2*Math.PI/R.length);return function(ak){return y/2-T*0.85*Math.sin(aj(ak))-60*Math.sin(aj(ak))}}).attrTween("y",function(){var aj=V.interpolate(af*2*Math.PI,ag*2*Math.PI/R.length);return function(ak){return B/2-T*Math.cos(aj(ak))-20*Math.cos(aj(ak))}}).text(ai);V.select(this).attr("data-index",ag/R.length)})}function Y(ad){ad.enter().append("svg:g").classed("legend",true).style("cursor","pointer").on("click",function(ag){if(!V.select(this).classed("none")){if(X.length>1){V.select(this).classed("none",true);for(var af=0,ae;af<X.length;af++){ae=X[af];if(ae.name===ag.name){ae._flag=false;break}}t.render()}}else{V.select(this).classed("none",false);for(var af=0,ae;af<X.length;af++){ae=X[af];if(ae.name===ag.name){ae._flag=true;break}}t.render()}}).each(function(af,ae){V.select(this).append("svg:rect").attr({x:(ae-ae%v)/v*z+T*2,y:ae%v*20+10}).attr({width:10,height:10}).style({fill:I(ae),stroke:I(ae)}).style("fill-opacity",af._flag?1:0).style("opacity",0).transition().duration(G/2).style("opacity",1);V.select(this).append("svg:text").attr({x:(ae-ae%v)/v*z+T*2+20,y:ae%v*20+19}).style({opacity:0,"font-size":u,fill:r,"font-family":m}).transition().duration(G/2).style("opacity",1).text(af.name)})}function P(ad){ad.each(function(af,ae){V.select(this).selectAll("rect").transition().duration(G/2).style({fill:I(ae),stroke:I(ae)}).style("fill-opacity",af._flag?1:0).attr({x:(ae-ae%v)/v*z+T*2,y:ae%v*20+10});V.select(this).selectAll("text").transition().duration(G/2).attr({x:(ae-ae%v)/v*z+T*2+20,y:ae%v*20+19}).style({"font-size":u,fill:r,"font-family":m}).text(af.name)})}function p(ae){var ad;if(typeof ae==="object"&&ae.constructor===Array){ad=ae.map(function(ai){var af;var ah;var ag=ai.data.data.map(function(aj){aj.row.row.forEach(function(ak){if(ak.axis!==undefined){af=ak.axis}if(ak.value!==undefined){ah=ak.value}});return{axis:af,value:ah}});return{name:ai.name,data:ag}})}return ad}t.size=function(ad){if(!arguments.length){return[l,n]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in radar.size(width, height) should be number and number of svg");return this}else{l=arguments[0];n=arguments[1];return this}}};t.sizeAvail=function(ad){if(!arguments.length){return[y,B]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in radar.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{y=arguments[0];B=arguments[1];return this}}};t.tran=function(ad){if(!arguments.length){return[ab,aa]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in radar.tran(tranX, tranY) should be number and number of svg");return this}else{ab=arguments[0];aa=arguments[1];return this}}};t.fontSize=function(ad){if(!arguments.length){return C}else{if(!isFinite(arguments[0])){console.error("The arguments in radar.fontSize(fontSize) should be number of text");return this}else{C=arguments[0];return this}}};t.fontFamily=function(ad){if(!arguments.length){return m}else{if(typeof arguments[0]!=="string"){console.error("The arguments in radar.fontFamily(fontFamily) should be string of text");return this}else{C=arguments[0];return this}}};t.fontColor=function(ad){if(!arguments.length){return N}else{if(typeof arguments[0]!=="string"){console.error("The arguments in radar.fontColor(fontColor) should be string of text");return this}else{N=arguments[0];return this}}};t.duration=function(ad){if(!arguments.length){return G}else{if(!isFinite(arguments[0])){console.error("The arguments in radar.duration(duration) should be number of transition");return this}else{G=Math.round(arguments[0]);return this}}};t.color=function(ad){if(!arguments.length){return I}else{if(typeof arguments[0]!=="function"){console.error("The arguments in radar.color(color) should be function of pvisual.color");return this}else{I=arguments[0];return this}}};t.gridColor=function(ad){if(!arguments.length){return Z}else{if(typeof arguments[0]!=="string"){console.error("The arguments in radar.gridColor(gridColor) should be string");return this}else{Z=arguments[0];return this}}};t.tickFormat=function(ad){if(!arguments.length){return L}else{if(typeof arguments[0]!=="string"){console.error("The arguments in radar.tickFormat(format) should be string of d3.format");return this}else{L=V.format(arguments[0]);return this}}};t.tickTextSize=function(ad){if(!arguments.length){return J}else{if(!isFinite(arguments[0])){console.error("The arguments in radar.tickTextSize(tickTextSize) should be number");return this}else{J=arguments[0];return this}}};t.tickTextColor=function(ad){if(!arguments.length){return F}else{if(typeof arguments[0]!=="string"){console.error("The arguments in radar.tickTextColor(tickTextColor) should be string");return this}else{F=arguments[0];return this}}};t.axisPathWidth=function(ad){if(!arguments.length){return U}else{if(!isFinite(arguments[0])){console.error("The arguments in radar.axisPathWidth(axisPathWidth) should be string");return this}else{U=arguments[0];return this}}};t.axisPathColor=function(ad){if(!arguments.length){return A}else{if(typeof arguments[0]!=="string"){console.error("The arguments in radar.axisPathColor(axisPathColor) should be string");return this}else{A=arguments[0];return this}}};t.legendTran=function(ad){if(!arguments.length){return[M,K]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in radar.legendTran(tranX, tranY) should be number and number of svg");return this}else{M=arguments[0];K=arguments[1];return this}}};t.legendSize=function(ad){if(!arguments.length){return u}else{if(!isFinite(arguments[0])){console.error("The arguments in radar.legendSize(legendSize) should be number of text");return this}else{u=arguments[0];return this}}};t.legendColor=function(ad){if(!arguments.length){return r}else{if(typeof arguments[0]!=="string"){console.error("The arguments in radar.legendColor(legendColor) should be string of text");return this}else{r=arguments[0];return this}}};t.legendColumnNo=function(ad){if(!arguments.length){return v}else{if(!isFinite(arguments[0])){console.error("The arguments in radar.legendColumnNo(legendColumnNo) should be number of text");return this}else{v=arguments[0];return this}}};t.legendRowGap=function(ad){if(!arguments.length){return z}else{if(!isFinite(arguments[0])){console.error("The arguments in radar.legendRowGap(legendRowGap) should be number of text");return this}else{z=arguments[0];return this}}};t.segNumber=function(ad){if(!arguments.length){return Q}else{if(!isFinite(arguments[0])){console.error("The arguments in radar.segNumber(number) should be number of svg");return this}else{Q=arguments[0];return this}}};t.options=function(ad){if(!arguments.length){return{width:l,height:n,format:L,segnumber:Q,fontSize:C,fontFamily:m,legendsize:u,duration:G}}else{if(typeof ad!=="object"){t.log({priority:"Warning",position:"radar",info:"The arguments in radar.options(options) should be object"});console.error("The arguments in radar.options(options) should be object");return this}else{l=isFinite(ad.width)?ad.width:l;n=isFinite(ad.width)?ad.height:n;L=(ad.format&&typeof ad.format==="function")?ad.format:L;Q=isFinite(ad.segnumber)?ad.segnumber:Q;C=isFinite(ad.fontSize)?ad.fontSize:C;u=isFinite(ad.legendsize)?ad.legendsize:u;m=ad.fontFamily||m;G=isFinite(ad.duration)||G;return this}}};t.options=function(ad){if(!arguments.length){return{type:t.getType(),width:l,height:n,widthAvail:y,heightAvail:B,tranX:ab,tranY:aa,format:L,fontSize:C,fontColor:N,fontFamily:m,color:I,duration:G,segNumber:Q,gridColor:Z,tickTextSize:J,tickTextColor:F,axisPathWidth:U,axisPathColor:A,legendColor:r,legendSize:u,legendTranX:M,legendTranY:K,legendColumnNo:v,legendRowGap:z}}else{if(typeof ad!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{l=isFinite(ad.width)?ad.width:l;n=isFinite(ad.height)?ad.height:n;y=isFinite(ad.widthAvail)?ad.widthAvail:y;B=isFinite(ad.heightAvail)?ad.heightAvail:B;ab=isFinite(ad.tranX)?ad.tranX:ab;aa=isFinite(ad.tranY)?ad.tranY:aa;ad.format&&t.tickFormat(ad.format);ad.fontFamily&&t.fontFamily(ad.fontFamily);ad.fontColor&&t.fontColor(ad.fontColor);isFinite(ad.fontSize)&&t.fontSize(ad.fontSize);isFinite(ad.duration)&&t.duration(ad.duration);isFinite(ad.segNumber)&&t.segNumber(ad.segNumber);ad.gridColor&&t.gridColor(ad.gridColor);isFinite(ad.tickTextSize)&&t.tickTextSize(ad.tickTextSize);ad.tickTextColor&&t.tickTextColor(ad.tickTextColor);isFinite(ad.axisPathWidth)&&t.axisPathWidth(ad.axisPathWidth);ad.axisPathColor&&t.axisPathColor(ad.axisPathColor);ad.legendColor&&t.legendColor(ad.legendColor);isFinite(ad.legendSize)&&t.legendSize(ad.legendSize);M=isFinite(ad.legendTranX)?ad.legendTranX:M;K=isFinite(ad.legendTranY)?ad.legendTranY:K;isFinite(ad.legendColumnNo)&&t.legendColumnNo(ad.legendColumnNo);isFinite(ad.legendRowGap)&&t.legendRowGap(ad.legendRowGap);return this}}};if(arguments.length===1){t.options(arguments[0])}return t};h.model.sankey=function(){var t=h.extend();var K=i.d3;var r="Sankey";var C=700;var y=400;var B=C;var z=y;var G=0;var E=0;var L;var q=8;var H="Arial";var o="#000000";var w;var x;var A;var m=1000;var F=K.format(",.0f");var D=t.color();var s=0.2;var J=function(N,M){return"#000000"};t.data=function(N){if(arguments.length){if(N.type==="xml"){N=N.root;N=u(N)}var M=K.map();N.nodes.forEach(function(O){M.set(O.name,O)});N.links.forEach(function(O){O.source=M.get(O.source);O.target=M.get(O.target)});L=N;return this}else{return L}};t.getType=function(){return r};t.render=function(O){x=x||K.select(O).node();if(!x||x.tagName.toLowerCase()!=="div"){console.error("The argument(element) in sankey.rander(_) should be <div> element")}K.select(x).classed("chart",true);A=A||K.select(x).append("svg").classed("sankey",true).node();var R=K.sankey().nodeWidth(15).nodePadding(10).size([B-2,z-2]);R.nodes(L.nodes).links(L.links).layout(40);var Q=R.link();w=K.select(x).select(".floatTag").node()?K.select(x).select(".floatTag"):t.floatTag(x);var P=K.select(A).attr({width:C,height:y}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+G+","+E+")");P.call(function(S){S.append("svg:g").classed("links",true);S.append("svg:g").classed("nodes",true)});P=K.select(A).select("g");var N=P.select(".links").selectAll(".link").data(L.links);N.exit().transition().duration(m).style("opacity",0).remove();l(N,Q);I(N,Q);var M=P.select(".nodes").selectAll(".node").data(L.nodes);M.exit().transition().duration(m).style("opacity",0).remove();p(M,R,Q,N);v(M,R,Q,N)};function l(M,N){M.transition().duration(m).attr("d",N).style("stroke-width",function(O){return Math.max(1,O.dy)}).style("stroke",J).sort(function(P,O){return O.dy-P.dy})}function I(M,N){M.enter().append("svg:path").classed("link",true).attr("d",N).style({fill:"none",opacity:s}).style("stroke",J).style("stroke-width",function(O){return Math.max(1,O.dy)}).on("mouseover",function(O){n(O,true);K.select(this).transition().duration(m/3).style("stroke-opacity",0.5)}).on("mouseout",function(O){n(O,false);K.select(this).transition().duration(m/3).style("stroke-opacity",1)})}function p(N,Q,P,M){N.call(K.behavior.drag().origin(function(R){return R}).on("dragstart",function(){this.parentNode.appendChild(this)}).on("drag",O)).each(function(S,R){K.select(this).attr("transform","translate("+S.x+","+S.y+")");K.select(this).select("rect").transition().duration(m).attr("height",S.dy).attr("width",Q.nodeWidth()).style("fill",function(){return S.color=D(R)}).style("stroke",function(){return K.rgb(S.color).darker(2)});K.select(this).select("text").transition().duration(m).attr("y",S.dy/2).text(function(T){return T.name}).style({"font-family":H,fill:o,"font-size":q}).filter(function(T){return T.x<Q.width/2}).attr("x",6+Q.nodeWidth()).attr("text-anchor","start")});function O(R){K.select(this).attr("transform","translate("+R.x+","+(R.y=Math.max(0,Math.min(z-R.dy,K.event.y)))+")");Q.relayout();M.attr("d",P)}}function v(N,Q,P,M){N.enter().append("svg:g").classed("node",true).attr("transform",function(R){return"translate("+R.x+","+R.y+")"}).call(K.behavior.drag().origin(function(R){return R}).on("dragstart",function(){this.parentNode.appendChild(this)}).on("drag",O)).each(function(S,R){K.select(this).append("svg:rect").attr("height",S.dy).attr("width",Q.nodeWidth()).style("fill",function(){return S.color=D(R)}).style({cursor:"move","fill-opacity":0.7,stroke:K.rgb(S.color).darker(2),"shape-rendering":"crispEdges"});K.select(this).append("svg:text").attr({x:-2,y:S.dy/2,dy:".35em","text-anchor":"end"}).text(S.name).style({"pointer-events":"none","text-shadow":"0 1px 0 #fff","font-family":H,fill:o,"font-size":q}).filter(function(){return S.x<Q.width/2}).attr("x",6+Q.nodeWidth()).attr("text-anchor","start")});function O(R){K.select(this).attr("transform","translate("+R.x+","+(R.y=Math.max(0,Math.min(z-R.dy,K.event.y)))+")");Q.relayout();M.attr("d",P)}}function n(N,M){if(M){w.style({"border-color":J(N),opacity:1,textAlign:"center",margin:"auto"}).html("source: "+N.source.name+"<br/>target: "+N.target.name+"<br/>value: "+F(N.value))}else{w.style("opacity",0)}}function u(R){if(typeof R==="object"&&R.constructor===Array){var N;var M;var P;var Q;var O;R.forEach(function(S){if(S.nodes!==undefined){N=S.nodes.nodes.map(function(T){return{name:T.node.name}})}else{if(S.links!==undefined){M=S.links.links.map(function(T){T.link.link.forEach(function(U){if(U.target!==undefined){Q=U.target}if(U.source!==undefined){O=U.source}if(U.value!==undefined){P=U.value}});return{source:O,target:Q,value:P}})}}});return{nodes:N,links:M}}}t.size=function(M){if(!arguments.length){return[C,y]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in sankey.size(width, height) should be number and number of svg");return this}else{C=arguments[0];y=arguments[1];return this}}};t.sizeAvail=function(M){if(!arguments.length){return[B,z]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in sankey.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{B=arguments[0];z=arguments[1];return this}}};t.tran=function(M){if(!arguments.length){return[G,E]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in sankey.tran(tranX, tranY) should be number and number of svg");return this}else{G=arguments[0];E=arguments[1];return this}}};t.fontSize=function(M){if(!arguments.length){return q}else{if(!isFinite(arguments[0])){console.error("The arguments in sankey.fontSize(fontSize) should be number of text");return this}else{q=arguments[0];return this}}};t.fontFamily=function(M){if(!arguments.length){return H}else{if(typeof arguments[0]!=="string"){console.error("The arguments in sankey.fontFamily(fontFamily) should be string of text");return this}else{q=arguments[0];return this}}};t.fontColor=function(M){if(!arguments.length){return o}else{if(typeof arguments[0]!=="string"){console.error("The arguments in sankey.fontColor(fontColor) should be string of text");return this}else{o=arguments[0];return this}}};t.duration=function(M){if(!arguments.length){return m}else{if(!isFinite(arguments[0])){console.error("The arguments in sankey.duration(duration) should be number of transition");return this}else{m=Math.round(arguments[0]);return this}}};t.color=function(M){if(!arguments.length){return D}else{if(typeof arguments[0]!=="function"){console.error("The arguments in sankey.color(color) should be function of pvisual.color");return this}else{D=arguments[0];return this}}};t.tickFormat=function(M){if(!arguments.length){return F}else{if(typeof arguments[0]!=="string"){console.error("The arguments in sankey.tickFormat(format) should be string of d3.format");return this}else{F=K.format(arguments[0]);return this}}};t.linkOpacity=function(M){if(!arguments.length){return s}else{if(!isFinite(arguments[0])){console.error("The arguments in sankey.linkOpacity(linkOpacity) should be number");return this}else{s=arguments[0];return this}}};t.linkColor=function(M){if(!arguments.length){return J}else{if(typeof arguments[0]!=="function"&&typeof typeof arguments[0]!=="string"){console.error("The arguments in graph.linkColor(linkColor) should be function or string");return this}else{J=K.functor(arguments[0]);return this}}};t.options=function(M){if(!arguments.length){return{type:t.getType(),width:C,height:y,widthAvail:B,heightAvail:z,tranX:G,tranY:E,format:F,fontSize:q,fontColor:o,fontFamily:H,color:D,duration:m,linkOpacity:s,linkColor:J}}else{if(typeof M!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{C=isFinite(M.width)?M.width:C;y=isFinite(M.height)?M.height:y;B=isFinite(M.widthAvail)?M.widthAvail:B;z=isFinite(M.heightAvail)?M.heightAvail:z;G=isFinite(M.tranX)?M.tranX:G;E=isFinite(M.tranY)?M.tranY:E;M.format&&t.tickFormat(M.format);M.fontFamily&&t.fontFamily(M.fontFamily);M.fontColor&&t.fontColor(M.fontColor);isFinite(M.fontSize)&&t.fontSize(M.fontSize);isFinite(M.duration)&&t.duration(M.duration);M.linkColor&&t.linkColor(M.linkColor);isFinite(M.linkOpacity)&&t.linkOpacity(M.linkOpacity);return this}}};if(arguments.length===1){t.options(arguments[0])}return t};h.model.scatterplot=function(){var D=h.extend();var S=i.d3;var Z="散点矩阵";var l=800;var o=800;var x=l-150;var A=o-100;var Y=20;var X=20;var V;var m="Arial";var U;var q;var G=1000;var K=S.format(".3s");var H=D.color();var R;var n=2;var Q;var T=0.05;var w;var N=0;var p=0;var y=5;var I=8;var F="#929292";var M="#929292";var E=8;var P="normal";var s="#000";var t=13;var L=0;var J=0;var v=10;var z=100;D.data=function(ac){if(arguments.length){if(ac.type==="xml"){ac=ac.root;ac=ac.map(function(ag){var af={};ag.row.row.forEach(function(ai){var ah=h.keys(ai)[0];af[ah]=ai[ah]});return af})}else{if(ac.type==="xlsx"||ac.type==="xls"){var ae=[];for(var ad=0;ad<ac.length;ad++){var aa=h.keys(ac[ad])[0];ae=ae.concat(ac[ad][aa])}ac=ae}}var ab=h.keys(ac[0]).filter(function(af){return af!=="species"});ab.forEach(function(af){ac.forEach(function(ag){ag[af]=+ag[af]})});Q=ab.map(function(af){return{name:af,_flag:true,extent:S.extent(ac,function(ag){return ag[af]})}});Q.species=S.set(ac.map(function(af){return af.species})).values();V=ac;return this}else{return V}};D.getType=function(){return Z};D.render=function(al){U=U||S.select(al).node();if(!U||U.tagName.toLowerCase()!=="div"){D.log({priority:"Error",position:"scatterplot",info:"The argument(element) in scatterplot.rander(_) should be <div> element"});console.error("The argument(element) in scatterplot.rander(_) should be <div> element")}S.select(U).classed("chart",true);q=q||S.select(U).append("svg").classed("scatterplot",true).node();var ah=Q.filter(function(am){return am._flag});R=S.min([x,A])/ah.length;w=T*R;var aj={};var ai={};ah.forEach(function(am){aj[am.name]=S.scale.linear().domain(am.extent).range([w/2,R-w/2]);ai[am.name]=S.scale.linear().domain(am.extent).range([R-w/2,w/2])});var ab=S.svg.axis().ticks(y).tickSize(R*ah.length);var ag=S.svg.brush().on("brushstart",ak).on("brush",ag).on("brushend",ac);var af=S.select(q).attr({width:l,height:o}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+Y+","+X+")");af.call(function(am){am.append("svg:g").classed("dimensions",true);am.append("svg:g").classed("x-axis axis",true);am.append("svg:g").classed("y-axis axis",true);am.append("svg:g").classed("legends",true);am.append("svg:g").classed("labels",true)});af=S.select(q).select("g");var ae=af.select(".labels").selectAll(".label").data(ah);ae.exit().transition().duration(G).style("opacity",0).remove();B(ae);u(ae);var aa=af.select(".dimensions").selectAll(".dimension").data(r(ah,ah));aa.exit().transition().duration(G).style("opacity",0).remove();aa.each(function(an){var am=S.select(this);am.transition().duration(G).attr("transform",function(ap){return"translate("+ap.i*R+","+ap.j*R+")"});am.select(".frame").attr({x:w/2,y:w/2,width:R-w,height:R-w});var ao=am.selectAll("circle").data(V);ao.exit().transition().duration(G).style("opacity",0).remove();ao.attr("class",function(ap){return ap.species}).transition().duration(G).attr("fill",function(ap){return H(ap.species)}).attr("cx",function(ap){return aj[an.x.name](ap[an.x.name])}).attr("cy",function(ap){return ai[an.y.name](ap[an.y.name])});ao.enter().append("svg:circle").attr("class",function(ap){return ap.species}).attr("fill",function(ap){return H(ap.species)}).attr("cx",function(ap){return aj[an.x.name](ap[an.x.name])}).attr("cy",function(ap){return ai[an.y.name](ap[an.y.name])}).attr("r",n);am.call(ag.x(aj[an.x.name]).y(ai[an.y.name]))});aa.enter().append("svg:g").classed("dimension",true).attr("transform",function(am){return"translate("+am.i*R+","+am.j*R+")"}).each(function(an){var am=S.select(this);am.append("svg:rect").classed("frame",true).attr({x:w/2,y:w/2,width:R-w,height:R-w,fill:"none",stroke:"#444444","stroke-width":"1px"});am.selectAll("circle").data(V).enter().append("svg:circle").attr("class",function(ao){return ao.species}).attr("fill",function(ao){return H(ao.species)}).attr("cx",function(ao){return aj[an.x.name](ao[an.x.name])}).attr("cy",function(ao){return ai[an.y.name](ao[an.y.name])}).attr("r",n);am.call(ag.x(aj[an.x.name]).y(ai[an.y.name]))});af.select(".dimensions").selectAll(".dimension").selectAll(".extent").style({fill:"#000","fill-opacity":0.1,stroke:"#fff"});var ad=af.select(".legends").attr("transform","translate("+L+","+J+")").selectAll(".legend").data(Q);ad.exit().transition().duration(G).style("opacity",0).remove();O(ad);W(ad,ah);C(af,ab,aj,ai,ah);function ak(am){if(ag.data!==am){aa.call(ag.clear());ag.x(aj[am.x.name]).y(ai[am.y.name]).data=am}}function ag(an){var am=ag.extent();af.select(".dimensions").selectAll(".dimension").selectAll("circle").attr("class",function(ao){return am[0][0]<=ao[an.x.name]&&ao[an.x.name]<=am[1][0]&&am[0][1]<=ao[an.y.name]&&ao[an.y.name]<=am[1][1]?ao.species:"none"}).attr("fill",function(ao){return S.select(this).classed("none")?"#AAAAAA":H(ao.species)})}function ac(){if(ag.empty()){af.select(".dimensions").selectAll(".dimension").selectAll("circle").attr("class",function(am){return am.species}).attr("fill",function(am){return H(am.species)})}}};function B(aa){aa.each(function(ac,ab){S.select(this).select(".x").text(ac.name).transition().duration(G).attr("transform","translate("+(ab+0.5)*R+",0)").style({"text-anchor":"middle",fill:P,"font-family":m,"font-size":E});S.select(this).select(".y").text(ac.name).transition().duration(G).attr("transform","translate(-5,"+(ab+0.5)*R+")rotate(-90)").style({"text-anchor":"middle",fill:P,"font-family":m,"font-size":E})})}function u(aa){aa.enter().append("svg:g").classed("label",true).each(function(ac,ab){S.select(this).append("svg:text").classed("x",true).text(ac.name).attr("transform","translate("+(ab+0.5)*R+",0)").style({"text-anchor":"middle","font-family":m,"font-size":E,fill:P});S.select(this).append("svg:text").classed("y",true).text(ac.name).attr("transform","translate(-5,"+(ab+0.5)*R+")rotate(-90)").style({"text-anchor":"middle","font-family":m,"font-size":E,fill:P})})}function W(aa,ab){aa.enter().append("svg:g").classed("legend",true).style("cursor","pointer").on("click",function(ac){if(!S.select(this).classed("none")){if(ab.length>1){S.select(this).classed("none",true);ac._flag=false;D.render()}}else{S.select(this).classed("none",false);ac._flag=true;D.render()}}).each(function(ad,ac){S.select(this).append("svg:rect").attr({x:(ac-ac%v)/v*z+x+20,y:ac%v*20}).attr({width:10,height:10}).style({fill:H(ac),stroke:H(ac)}).style("fill-opacity",ad._flag?1:0).style("opacity",0).transition().duration(G/2).style("opacity",1);S.select(this).append("svg:text").attr({x:(ac-ac%v)/v*z+x+40,y:ac%v*20+9}).style({opacity:0,"font-size":t,fill:s,"font-family":m}).transition().duration(G/2).style("opacity",1).text(ad.name)})}function O(aa){aa.each(function(ac,ab){S.select(this).selectAll("rect").transition().duration(G/2).style({fill:H(ab),stroke:H(ab)}).style("fill-opacity",ac._flag?1:0).attr({x:(ab-ab%v)/v*z+x+20,y:ab%v*20});S.select(this).selectAll("text").transition().duration(G/2).attr({x:(ab-ab%v)/v*z+x+40,y:ab%v*20+9}).style({"font-size":t,fill:s,"font-family":m}).text(ac.name)})}function C(ae,ab,aa,ag,ad){var af=ae.select(".x-axis").selectAll(".x").data(ad);af.exit().transition().duration(G).style("opacity",0).remove();af.transition().duration(G).attr("transform",function(ai,ah){return"translate("+ah*R+",0)"}).each(function(ah){S.select(this).transition().duration(G).call(ab.scale(aa[ah.name]).orient("bottom"))});af.enter().append("svg:g").classed("x",true).attr("transform",function(ai,ah){return"translate("+ah*R+",0)"}).each(function(ah){S.select(this).transition().duration(G).call(ab.scale(aa[ah.name]).orient("bottom"))});var ac=ae.select(".y-axis").selectAll(".y").data(ad);ac.exit().transition().duration(G).style("opacity",0).remove();ac.transition().duration(G).attr("transform",function(ai,ah){return"translate(0,"+ah*R+")"}).each(function(ah){S.select(this).transition().duration(G).call(ab.scale(ag[ah.name]).orient("right"))});ac.enter().append("svg:g").classed("y",true).attr("transform",function(ai,ah){return"translate(0,"+ah*R+")"}).each(function(ah){S.select(this).transition().duration(G).call(ab.scale(ag[ah.name]).orient("right"))});ae.selectAll(".axis").call(function(ah){ah.style("shape-rendering","crispEdges").selectAll("path").style("display","none");ah.selectAll("line").style({fill:"none","stroke-dasharray":"3,1",stroke:M,"shape-rendering":"crispEdges"})});ae.select(".x-axis").selectAll(".tick").select("text").style({"text-anchor":"middle","font-family":m,"font-size":I,fill:F}).attr("transform",function(){return"translate("+this.getComputedTextLength()*Math.abs(Math.sin(N)*0.5)+","+(this.getComputedTextLength()*(0.5*Math.abs(Math.sin(N)))+5)+")rotate("+N+")"});ae.select(".y-axis").selectAll(".tick").select("text").style({"text-anchor":"start","font-family":m,"font-size":I,fill:F}).attr("transform",function(){return"rotate("+p+")"})}function r(ac,ab){var ag=[],af=ac.length,aa=ab.length,ae,ad;for(ae=-1;++ae<af;){for(ad=-1;++ad<aa;){ag.push({x:ac[ae],i:ae,y:ab[ad],j:ad})}}return ag}D.size=function(aa){if(!arguments.length){return[l,o]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in scatterplot.size(width, height) should be number and number of svg");return this}else{l=arguments[0];o=arguments[1];return this}}};D.sizeAvail=function(aa){if(!arguments.length){return[x,A]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in scatterplot.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{x=arguments[0];A=arguments[1];return this}}};D.tran=function(aa){if(!arguments.length){return[Y,X]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in scatterplot.tran(tranX, tranY) should be number and number of svg");return this}else{Y=arguments[0];X=arguments[1];return this}}};D.fontFamily=function(aa){if(!arguments.length){return m}else{if(typeof arguments[0]!=="string"){console.error("The arguments in scatterplot.fontFamily(fontFamily) should be string of text");return this}else{fontSize=arguments[0];return this}}};D.duration=function(aa){if(!arguments.length){return G}else{if(!isFinite(arguments[0])){console.error("The arguments in scatterplot.duration(duration) should be number of transition");return this}else{G=Math.round(arguments[0]);return this}}};D.color=function(aa){if(!arguments.length){return H}else{if(typeof arguments[0]!=="function"){console.error("The arguments in scatterplot.color(color) should be function of pvisual.color");return this}else{H=arguments[0];return this}}};D.tickFormat=function(aa){if(!arguments.length){return K}else{if(typeof arguments[0]!=="string"){console.error("The arguments in scatterplot.tickFormat(format) should be string of d3.format");return this}else{K=S.format(arguments[0]);return this}}};D.legendTran=function(aa){if(!arguments.length){return[L,J]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in scatterplot.legendTran(tranX, tranY) should be number and number of svg");return this}else{L=arguments[0];J=arguments[1];return this}}};D.legendSize=function(aa){if(!arguments.length){return t}else{if(!isFinite(arguments[0])){console.error("The arguments in scatterplot.legendSize(legendSize) should be number of text");return this}else{t=arguments[0];return this}}};D.legendColor=function(aa){if(!arguments.length){return s}else{if(typeof arguments[0]!=="string"){console.error("The arguments in scatterplot.legendColor(legendColor) should be string of text");return this}else{s=arguments[0];return this}}};D.legendColumnNo=function(aa){if(!arguments.length){return v}else{if(!isFinite(arguments[0])){console.error("The arguments in scatterplot.legendColumnNo(legendColumnNo) should be number of text");return this}else{v=arguments[0];return this}}};D.legendRowGap=function(aa){if(!arguments.length){return z}else{if(!isFinite(arguments[0])){console.error("The arguments in scatterplot.legendRowGap(legendRowGap) should be number of text");return this}else{z=arguments[0];return this}}};D.xtickRotate=function(aa){if(!arguments.length){return N}else{if(!isFinite(arguments[0])){console.error("The arguments in scatterplot.xtickRotate(xtickRotate) should be number of tick");return this}else{N=Math.round(arguments[0]);return this}}};D.ytickRotate=function(aa){if(!arguments.length){return p}else{if(!isFinite(arguments[0])){console.error("The arguments in scatterplot.ytickRotate(ytickRotate) should be number of tick");return this}else{p=Math.round(arguments[0]);return this}}};D.labelSize=function(aa){if(!arguments.length){return E}else{if(!isFinite(arguments[0])){console.error("The arguments in scatterplot.labelSize(labelSize) should be string");return this}else{E=arguments[0];return this}}};D.labelColor=function(aa){if(!arguments.length){return P}else{if(typeof arguments[0]!=="string"){console.error("The arguments in scatterplot.labelColor(labelColor) should be string");return this}else{P=arguments[0];return this}}};D.tickNumber=function(aa){if(!arguments.length){return y}else{if(!isFinite(arguments[0])){console.error("The arguments in scatterplot.tickNumber(tickNumber) should be number of tick");return this}else{y=Math.round(arguments[0]);return this}}};D.tickLineColor=function(aa){if(!arguments.length){return M}else{if(typeof arguments[0]!=="string"){console.error("The arguments in scatterplot.tickLineColor(tickLineColor) should be string");return this}else{M=arguments[0];return this}}};D.tickTextSize=function(aa){if(!arguments.length){return I}else{if(!isFinite(arguments[0])){console.error("The arguments in scatterplot.tickTextSize(tickTextSize) should be number");return this}else{I=arguments[0];return this}}};D.tickTextColor=function(aa){if(!arguments.length){return F}else{if(typeof arguments[0]!=="string"){console.error("The arguments in scatterplot.tickTextColor(tickTextColor) should be string");return this}else{F=arguments[0];return this}}};D.padding=function(aa){if(!arguments.length){return T}else{if(!isFinite(arguments[0])){console.error("The arguments in scatterplot.padding(padding) should be number");return this}else{T=arguments[0];return this}}};D.radius=function(aa){if(!arguments.length){return n}else{if(!isFinite(arguments[0])){console.error("The arguments in scatterplot.radius(radius) should be number");return this}else{n=arguments[0];return this}}};D.options=function(aa){if(!arguments.length){return{type:D.getType(),width:l,height:o,widthAvail:x,heightAvail:A,tranX:Y,tranY:X,format:K,fontFamily:m,color:H,duration:G,radius:n,padding:T,xtickRotate:N,ytickRotate:p,labelSize:E,labelColor:P,tickNumber:y,tickTextSize:I,tickTextColor:F,tickLineColor:M,legendColor:s,legendSize:t,legendTranX:L,legendTranY:J,legendColumnNo:v,legendRowGap:z}}else{if(typeof aa!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{l=isFinite(aa.width)?aa.width:l;o=isFinite(aa.height)?aa.height:o;x=isFinite(aa.widthAvail)?aa.widthAvail:x;A=isFinite(aa.heightAvail)?aa.heightAvail:A;Y=isFinite(aa.tranX)?aa.tranX:Y;X=isFinite(aa.tranY)?aa.tranY:X;aa.format&&D.tickFormat(aa.format);aa.fontFamily&&D.fontFamily(aa.fontFamily);isFinite(aa.duration)&&D.duration(aa.duration);isFinite(aa.padding)&&D.padding(aa.padding);isFinite(aa.radius)&&D.radius(aa.radius);isFinite(aa.xtickRotate)&&D.xtickRotate(aa.xtickRotate);isFinite(aa.ytickRotate)&&D.ytickRotate(aa.ytickRotate);isFinite(aa.labelSize)&&D.labelSize(aa.labelSize);aa.labelColor&&D.labelColor(aa.labelColor);isFinite(aa.tickNumber)&&D.tickNumber(aa.tickNumber);isFinite(aa.tickTextSize)&&D.tickTextSize(aa.tickTextSize);aa.tickTextColor&&D.tickTextColor(aa.tickTextColor);aa.tickLineColor&&D.tickLineColor(aa.tickLineColor);aa.legendColor&&D.legendColor(aa.legendColor);isFinite(aa.legendSize)&&D.legendSize(aa.legendSize);L=isFinite(aa.legendTranX)?aa.legendTranX:L;J=isFinite(aa.legendTranY)?aa.legendTranY:J;isFinite(aa.legendColumnNo)&&D.legendColumnNo(aa.legendColumnNo);isFinite(aa.legendRowGap)&&D.legendRowGap(aa.legendRowGap);return this}}};if(arguments.length===1){D.options(arguments[0])}return D};h.model.stackbar=function(){var ab=h.extend();var V=i.d3;var ae="堆叠柱状图";var l=800;var n=400;var v=l-200;var z=n-100;var ad=50;var ac=0;var Z;var m="Arial";var r;var Y;var p;var G=1000;var O=V.format("s");var K=ab.color();var W=0.2;var T;var C;var J="";var H="";var Q=0;var o=0;var E=8;var S="#000000";var s=5;var X=5;var I=5;var L=8;var F="#929292";var P="#929292";var U=2;var y="#000000";var q="#000000";var t=13;var N=0;var M=0;var u=10;var x=100;ab.data=function(ag){if(arguments.length){if(ag.type==="xml"){ag=ag.root;ag=ag.map(function(ak){var aj={};ak.row.row.forEach(function(am){var al=h.keys(am)[0];aj[al]=am[al]});return aj})}else{if(ag.type==="xlsx"||ag.type==="xls"){var ai=[];for(var ah=0;ah<ag.length;ah++){var af=h.keys(ag[ah])[0];ai=ai.concat(ag[ah][af])}ag=ai}}T=h.keys(ag[0]).filter(function(aj){return aj!=="x"}).map(function(aj){return{name:aj,_flag:true}});C=ag.map(function(am){var ak=0;var al=T.map(function(an){return{name:an.name,y0:ak,y1:ak+=+am[an.name]}});var aj=al[al.length-1].y1;return{value:al,total:aj,x:am.x}});T.x=ag.map(function(aj){return aj.x});Z=ag;return this}else{return Z}};ab.getType=function(){return ae};ab.render=function(ai){Y=Y||V.select(ai).node();if(!Y||Y.tagName.toLowerCase()!=="div"){ab.log({priority:"Error",position:"stackbar",info:"The argument(element) in stackbar.rander(_) should be <div> element"});console.error("The argument(element) in stackbar.rander(_) should be <div> element")}V.select(Y).classed("chart",true);p=p||V.select(Y).append("svg").classed("stackbar",true).node();var af=V.scale.ordinal().rangeRoundBands([0,v],W);var am=V.scale.linear().rangeRound([z,0]);af.domain(T.x);am.domain([0,V.max(C,function(an){return an.total})]);var al=V.svg.axis().scale(af).orient("bottom").tickSize(X);var ah=V.svg.axis().scale(am).orient("left").ticks(s).tickSize(I).tickFormat(O);r=V.select(Y).select(".floatTag").node()?V.select(Y).select(".floatTag"):ab.floatTag(Y);var ak=V.select(p).attr({width:l,height:n}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+ad+","+ac+")");ak.call(function(an){an.append("svg:g").classed("dimensions",true);an.append("svg:g").classed("x-axis axis",true);an.append("svg:g").classed("y-axis axis",true);an.append("svg:g").classed("legends",true)});ak=V.select(p).select("g");var aj=ak.selectAll(".dimensions").selectAll(".dimension").data(C);aj.exit().transition().duration(G).style("opacity",0).remove();w(aj,af,am);A(aj,af,am);ak=V.select(p).select("g");var ag=ak.select(".legends").attr("transform","translate("+N+","+M+")").selectAll(".legend").data(T);ag.exit().transition().duration(G).style("opacity",0).remove();R(ag);aa(ag);D(ak,al,ah)};function w(ag,af,ah){ag.each(function(){var ai=V.select(this).selectAll("rect").data(function(aj){return aj.value});ai.exit().transition().duration(G).style("opacity",0).remove();ai.transition().duration(G).style("fill",function(aj){return K(aj.name)}).attr("y",function(aj){return ah(aj.y1)}).attr("width",af.rangeBand()).attr("height",function(aj){return ah(aj.y0)-ah(aj.y1)});ai.enter().append("svg:rect").attr({height:0,y:ah(0),width:af.rangeBand()}).style("fill",function(aj){return K(aj.name)}).on("mouseover",function(aj){B(aj,true)}).on("mouseout",function(aj){B(aj,false)}).transition().duration(G).attr("y",function(aj){return ah(aj.y1)}).attr("height",function(aj){return ah(aj.y0)-ah(aj.y1)});V.select(this).transition().duration(G).attr("transform",function(aj){return"translate("+af(aj.x)+",0)"})})}function A(ag,af,ah){ag.enter().append("svg:g").classed("dimension",true).each(function(){V.select(this).selectAll("rect").data(function(ai){return ai.value}).enter().append("svg:rect").attr({height:0,y:ah(0),width:af.rangeBand()}).style("fill",function(ai){return K(ai.name)}).on("mouseover",function(ai){B(ai,true)}).on("mouseout",function(ai){B(ai,false)}).transition().duration(G).attr("y",function(ai){return ah(ai.y1)}).attr("height",function(ai){return ah(ai.y0)-ah(ai.y1)});V.select(this).transition().duration(G).attr("transform",function(ai){return"translate("+af(ai.x)+",0)"})})}function aa(af){af.enter().append("svg:g").classed("legend",true).style("cursor","pointer").on("click",function(ag){if(!V.select(this).classed("none")){if(T.length>1){V.select(this).classed("none",true);ag._flag=false;C=Z.map(function(ak){var ai=0;var aj=T.filter(function(al){return al._flag}).map(function(al){return{name:al.name,y0:ai,y1:ai+=+ak[al.name]}});var ah=aj[aj.length-1].y1;return{value:aj,total:ah,x:ak.x}});ab.render()}}else{V.select(this).classed("none",false);ag._flag=true;C=Z.map(function(ak){var ai=0;var aj=T.filter(function(al){return al._flag}).map(function(al){return{name:al.name,y0:ai,y1:ai+=+ak[al.name]}});var ah=aj[aj.length-1].y1;return{value:aj,total:ah,x:ak.x}});ab.render()}}).each(function(ah,ag){V.select(this).append("svg:rect").attr({x:(ag-ag%u)/u*x+v+20,y:ag%u*20}).attr({width:10,height:10}).style({fill:K(ag),stroke:K(ag)}).style("fill-opacity",ah._flag?1:0).style("opacity",0).transition().duration(G/2).style("opacity",1);V.select(this).append("svg:text").attr({x:(ag-ag%u)/u*x+v+40,y:ag%u*20+9}).style({opacity:0,fill:q,"font-size":t,"font-family":m}).transition().duration(G/2).style("opacity",1).text(ah.name)})}function R(af){af.each(function(ah,ag){V.select(this).selectAll("rect").transition().duration(G/2).style({fill:K(ag),stroke:K(ag)}).style("fill-opacity",ah._flag?1:0).attr({x:(ag-ag%u)/u*x+v+20,y:ag%u*20});V.select(this).selectAll("text").transition().duration(G/2).attr({x:(ag-ag%u)/u*x+v+40,y:ag%u*20+9}).style({"font-size":t,fill:q,"font-family":m}).text(ah.name)})}function D(ag,ah,af){ag.select(".x-axis").each(function(){V.select(this).select(".label").transition().duration(G).style({"text-anchor":"end","font-family":m,"font-size":E,fill:S}).attr({x:v,y:-6}).text(H);V.select(this).selectAll(".label").data([1]).enter().append("svg:text").classed("label",true).style({"text-anchor":"end","font-family":m,"font-size":E,fill:S}).attr({x:v,y:-6}).text(H);V.select(this).transition().duration(G).attr("transform","translate(0,"+z+")").call(ah)});ag.select(".y-axis").each(function(){V.select(this).select(".label").style({"text-anchor":"end","font-family":m,"font-size":E,fill:S}).text(J);V.select(this).selectAll(".label").data([1]).enter().append("svg:text").classed("label",true).style({"text-anchor":"end","font-family":m,"font-size":E,fill:S}).attr({transform:"rotate(-90)",y:8,dy:".71em"}).text(J);V.select(this).transition().duration(G).call(af)});ag.selectAll(".axis").call(function(ai){ai.selectAll("path").style({fill:"none",stroke:y,"stroke-width":U,"shape-rendering":"crispEdges"});ai.selectAll("line").style({fill:"none",stroke:P,"shape-rendering":"crispEdges"})});ag.select(".x-axis").selectAll(".tick").select("text").style({"text-anchor":"middle","font-family":m,"font-size":L,fill:F}).attr("transform",function(){return"translate("+this.getComputedTextLength()*Math.abs(Math.sin(Q)*0.5)+","+(this.getComputedTextLength()*(0.5*Math.abs(Math.sin(Q)))+5)+")rotate("+Q+")"});ag.select(".y-axis").selectAll(".tick").select("text").style({"text-anchor":"start","font-family":m,"font-size":L,fill:F}).attr("transform",function(){return"translate("+-this.getComputedTextLength()+", 0)rotate("+o+")"})}function B(ag,af){if(af){r.style({"border-color":K(ag.name),opacity:1,textAlign:"center",margin:"auto"}).html("name: "+ag.name+"<br/>value: "+O(ag.y1-ag.y0))}else{r.style("opacity",0)}}ab.size=function(af){if(!arguments.length){return[l,n]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in stackbar.size(width, height) should be number and number of svg");return this}else{l=arguments[0];n=arguments[1];return this}}};ab.sizeAvail=function(af){if(!arguments.length){return[v,z]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in stackbar.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{v=arguments[0];z=arguments[1];return this}}};ab.tran=function(af){if(!arguments.length){return[ad,ac]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in stackbar.tran(tranX, tranY) should be number and number of svg");return this}else{ad=arguments[0];ac=arguments[1];return this}}};ab.fontSize=function(af){if(!arguments.length){return fontSize}else{if(!isFinite(arguments[0])){console.error("The arguments in stackbar.fontSize(fontSize) should be number of text");return this}else{fontSize=arguments[0];return this}}};ab.fontFamily=function(af){if(!arguments.length){return m}else{if(typeof arguments[0]!=="string"){console.error("The arguments in stackbar.fontFamily(fontFamily) should be string of text");return this}else{fontSize=arguments[0];return this}}};ab.duration=function(af){if(!arguments.length){return G}else{if(!isFinite(arguments[0])){console.error("The arguments in stackbar.duration(duration) should be number of transition");return this}else{G=Math.round(arguments[0]);return this}}};ab.color=function(af){if(!arguments.length){return K}else{if(typeof arguments[0]!=="function"){console.error("The arguments in stackbar.color(color) should be function of pvisual.color");return this}else{K=arguments[0];return this}}};ab.tickFormat=function(af){if(!arguments.length){return O}else{if(typeof arguments[0]!=="string"){console.error("The arguments in stackbar.tickFormat(format) should be string of d3.format");return this}else{O=V.format(arguments[0]);return this}}};ab.padding=function(af){if(!arguments.length){return W}else{if(!isFinite(arguments[0])){console.error("The arguments in stackbar.padding(padding) should be number");return this}else{W=arguments[0];return this}}};ab.xLegend=function(af){if(!arguments.length){return H}else{if(typeof arguments[0]!=="string"){console.error("The arguments in stackbar.xLegend(xLegend) should be string");return this}else{H=arguments[0];return this}}};ab.yLegend=function(af){if(!arguments.length){return J}else{if(typeof arguments[0]!=="string"){console.error("The arguments in stackbar.yLegend(yLegend) should be string");return this}else{J=arguments[0];return this}}};ab.xtickRotate=function(af){if(!arguments.length){return Q}else{if(!isFinite(arguments[0])){console.error("The arguments in stackbar.xtickRotate(xtickRotate) should be number of tick");return this}else{Q=Math.round(arguments[0]);return this}}};ab.ytickRotate=function(af){if(!arguments.length){return o}else{if(!isFinite(arguments[0])){console.error("The arguments in stackbar.ytickRotate(ytickRotate) should be number of tick");return this}else{o=Math.round(arguments[0]);return this}}};ab.labelSize=function(af){if(!arguments.length){return E}else{if(!isFinite(arguments[0])){console.error("The arguments in stackbar.labelSize(labelSize) should be string");return this}else{E=arguments[0];return this}}};ab.labelColor=function(af){if(!arguments.length){return S}else{if(typeof arguments[0]!=="string"){console.error("The arguments in stackbar.labelColor(labelColor) should be string");return this}else{S=arguments[0];return this}}};ab.ytickNumber=function(af){if(!arguments.length){return s}else{if(!isFinite(arguments[0])){console.error("The arguments in stackbar.ytickNumber(ytickNumber) should be number of tick");return this}else{s=Math.round(arguments[0]);return this}}};ab.tickLineColor=function(af){if(!arguments.length){return P}else{if(typeof arguments[0]!=="string"){console.error("The arguments in stackbar.tickLineColor(tickLineColor) should be string");return this}else{P=arguments[0];return this}}};ab.tickTextSize=function(af){if(!arguments.length){return L}else{if(!isFinite(arguments[0])){console.error("The arguments in stackbar.tickTextSize(tickTextSize) should be number");return this}else{L=arguments[0];return this}}};ab.tickTextColor=function(af){if(!arguments.length){return F}else{if(typeof arguments[0]!=="string"){console.error("The arguments in stackbar.tickTextColor(tickTextColor) should be string");return this}else{F=arguments[0];return this}}};ab.axisPathWidth=function(af){if(!arguments.length){return U}else{if(!isFinite(arguments[0])){console.error("The arguments in stackbar.axisPathWidth(axisPathWidth) should be string");return this}else{U=arguments[0];return this}}};ab.axisPathColor=function(af){if(!arguments.length){return y}else{if(typeof arguments[0]!=="string"){console.error("The arguments in stackbar.axisPathColor(axisPathColor) should be string");return this}else{y=arguments[0];return this}}};ab.legendTran=function(af){if(!arguments.length){return[N,M]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in stackbar.legendTran(tranX, tranY) should be number and number of svg");return this}else{N=arguments[0];M=arguments[1];return this}}};ab.legendSize=function(af){if(!arguments.length){return t}else{if(!isFinite(arguments[0])){console.error("The arguments in stackbar.legendSize(legendSize) should be number of text");return this}else{t=arguments[0];return this}}};ab.legendColor=function(af){if(!arguments.length){return q}else{if(typeof arguments[0]!=="string"){console.error("The arguments in stackbar.legendColor(legendColor) should be string of text");return this}else{q=arguments[0];return this}}};ab.legendColumnNo=function(af){if(!arguments.length){return u}else{if(!isFinite(arguments[0])){console.error("The arguments in stackbar.legendColumnNo(legendColumnNo) should be number of text");return this}else{u=arguments[0];return this}}};ab.legendRowGap=function(af){if(!arguments.length){return x}else{if(!isFinite(arguments[0])){console.error("The arguments in stackbar.legendRowGap(legendRowGap) should be number of text");return this}else{x=arguments[0];return this}}};ab.options=function(af){if(!arguments.length){return{type:ab.getType(),width:l,height:n,widthAvail:v,heightAvail:z,tranX:ad,tranY:ac,format:O,fontFamily:m,color:K,duration:G,padding:W,xLegend:H,yLegend:J,xtickRotate:Q,ytickRotate:o,labelSize:E,labelColor:S,ytickNumber:s,tickTextSize:L,tickTextColor:F,tickLineColor:P,xtickLineLength:X,ytickLineLength:I,axisPathWidth:U,axisPathColor:y,legendColor:q,legendSize:t,legendTranX:N,legendTranY:M,legendColumnNo:u,legendRowGap:x}}else{if(typeof af!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{l=isFinite(af.width)?af.width:l;n=isFinite(af.height)?af.height:n;v=isFinite(af.widthAvail)?af.widthAvail:v;z=isFinite(af.heightAvail)?af.heightAvail:z;ad=isFinite(af.tranX)?af.tranX:ad;ac=isFinite(af.tranY)?af.tranY:ac;af.format&&ab.tickFormat(af.format);af.fontFamily&&ab.fontFamily(af.fontFamily);isFinite(af.duration)&&ab.duration(af.duration);af.xLegend&&ab.xLegend(af.xLegend);af.yLegend&&ab.yLegend(af.yLegend);isFinite(af.xtickRotate)&&ab.xtickRotate(af.xtickRotate);isFinite(af.ytickRotate)&&ab.ytickRotate(af.ytickRotate);isFinite(af.labelSize)&&ab.labelSize(af.labelSize);af.labelColor&&ab.labelColor(af.labelColor);isFinite(af.padding)&&ab.padding(af.padding);isFinite(af.ytickNumber)&&ab.ytickNumber(af.ytickNumber);isFinite(af.tickTextSize)&&ab.tickTextSize(af.tickTextSize);af.tickTextColor&&ab.tickTextColor(af.tickTextColor);af.tickLineColor&&ab.tickLineColor(af.tickLineColor);isFinite(af.xtickLineLength)&&ab.xtickLineLength(af.xtickLineLength);isFinite(af.ytickLineLength)&&ab.ytickLineLength(af.ytickLineLength);isFinite(af.axisPathWidth)&&ab.axisPathWidth(af.axisPathWidth);af.axisPathColor&&ab.axisPathColor(af.axisPathColor);af.legendColor&&ab.legendColor(af.legendColor);isFinite(af.legendSize)&&ab.legendSize(af.legendSize);N=isFinite(af.legendTranX)?af.legendTranX:N;M=isFinite(af.legendTranY)?af.legendTranY:M;isFinite(af.legendColumnNo)&&ab.legendColumnNo(af.legendColumnNo);isFinite(af.legendRowGap)&&ab.legendRowGap(af.legendRowGap);return this}}};if(arguments.length===1){ab.options(arguments[0])}return ab};h.model.sunburst=function(){var u=h.extend();var L=i.d3;var q="Sunburst";var C=800;var y=800;var B=C;var z=y;var I=0;var G=0;var M;var p=10;var n="#FFFFFF";var J="Arial";var w;var x;var A;var l=1000;var H=L.format("s");var E=u.color();var r=Math.min(B,z)*0.45;var s="#FFFFFF";u.data=function(N){if(arguments.length){if(N.type==="xml"){N=N.root;N=t(N)}M=N;return this}else{return M}};u.getType=function(){return q};u.render=function(Q){x=x||L.select(Q).node();if(!x||x.tagName.toLowerCase()!=="div"){console.error("The argument(element) in sunburst.rander(_) should be <div> element")}L.select(x).classed("chart",true);A=A||L.select(x).append("svg").classed("sunburst",true).node();var N=L.scale.linear().domain([0,1]).range([0,2*Math.PI]);var U=L.scale.pow().exponent(1.5).domain([0,1]).range([0,r]);var P=L.scale.sqrt().domain([0,1000000]).clamp(true).range([90,20]);var T=L.layout.partition().sort(function(W,V){return L.ascending(W.name,V.name)}).value(function(V){return V.value}).nodes(M).map(function(V){V.sum=V.value;V.fill=F(V,P);return V});var R=L.svg.arc().startAngle(function(V){return Math.max(0,Math.min(2*Math.PI,N(V.x)))}).endAngle(function(V){return Math.max(0,Math.min(2*Math.PI,N(V.x+V.dx)))}).innerRadius(function(V){return Math.max(0,V.y?U(V.y):V.y)}).outerRadius(function(V){return Math.max(0,U(V.y+V.dy))});w=L.select(x).select(".floatTag").node()?L.select(x).select(".floatTag"):u.floatTag(x);var S=L.select(A).attr({width:C,height:y}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+(I+r*1.1)+","+(G+r*1.1)+")");S.call(function(V){V.append("svg:g").classed("nodes",true)});S=L.select(A).select("g");var O=S.select(".nodes").selectAll(".node").data(T);O.exit().transition().duration(l/2).style("opacity",0).remove();O.each(function(V){L.select(this).select("path").transition().duration(l).attr("d",R).style("fill",function(W){return W.fill}).style("stroke",function(){return V.dx<0.002?"none":s});L.select(this).select("text").transition().duration(l).style({"font-family":J,fill:n,"font-size":p}).attrTween("text-anchor",function(W){return function(){return N(W.x+W.dx/2)>Math.PI?"end":"start"}}).attrTween("transform",function(){return function(){var W=N(V.x+V.dx/2)*180/Math.PI-90;return"rotate("+W+")translate("+(U(V.y)+10)+")rotate("+(W>90?-180:0)+")"}}).style("fill-opacity",N(V.dx)<0.1||V.parent===undefined?0:1).text(V.name.substring(0,Math.round(U(V.dy)/9)));L.select(this).on("click",function(W){return D(W,N,U,O,R)})});O.enter().append("g").classed("node",true).attr("data-depth",function(V){return V.depth}).style("cursor","pointer").on("mouseover",function(V){L.select(this).style("opacity",0.8);m(V,true)}).on("mouseout",function(V){m(V,false);L.select(this).style("opacity",1)}).each(function(V){L.select(this).append("path").style("fill",V.fill).style("opacity",0).style("stroke",function(){return V.dx<0.002?"none":s}).transition().duration(l).attr("d",R).style("opacity",1);L.select(this).append("text").attr("dy","5px").transition().duration(l).style({"font-family":J,fill:n,"font-size":p}).style("fill-opacity",N(V.dx)<0.1||V.parent===undefined?0:1).attr("text-anchor",N(V.x+V.dx/2)>Math.PI?"end":"start").attr("transform",function(){var W=N(V.x+V.dx/2)*180/Math.PI-90;return"rotate("+W+")translate("+(U(V.y)+10)+")rotate("+(W>90?-180:0)+")"}).text(V.name.substring(0,Math.round(U(V.dy)/9)));L.select(this).on("click",function(W){return D(W,N,U,O,R)})})};function D(T,N,U,O,P){var S=O.selectAll("text");var Q=O.selectAll("path");var R=L.scale.linear().domain([0,T.dx]).range([0,2*Math.PI]);Q.transition().duration(l).attrTween("d",o(T,N,U,P));S.transition().duration(l).attrTween("text-anchor",function(V){return function(){return N(V.x+V.dx/2)>Math.PI?"end":"start"}}).attrTween("transform",function(V){return function(){var W=N(V.x+V.dx/2)*180/Math.PI-90;return"rotate("+W+")translate("+(U(V.y)+10)+")rotate("+(W>90?-180:0)+")"}}).style("fill-opacity",function(V){return R(V.dx)>0.1&&V.parent!==undefined&&v(T,V)?1:0})}function v(N,O){if(N===O){return true}if(N.children){return N.children.some(function(P){return v(P,O)})}return false}function o(T,N,U,O){var R=K(T),Q=L.interpolate(N.domain(),[T.x,T.x+T.dx]),S=L.interpolate(U.domain(),[T.y,R]),P=L.interpolate(U.range(),[T.y?20:0,r]);return function(V){return function(W){N.domain(Q(W));U.domain(S(W)).range(P(W));return O(V)}}}function K(N){return N.children?Math.max.apply(Math,N.children.map(K)):N.y+N.dy}function F(P,N){var O=P;while(O.depth>1){O=O.parent}var Q=L.lab(E(O.name));Q.l=N(P.sum);return Q}function m(O,N){if(N){w.style({"border-color":O.fill,opacity:1,textAlign:"center",margin:"auto"}).html('<p style="color:#3f7ed8;font-weight:bold;font-size:12px;margin-bottom:5px;">name: '+O.name+"</p>value: "+O.value)}else{w.style("opacity",0)}}function t(T){if(typeof T==="object"&&T.constructor===Array){var R=0;var P;var S;var O;T.forEach(function(V,U){if(V.name!==undefined){P=U;R++}if(V.value!==undefined){S=U;R++}});if(R===1){var N=T.filter(function(V,U){return U!==P});for(var Q=0;Q<N.length;Q++){N[Q].children.children=t(N[Q].children.children)}O={name:T[P].name,children:T.filter(function(V,U){return U!==P}).map(function(U){return U.children.children})}}if(R===2){O={name:T[P].name,value:+T[S].value}}}return O}u.size=function(N){if(!arguments.length){return[C,y]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in sunburst.size(width, height) should be number and number of svg");return this}else{C=arguments[0];y=arguments[1];return this}}};u.sizeAvail=function(N){if(!arguments.length){return[B,z]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in sunburst.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{B=arguments[0];z=arguments[1];return this}}};u.tran=function(N){if(!arguments.length){return[I,G]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in sunburst.tran(tranX, tranY) should be number and number of svg");return this}else{I=arguments[0];G=arguments[1];return this}}};u.fontSize=function(N){if(!arguments.length){return p}else{if(!isFinite(arguments[0])){console.error("The arguments in sunburst.fontSize(fontSize) should be number of text");return this}else{p=arguments[0];return this}}};u.fontFamily=function(N){if(!arguments.length){return J}else{if(typeof arguments[0]!=="string"){console.error("The arguments in sunburst.fontFamily(fontFamily) should be string of text");return this}else{p=arguments[0];return this}}};u.fontColor=function(N){if(!arguments.length){return n}else{if(typeof arguments[0]!=="string"){console.error("The arguments in sunburst.fontColor(fontColor) should be string of text");return this}else{n=arguments[0];return this}}};u.duration=function(N){if(!arguments.length){return l}else{if(!isFinite(arguments[0])){console.error("The arguments in sunburst.duration(duration) should be number of transition");return this}else{l=Math.round(arguments[0]);return this}}};u.color=function(N){if(!arguments.length){return E}else{if(typeof arguments[0]!=="function"){console.error("The arguments in sunburst.color(color) should be function of pvisual.color");return this}else{E=arguments[0];return this}}};u.tickFormat=function(N){if(!arguments.length){return H}else{if(typeof arguments[0]!=="string"){console.error("The arguments in sunburst.tickFormat(format) should be string of d3.format");return this}else{H=L.format(arguments[0]);return this}}};u.gapColor=function(N){if(!arguments.length){return s}else{if(typeof arguments[0]!=="string"){console.error("The arguments in sunburst.gapColor(gapColor) should be string");return this}else{s=arguments[0];return this}}};u.radius=function(N){if(!arguments.length){return r}else{if(!isFinite(arguments[0])){console.error("The arguments in sunburst.radius(radius) should be number");return this}else{r=arguments[0];return this}}};u.options=function(N){if(!arguments.length){return{type:u.getType(),width:C,height:y,widthAvail:B,heightAvail:z,tranX:I,tranY:G,format:H,fontSize:p,fontColor:n,fontFamily:J,color:E,duration:l,radius:r,gapColor:s}}else{if(typeof N!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{C=isFinite(N.width)?N.width:C;y=isFinite(N.height)?N.height:y;B=isFinite(N.widthAvail)?N.widthAvail:B;z=isFinite(N.heightAvail)?N.heightAvail:z;I=isFinite(N.tranX)?N.tranX:I;G=isFinite(N.tranY)?N.tranY:G;N.format&&u.tickFormat(N.format);N.fontFamily&&u.fontFamily(N.fontFamily);N.fontColor&&u.fontColor(N.fontColor);isFinite(N.fontSize)&&u.fontSize(N.fontSize);isFinite(N.duration)&&u.duration(N.duration);isFinite(N.radius)&&u.radius(N.radius);N.gapColor&&u.gapColor(N.gapColor);return this}}};if(arguments.length===1){u.options(arguments[0])}return u};h.model.surveyplot=function(){var ab=h.extend();var V=i.d3;var ae="Surveyplot";var l=800;var n=400;var v=l-150;var z=n-100;var Z;var ad=30;var ac=20;var O="#000000";var m="Arial";var r;var Y;var p;var F=1000;var N=V.format("s");var J=ab.color();var T;var W=0.1;var I="";var G="";var Q=0;var o=0;var D=8;var S="#000000";var s=5;var X=5;var H=5;var K=8;var E="#929292";var P="#929292";var U=2;var y="#000000";var q="#000000";var t=13;var M=0;var L=0;var u=10;var x=100;ab.data=function(ah){if(arguments.length){if(ah.type==="xml"){ah=ah.root;ah=ah.map(function(al){var ak={};al.row.row.forEach(function(an){var am=h.keys(an)[0];ak[am]=an[am]});return ak})}else{if(ah.type==="xlsx"||ah.type==="xls"){var aj=[];for(var ai=0;ai<ah.length;ai++){var af=h.keys(ah[ai])[0];aj=aj.concat(ah[ai][af])}ah=aj}}var ag=h.keys(ah[0]).filter(function(ak){return ak!=="species"});ag.forEach(function(ak){ah.forEach(function(al){al.dimensions={};al[ak]=+al[ak]})});T=ag.map(function(ak){return{name:ak,_flag:true,extent:V.extent(ah,function(al){return al[ak]})}});T.species=V.set(ah.map(function(ak){return ak.species})).values();Z=ah;return this}else{return Z}};ab.getType=function(){return ae};ab.render=function(ao){Y=Y||V.select(ao).node();if(!Y||Y.tagName.toLowerCase()!=="div"){console.error("The argument(element) in surveyplot.rander(_) should be <div> element")}V.select(Y).classed("chart",true);p=p||V.select(Y).append("svg").classed("surveyplot",true).node();var am=T.filter(function(ap){return ap._flag});var aj=V.scale.ordinal();var ah=V.scale.linear();var an=V.scale.linear();aj.rangeRoundBands([0,v],W);an.rangeRound([z,0]);aj.domain(am.map(function(ap){return ap.name}));an.domain([0,Z.length-1]);var ai=V.svg.axis().scale(aj).orient("bottom").tickSize(X);var ag=V.svg.axis().scale(an).orient("left").ticks(s).tickSize(H).tickFormat(N);r=V.select(Y).select(".floatTag").node()?V.select(Y).select(".floatTag"):ab.floatTag(Y);var al=V.select(p).attr({width:l,height:n}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+ad+","+ac+")");al.call(function(ap){ap.append("svg:g").classed("dimensions",true);ap.append("svg:g").classed("x-axis axis",true);ap.append("svg:g").classed("y-axis axis",true);ap.append("svg:g").classed("legends",true)});al=V.select(p).select("g");var af=al.select(".dimensions").selectAll(".dimension").data(am);af.exit().transition().duration(F/2).style("opacity",0).remove();w(af,aj,ah,an,am);A(af,aj,ah,an,am);var ak=al.select(".legends").attr("transform","translate("+M+","+L+")").selectAll(".legend").data(T);ak.exit().transition().duration(F).style("opacity",0).remove();R(ak);aa(ak,am);C(al,ai,ag,aj)};function w(ai,ag,af,aj,ah){ai.transition().duration(F).attr("transform",function(ak){return"translate("+ag(ak.name)+", 0)"}).each(function(an){var am=ag.rangeBand();var al=Math.round(z/Z.length)+1;af.domain([0,an.extent[1]]).range([0,am]);var ak=V.select(this).selectAll(".box").data(Z);ak.exit().transition().duration(F).style("opacity",0).remove();ak.on("mouseover",function(ao){ah.forEach(function(ap){V.select(ao.dimensions[ap.name]).style("fill",J(Z.length))});B(ao,true,ah)}).on("mouseout",function(ao){ah.forEach(function(ap){V.select(ao.dimensions[ap.name]).style("fill",function(){return J(ao.species)})});B(ao,false,ah)}).transition().duration(F/2).style("fill",function(ao){ao.dimensions[an.name]=this;return J(ao.species)}).attr("x",function(ao){return(am-af(ao[an.name]))/2}).attr("y",function(ap,ao){return aj(ao)}).attr("width",function(ao){return af(ao[an.name])}).attr("height",function(){return al});ak.enter().append("svg:rect").classed("box",true).style("stroke","none").style("fill",function(ao){ao.dimensions[an.name]=this;return J(ao.species)}).on("mouseover",function(ao){ah.forEach(function(ap){V.select(ao.dimensions[ap.name]).style("fill",J(Z.length))});B(ao,true,ah)}).on("mouseout",function(ao){ah.forEach(function(ap){V.select(ao.dimensions[ap.name]).style("fill",function(){return J(ao.species)})});B(ao,false,ah)}).transition().duration(F/2).attr("x",function(ao){return(am-af(ao[an.name]))/2}).attr("y",function(ap,ao){return aj(ao)}).attr("width",function(ao){return af(ao[an.name])}).attr("height",function(){return al})})}function A(ai,ag,af,aj,ah){ai.enter().append("svg:g").classed("dimension",true).transition().duration(F).attr("transform",function(ak){return"translate("+ag(ak.name)+", 0)"}).each(function(am){var al=ag.rangeBand();var ak=Math.round(z/Z.length)+1;af.domain([0,am.extent[1]]).range([0,al]);V.select(this).selectAll(".box").data(Z).enter().append("svg:rect").classed("box",true).style("stroke","none").style("fill",function(an){an.dimensions[am.name]=this;return J(an.species)}).on("mouseover",function(an){ah.forEach(function(ao){V.select(an.dimensions[ao.name]).style("fill",J(Z.length))});B(an,true,ah)}).on("mouseout",function(an){ah.forEach(function(ao){V.select(an.dimensions[ao.name]).style("fill",function(){return J(an.species)})});B(an,false,ah)}).transition().duration(F/2).attr("x",function(an){return(al-af(an[am.name]))/2}).attr("y",function(ao,an){return aj(an)}).attr("width",function(an){return af(an[am.name])}).attr("height",function(){return ak})})}function aa(af,ag){af.enter().append("svg:g").classed("legend",true).style("cursor","pointer").on("click",function(ah){if(!V.select(this).classed("none")){if(ag.length>1){V.select(this).classed("none",true);ah._flag=false;ab.render()}}else{V.select(this).classed("none",false);ah._flag=true;ab.render()}}).each(function(ai,ah){V.select(this).append("svg:rect").attr({x:(ah-ah%u)/u*x+v+20,y:ah%u*20}).attr({width:10,height:10}).style({fill:J(ah),stroke:J(ah)}).style("fill-opacity",ai._flag?1:0).style("opacity",0).transition().duration(F/2).style("opacity",1);V.select(this).append("svg:text").attr({x:(ah-ah%u)/u*x+v+40,y:ah%u*20+9}).style({opacity:0,"font-size":t,fill:q,"font-family":m}).transition().duration(F/2).style("opacity",1).text(ai.name)})}function R(af){af.each(function(ah,ag){V.select(this).selectAll("rect").transition().duration(F/2).style({fill:J(ag),stroke:J(ag)}).style("fill-opacity",ah._flag?1:0).attr({x:(ag-ag%u)/u*x+v+20,y:ag%u*20});V.select(this).selectAll("text").transition().duration(F/2).attr({x:(ag-ag%u)/u*x+v+40,y:ag%u*20+9}).style({"font-size":t,fill:q,"font-family":m}).text(ah.name)})}function C(ag,ah,af){ag.select(".x-axis").each(function(){V.select(this).select(".label").transition().duration(F).attr({x:v,y:-6}).style({"text-anchor":"end","font-family":m,"font-size":D,fill:S}).text(G);V.select(this).selectAll(".label").data([1]).enter().append("svg:text").classed("label",true).style({"text-anchor":"end","font-family":m,"font-size":D,fill:S}).attr({x:v,y:-6}).text(G);V.select(this).transition().duration(F).attr("transform","translate(0,"+(z+2)+")").call(ah)});ag.select(".y-axis").each(function(){V.select(this).select(".label").style({"text-anchor":"end","font-family":m,"font-size":D,fill:S}).text(I);V.select(this).selectAll(".label").data([1]).enter().append("svg:text").classed("label",true).style({"text-anchor":"end","font-family":m,"font-size":D,fill:S}).attr({transform:"rotate(-90)",y:8,dy:".71em"}).text(I);V.select(this).transition().duration(F).call(af)});ag.selectAll(".axis").call(function(ai){ai.selectAll("path").style({fill:"none",stroke:y,"stroke-width":U,"shape-rendering":"crispEdges"});ai.selectAll("line").style({fill:"none",stroke:P,"shape-rendering":"crispEdges"})});ag.select(".x-axis").selectAll(".tick").select("text").style({"text-anchor":"end","font-family":m,"font-size":K,fill:E}).attr("transform",function(){return"translate("+(this.getComputedTextLength()/2+this.getComputedTextLength()*Math.abs(Math.sin(Q)*0.5))+","+(this.getComputedTextLength()*(0.5*Math.abs(Math.sin(Q)))+5)+")rotate("+Q+")"});ag.select(".y-axis").selectAll(".tick").select("text").style({"text-anchor":"start","font-family":m,"font-size":K,fill:E}).attr("transform",function(){return"translate("+-this.getComputedTextLength()+", 0)rotate("+o+")"})}function B(ai,af,ag){if(af){var ah="";ag.forEach(function(aj){ah+=aj.name+"= "+ai[aj.name]+"<br/>"});r.style({"border-color":J(ai.species),opacity:1,textAlign:"center",margin:"auto"}).html("Attributes:<br/> "+ah+"<br/>Class: "+ai.species)}else{r.style("opacity",0)}}ab.size=function(af){if(!arguments.length){return[l,n]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in surveyplot.size(width, height) should be number and number of svg");return this}else{l=arguments[0];n=arguments[1];return this}}};ab.sizeAvail=function(af){if(!arguments.length){return[v,z]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in surveyplot.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{v=arguments[0];z=arguments[1];return this}}};ab.tran=function(af){if(!arguments.length){return[ad,ac]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in surveyplot.tran(tranX, tranY) should be number and number of svg");return this}else{ad=arguments[0];ac=arguments[1];return this}}};ab.fontSize=function(af){if(!arguments.length){return fontSize}else{if(!isFinite(arguments[0])){console.error("The arguments in surveyplot.fontSize(fontSize) should be number of text");return this}else{fontSize=arguments[0];return this}}};ab.fontFamily=function(af){if(!arguments.length){return m}else{if(typeof arguments[0]!=="string"){console.error("The arguments in surveyplot.fontFamily(fontFamily) should be string of text");return this}else{fontSize=arguments[0];return this}}};ab.duration=function(af){if(!arguments.length){return F}else{if(!isFinite(arguments[0])){console.error("The arguments in surveyplot.duration(duration) should be number of transition");return this}else{F=Math.round(arguments[0]);return this}}};ab.color=function(af){if(!arguments.length){return J}else{if(typeof arguments[0]!=="function"){console.error("The arguments in surveyplot.color(color) should be function of pvisual.color");return this}else{J=arguments[0];return this}}};ab.tickFormat=function(af){if(!arguments.length){return N}else{if(typeof arguments[0]!=="string"){console.error("The arguments in surveyplot.tickFormat(format) should be string of d3.format");return this}else{N=V.format(arguments[0]);return this}}};ab.xLegend=function(af){if(!arguments.length){return G}else{if(typeof arguments[0]!=="string"){console.error("The arguments in surveyplot.xLegend(xLegend) should be string");return this}else{G=arguments[0];return this}}};ab.yLegend=function(af){if(!arguments.length){return I}else{if(typeof arguments[0]!=="string"){console.error("The arguments in surveyplot.yLegend(yLegend) should be string");return this}else{I=arguments[0];return this}}};ab.xtickRotate=function(af){if(!arguments.length){return Q}else{if(!isFinite(arguments[0])){console.error("The arguments in surveyplot.xtickRotate(xtickRotate) should be number of tick");return this}else{Q=Math.round(arguments[0]);return this}}};ab.ytickRotate=function(af){if(!arguments.length){return o}else{if(!isFinite(arguments[0])){console.error("The arguments in surveyplot.ytickRotate(ytickRotate) should be number of tick");return this}else{o=Math.round(arguments[0]);return this}}};ab.labelSize=function(af){if(!arguments.length){return D}else{if(!isFinite(arguments[0])){console.error("The arguments in surveyplot.labelSize(labelSize) should be string");return this}else{D=arguments[0];return this}}};ab.labelColor=function(af){if(!arguments.length){return S}else{if(typeof arguments[0]!=="string"){console.error("The arguments in surveyplot.labelColor(labelColor) should be string");return this}else{S=arguments[0];return this}}};ab.ytickNumber=function(af){if(!arguments.length){return s}else{if(!isFinite(arguments[0])){console.error("The arguments in surveyplot.ytickNumber(ytickNumber) should be number of tick");return this}else{s=Math.round(arguments[0]);return this}}};ab.tickLineColor=function(af){if(!arguments.length){return P}else{if(typeof arguments[0]!=="string"){console.error("The arguments in surveyplot.tickLineColor(tickLineColor) should be string");return this}else{P=arguments[0];return this}}};ab.tickTextSize=function(af){if(!arguments.length){return K}else{if(!isFinite(arguments[0])){console.error("The arguments in surveyplot.tickTextSize(tickTextSize) should be number");return this}else{K=arguments[0];return this}}};ab.tickTextColor=function(af){if(!arguments.length){return E}else{if(typeof arguments[0]!=="string"){console.error("The arguments in surveyplot.tickTextColor(tickTextColor) should be string");return this}else{E=arguments[0];return this}}};ab.axisPathWidth=function(af){if(!arguments.length){return U}else{if(!isFinite(arguments[0])){console.error("The arguments in surveyplot.axisPathWidth(axisPathWidth) should be string");return this}else{U=arguments[0];return this}}};ab.axisPathColor=function(af){if(!arguments.length){return y}else{if(typeof arguments[0]!=="string"){console.error("The arguments in surveyplot.axisPathColor(axisPathColor) should be string");return this}else{y=arguments[0];return this}}};ab.legendTran=function(af){if(!arguments.length){return[M,L]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in surveyplot.legendTran(tranX, tranY) should be number and number of svg");return this}else{M=arguments[0];L=arguments[1];return this}}};ab.legendSize=function(af){if(!arguments.length){return t}else{if(!isFinite(arguments[0])){console.error("The arguments in surveyplot.legendSize(legendSize) should be number of text");return this}else{t=arguments[0];return this}}};ab.legendColor=function(af){if(!arguments.length){return q}else{if(typeof arguments[0]!=="string"){console.error("The arguments in surveyplot.legendColor(legendColor) should be string of text");return this}else{q=arguments[0];return this}}};ab.legendColumnNo=function(af){if(!arguments.length){return u}else{if(!isFinite(arguments[0])){console.error("The arguments in surveyplot.legendColumnNo(legendColumnNo) should be number of text");return this}else{u=arguments[0];return this}}};ab.legendRowGap=function(af){if(!arguments.length){return x}else{if(!isFinite(arguments[0])){console.error("The arguments in surveyplot.legendRowGap(legendRowGap) should be number");return this}else{x=arguments[0];return this}}};ab.padding=function(af){if(!arguments.length){return W}else{if(!isFinite(arguments[0])){console.error("The arguments in surveyplot.padding(padding) should be number");return this}else{W=arguments[0];return this}}};ab.options=function(af){if(!arguments.length){return{type:ab.getType(),width:l,height:n,widthAvail:v,heightAvail:z,tranX:ad,tranY:ac,format:N,fontFamily:m,color:J,duration:F,padding:W,xLegend:G,yLegend:I,xtickRotate:Q,ytickRotate:o,labelSize:D,labelColor:S,ytickNumber:s,tickTextSize:K,tickTextColor:E,tickLineColor:P,xtickLineLength:X,ytickLineLength:H,axisPathWidth:U,axisPathColor:y,legendColor:q,legendSize:t,legendTranX:M,legendTranY:L,legendColumnNo:u,legendRowGap:x}}else{if(typeof af!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{l=isFinite(af.width)?af.width:l;n=isFinite(af.height)?af.height:n;v=isFinite(af.widthAvail)?af.widthAvail:v;z=isFinite(af.heightAvail)?af.heightAvail:z;ad=isFinite(af.tranX)?af.tranX:ad;ac=isFinite(af.tranY)?af.tranY:ac;af.format&&ab.tickFormat(af.format);af.fontFamily&&ab.fontFamily(af.fontFamily);isFinite(af.duration)&&ab.duration(af.duration);isFinite(af.padding)&&ab.padding(af.padding);af.xLegend&&ab.xLegend(af.xLegend);af.yLegend&&ab.yLegend(af.yLegend);isFinite(af.xtickRotate)&&ab.xtickRotate(af.xtickRotate);isFinite(af.ytickRotate)&&ab.ytickRotate(af.ytickRotate);isFinite(af.labelSize)&&ab.labelSize(af.labelSize);af.labelColor&&ab.labelColor(af.labelColor);isFinite(af.ytickNumber)&&ab.ytickNumber(af.ytickNumber);isFinite(af.tickTextSize)&&ab.tickTextSize(af.tickTextSize);af.tickTextColor&&ab.tickTextColor(af.tickTextColor);af.tickLineColor&&ab.tickLineColor(af.tickLineColor);isFinite(af.xtickLineLength)&&ab.xtickLineLength(af.xtickLineLength);isFinite(af.ytickLineLength)&&ab.ytickLineLength(af.ytickLineLength);isFinite(af.axisPathWidth)&&ab.axisPathWidth(af.axisPathWidth);af.axisPathColor&&ab.axisPathColor(af.axisPathColor);af.legendColor&&ab.legendColor(af.legendColor);isFinite(af.legendSize)&&ab.legendSize(af.legendSize);M=isFinite(af.legendTranX)?af.legendTranX:M;L=isFinite(af.legendTranY)?af.legendTranY:L;isFinite(af.legendColumnNo)&&ab.legendColumnNo(af.legendColumnNo);isFinite(af.legendRowGap)&&ab.legendRowGap(af.legendRowGap);return this}}};if(arguments.length===1){ab.options(arguments[0])}return ab};h.model.tree=function(){var y=h.extend();var N=i.d3;var r="树图";var F=800;var z=500;var E=F-100;var A=z;var O;var K=50;var I=0;var p=10;var o="#000";var L="Arial";var w;var B;var m=1000;var J=N.format(",");var H=y.color();var M;var C=0;var l=function(Q,P){return 1};var n=function(Q,P){return"#CCCCCC"};var x=function(Q,P){return H(Q.depth)};var v=function(Q,P){return 4};var q=function(Q,P){return"#CCCCCC"};var D=function(Q,P){return 6};y.data=function(P){if(arguments.length){if(P.type==="xml"){P=P.root;P=u(P)}O=P;return this}else{return O}};y.getType=function(){return r};y.render=function(P){w=w||N.select(P).node();if(!w||w.tagName.toLowerCase()!=="div"){console.error("The argument(element) in tree.rander(_) should be <div> element")}N.select(w).classed("chart",true);B=B||N.select(w).append("svg").classed("tree",true).node();M=N.layout.tree().size([A,E]);O.x0=A/2;O.y0=0;var Q=N.select(B).attr({width:F,height:z}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+K+","+I+")");Q.call(function(R){R.append("svg:g").classed("links",true);R.append("svg:g").classed("nodes",true)});O.children.forEach(s);t(O)};function t(P){var Q=M.nodes(O).reverse();var W=M.links(Q);var S=N.select(".nodes").selectAll(".node").data(Q,function(Y){return Y.id||(Y.id=++C)});var X=S.exit().transition().duration(m).attr("transform",function(){return"translate("+P.y+","+P.x+")"}).remove();X.select("circle").attr("r",0);X.select("text").attr("fill-opacity",0);var T=S.enter().append("svg:g").classed("node",true).style("cursor","pointer").attr("transform",function(){return"translate("+P.y0+","+P.x0+")"}).on("click",function(Y){G(Y);t(Y)});T.append("svg:circle").attr("r",0).style("stroke",function(Z,Y){return Z._children?x(Z,Y):q(Z,Y)}).style("stroke-width",1).style("fill-opacity",function(Y){return Y._children?0.5:0});T.append("svg:text").attr({"font-size":p,fill:o,"font-family":L,"fill-opacity":0,dy:".35em"}).attr("x",function(Y){return Y.children||Y._children?-10:10}).attr("text-anchor",function(Y){return Y.children||Y._children?"end":"start"}).text(function(Y){return Y.name});var U=S.transition().duration(m).attr("transform",function(Y){return"translate("+Y.y+","+Y.x+")"});U.select("circle").attr("r",function(Z,Y){return Z.children||Z._children?v(Z,Y):D(Z,Y)}).style("fill",function(Z,Y){return Z.children||Z._children?x(Z,Y):q(Z,Y)}).style("fill-opacity",function(Y){return Y.children||Y._children?0.5:0});U.select("text").attr("fill-opacity",1);var V=N.select(".links").selectAll(".link").data(W,function(Y){return Y.target.id});var R=N.svg.diagonal().projection(function(Y){return[Y.y,Y.x]});V.enter().insert("svg:path","g").classed("link",true).style("fill","none").style("stroke",n).style("stroke-width",l).attr("d",function(){var Y={x:P.x0,y:P.y0};return R({source:Y,target:Y})}).transition().duration(m).attr("d",R);V.transition().duration(m).attr("d",R);V.exit().transition().duration(m).attr("d",function(Z){var Y={x:P.x,y:P.y};return R({source:Y,target:Y})}).remove();Q.forEach(function(Y){Y.x0=Y.x;Y.y0=Y.y})}function s(P){if(P.children){P.children.forEach(s);G(P)}}function G(P){if(P.children){P._children=P.children;P.children=null}else{P.children=P._children;P._children=null}}function u(V){if(typeof V==="object"&&V.constructor===Array){var T=0;var R;var U;var Q;V.forEach(function(X,W){if(X.name!==undefined){R=W;T++}if(X.value!==undefined){U=W;T++}});if(T===1){var P=V.filter(function(X,W){return W!==R});for(var S=0;S<P.length;S++){P[S].children.children=u(P[S].children.children)}Q={name:V[R].name,children:V.filter(function(X,W){return W!==R}).map(function(W){return W.children.children})}}if(T===2){Q={name:V[R].name,value:+V[U].value}}}return Q}y.size=function(P){if(!arguments.length){return[F,z]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in tree.size(width, height) should be number and number of svg");return this}else{F=arguments[0];z=arguments[1];return this}}};y.sizeAvail=function(P){if(!arguments.length){return[E,A]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in tree.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{E=arguments[0];A=arguments[1];return this}}};y.tran=function(P){if(!arguments.length){return[K,I]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in tree.tran(tranX, tranY) should be number and number of svg");return this}else{K=arguments[0];I=arguments[1];return this}}};y.fontSize=function(P){if(!arguments.length){return p}else{if(!isFinite(arguments[0])){console.error("The arguments in tree.fontSize(fontSize) should be number of text");return this}else{p=arguments[0];return this}}};y.fontFamily=function(P){if(!arguments.length){return L}else{if(typeof arguments[0]!=="string"){console.error("The arguments in tree.fontFamily(fontFamily) should be string of text");return this}else{p=arguments[0];return this}}};y.fontColor=function(P){if(!arguments.length){return o}else{if(typeof arguments[0]!=="string"){console.error("The arguments in tree.fontColor(fontColor) should be string of text");return this}else{o=arguments[0];return this}}};y.duration=function(P){if(!arguments.length){return m}else{if(!isFinite(arguments[0])){console.error("The arguments in tree.duration(duration) should be number of transition");return this}else{m=Math.round(arguments[0]);return this}}};y.color=function(P){if(!arguments.length){return H}else{if(typeof arguments[0]!=="function"){console.error("The arguments in tree.color(color) should be function of pvisual.color");return this}else{H=arguments[0];return this}}};y.tickFormat=function(P){if(!arguments.length){return J}else{if(typeof arguments[0]!=="string"){console.error("The arguments in tree.tickFormat(format) should be string of d3.format");return this}else{J=N.format(arguments[0]);return this}}};y.lineWidth=function(P){if(!arguments.length){return l}else{if(typeof arguments[0]!=="function"&&!isFinite(arguments[0])){console.error("The arguments in tree.lineWidth(lineWidth) should be function or number");return this}else{l=N.functor(arguments[0]);return this}}};y.lineColor=function(P){if(!arguments.length){return n}else{if(typeof arguments[0]!=="function"&&typeof arguments[0]!=="string"){console.error("The arguments in tree.lineColor(lineColor) should be function or string");return this}else{n=N.functor(arguments[0]);return this}}};y.leafSize=function(P){if(!arguments.length){return v}else{if(typeof arguments[0]!=="function"&&!isFinite(arguments[0])){console.error("The arguments in tree.leafSize(leafSize) should be function or number");return this}else{v=N.functor(arguments[0]);return this}}};y.leafColor=function(P){if(!arguments.length){return x}else{if(typeof arguments[0]!=="function"&&typeof arguments[0]!=="string"){console.error("The arguments in tree.leafColor(leafColor) should be function or string");return this}else{x=N.functor(arguments[0]);return this}}};y.nodeSize=function(P){if(!arguments.length){return D}else{if(typeof arguments[0]!=="function"&&!isFinite(arguments[0])){console.error("The arguments in tree.nodeSize(nodeSize) should be function or number");return this}else{D=N.functor(arguments[0]);return this}}};y.nodeColor=function(P){if(!arguments.length){return q}else{if(typeof arguments[0]!=="function"&&typeof arguments[0]!=="string"){console.error("The arguments in tree.nodeColor(nodeColor) should be function or string");return this}else{q=N.functor(arguments[0]);return this}}};y.options=function(P){if(!arguments.length){return{type:y.getType(),width:F,height:z,widthAvail:E,heightAvail:A,tranX:K,tranY:I,format:J,fontSize:p,fontColor:o,fontFamily:L,color:H,duration:m,lineWidth:l,lineColor:n,leafSize:v,leafColor:x,nodeSize:D,nodeColor:q}}else{if(typeof P!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{F=isFinite(P.width)?P.width:F;z=isFinite(P.height)?P.height:z;E=isFinite(P.widthAvail)?P.widthAvail:E;A=isFinite(P.heightAvail)?P.heightAvail:A;K=isFinite(P.tranX)?P.tranX:K;I=isFinite(P.tranY)?P.tranY:I;P.format&&y.tickFormat(P.format);P.fontFamily&&y.fontFamily(P.fontFamily);P.fontColor&&y.fontColor(P.fontColor);isFinite(P.fontSize)&&y.fontSize(P.fontSize);isFinite(P.duration)&&y.duration(P.duration);P.lineWidth&&y.lineWidth(P.lineWidth);P.lineColor&&y.lineColor(P.lineColor);P.leafSize&&y.leafSize(P.leafSize);P.leafColor&&y.leafColor(P.leafColor);P.nodeSize&&y.nodeSize(P.nodeSize);P.nodeColor&&y.nodeColor(P.nodeColor);return this}}};if(arguments.length===1){y.options(arguments[0])}return y};h.model.treemap=function(){var F=h.extend();var H=i.d3;var q="树状图";var y=900;var u=700;var x=y;var v=u;var I;var E=0;var C=0;var p=10;var o="#000000";var G="Arial";var s;var t;var w;var l=1000;var D=H.format(",");var A=F.color();var z;F.data=function(J){if(arguments.length){if(J.type==="xml"){J=J.root;J=r(J)}I=J;return this}else{return I}};F.getType=function(){return q};F.render=function(M){t=t||H.select(M).node();if(!t||t.tagName.toLowerCase()!=="div"){console.error("The argument(element) in treemap.rander(_) should be <div> element")}H.select(t).classed("chart",true);w=w||H.select(t).append("svg").classed("treemap",true).node();s=H.select(t).select(".floatTag").node()?H.select(t).select(".floatTag"):F.floatTag(t);s.style("visibility","hidden");var O=H.layout.treemap().round(false).size([x,v]).sticky(true).value(function(Q){return Q.value});var J=H.scale.linear().range([0,x]);var P=H.scale.linear().range([0,v]);var L=H.scale.sqrt().domain([0,1000000]).clamp(true).range([90,20]);O.nodes(I).filter(function(Q){return !Q.children});z=I;var N=H.select(w).attr({width:y,height:u}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+E+","+C+")");N.call(function(Q){Q.append("svg:g").classed("nodes",true)});N=H.select(w).select("g");var K=N.select(".nodes").selectAll(".node").data(Array.isArray(I)?I:[I]);K.exit().transition().duration(l/2).style("opacity",0).remove();K.enter().append("svg:g").classed("node",true).on("click",function(Q){return m(Q,J,P,N,L)}).on("mouseover",function(Q){n(Q,true)}).on("mouseout",function(Q){n(Q,false)}).attr("transform",function(Q){return"translate("+Q.x+","+Q.y+")"}).each(function(Q){H.select(this).append("svg:rect").style("opacity",0).transition().duration(l).attr({width:Q.dx,height:Q.dy}).style({opacity:1,fill:B(Q,L)});H.select(this).append("svg:text").attr({x:Q.dx/2,y:Q.dy/2}).text(Q.name).style("opacity",function(){return Q.dx>this.getComputedTextLength()?1:0}).transition().duration(l).style({dy:".35em","text-anchor":"middle","font-family":G,fill:o,"font-size":p})});H.select("body").on("click",function(){m(z,J,P,N,L)})};function B(L,J){var K=L;while(K.depth>1){K=K.parent}var M=H.lab(A(K.name));M.l=J(L.value);return M}function n(K,J){if(J){s.style({visibility:"visible",textAlign:"center",margin:"auto",color:"#ffffff"}).html('<p style="color:#3f7ed8; font - weight:bold; font - size:13px">name: '+K.name+"</p>value: "+D(K.value.toFixed(5)))}else{s.style("visibility","hidden")}}function m(P,J,Q,O,K){z=P.parent||I;var N=x/P.dx;var M=v/P.dy;J.domain([P.x,P.x+P.dx]);Q.domain([P.y,P.y+P.dy]);var L=O.select(".nodes").selectAll(".node").data(P.children?P.children:[P]);L.exit().transition().duration(l/2).style("opacity",0).remove();L.each(function(R){H.select(this).transition().duration(l).attr("transform","translate("+J(R.x)+","+Q(R.y)+")");H.select(this).select("rect").attr({fill:B(R,K)}).transition().duration(l).attr({width:N*R.dx-1<0?0:N*R.dx-1,height:M*R.dy-1<0?0:M*R.dy-1});H.select(this).select("text").attr({dy:".35em","text-anchor":"middle","font-family":G,"font-size":p}).text(R.name).style("opacity",function(){return N*R.dx>this.getComputedTextLength()?1:0}).transition().duration(l).attr({x:N*R.dx/2,y:M*R.dy/2})});L.enter().append("svg:g").classed("node",true).attr("transform",function(R){return"translate("+J(R.x)+","+Q(R.y)+")"}).on("click",function(R){return m(R,J,Q,O,K)}).on("mouseover",function(R){n(R,true)}).on("mouseout",function(R){n(R,false)}).each(function(R){H.select(this).append("svg:rect").attr({fill:B(R,K),width:0,height:0}).transition().duration(l).attr({width:N*R.dx-1<0?0:N*R.dx-1,height:M*R.dy-1<0?0:M*R.dy-1});H.select(this).append("svg:text").attr({dy:".35em","text-anchor":"middle","font-family":G,"font-size":p}).text(R.name).style("opacity",function(){return N*R.dx>this.getComputedTextLength()?1:0}).transition().duration(l).attr({x:N*R.dx/2,y:M*R.dy/2})});H.event.stopPropagation()}function r(P){if(typeof P==="object"&&P.constructor===Array){var N=0;var L;var O;var K;P.forEach(function(R,Q){if(R.name!==undefined){L=Q;N++}if(R.value!==undefined){O=Q;N++}});if(N===1){var J=P.filter(function(R,Q){return Q!==L});for(var M=0;M<J.length;M++){J[M].children.children=r(J[M].children.children)}K={name:P[L].name,children:P.filter(function(R,Q){return Q!==L}).map(function(Q){return Q.children.children})}}if(N===2){K={name:P[L].name,value:+P[O].value}}}return K}F.size=function(J){if(!arguments.length){return[y,u]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in treemap.size(width, height) should be number and number of svg");return this}else{y=arguments[0];u=arguments[1];return this}}};F.sizeAvail=function(J){if(!arguments.length){return[x,v]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in treemap.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{x=arguments[0];v=arguments[1];return this}}};F.tran=function(J){if(!arguments.length){return[E,C]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in treemap.tran(tranX, tranY) should be number and number of svg");return this}else{E=arguments[0];C=arguments[1];return this}}};F.fontSize=function(J){if(!arguments.length){return p}else{if(!isFinite(arguments[0])){console.error("The arguments in treemap.fontSize(fontSize) should be number of text");return this}else{p=arguments[0];return this}}};F.fontFamily=function(J){if(!arguments.length){return G}else{if(typeof arguments[0]!=="string"){console.error("The arguments in treemap.fontFamily(fontFamily) should be string of text");return this}else{p=arguments[0];return this}}};F.fontColor=function(J){if(!arguments.length){return o}else{if(typeof arguments[0]!=="string"){console.error("The arguments in treemap.fontColor(fontColor) should be string of text");return this}else{o=arguments[0];return this}}};F.duration=function(J){if(!arguments.length){return l}else{if(!isFinite(arguments[0])){console.error("The arguments in treemap.duration(duration) should be number of transition");return this}else{l=Math.round(arguments[0]);return this}}};F.color=function(J){if(!arguments.length){return A}else{if(typeof arguments[0]!=="function"){console.error("The arguments in treemap.color(color) should be function of pvisual.color");return this}else{A=arguments[0];return this}}};F.tickFormat=function(J){if(!arguments.length){return D}else{if(typeof arguments[0]!=="string"){console.error("The arguments in treemap.tickFormat(format) should be string of d3.format");return this}else{D=H.format(arguments[0]);return this}}};F.options=function(J){if(!arguments.length){return{type:F.getType(),width:y,height:u,widthAvail:x,heightAvail:v,tranX:E,tranY:C,format:D,fontSize:p,fontColor:o,fontFamily:G,color:A,duration:l}}else{if(typeof J!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{y=isFinite(J.width)?J.width:y;u=isFinite(J.height)?J.height:u;x=isFinite(J.widthAvail)?J.widthAvail:x;v=isFinite(J.heightAvail)?J.heightAvail:v;E=isFinite(J.tranX)?J.tranX:E;C=isFinite(J.tranY)?J.tranY:C;J.format&&F.tickFormat(J.format);J.fontFamily&&F.fontFamily(J.fontFamily);J.fontColor&&F.fontColor(J.fontColor);isFinite(J.fontSize)&&F.fontSize(J.fontSize);isFinite(J.duration)&&F.duration(J.duration);return this}}};if(arguments.length===1){F.options(arguments[0])}return F};h.model.wordcloud=function(){var q=h.extend();var E=i.d3;var p="Word Cloud";var y=700;var u=500;var x=y;var v=u;var F;var C=0;var A=0;var t;var w;var m=1000;var B=E.format("s");var z=q.color();var o=function(H,G){return H.value*3};var n=function(H,G){return z(G)};var D=function(H,G){return"Impact"};var s=1;var l=false;q.data=function(H){if(arguments.length){if(H.type==="xml"){H=H.root;H=H.map(function(L){var K={};L.row.row.forEach(function(N){var M=h.keys(N)[0];K[M]=N[M]});return K})}else{if(H.type==="xlsx"||H.type==="xls"){var J=[];for(var I=0;I<H.length;I++){var G=h.keys(H[I])[0];J=J.concat(H[I][G])}H=J}}F=H;return this}else{return F}};q.getType=function(){return p};q.render=function(G){t=t||E.select(G).node();if(!t||t.tagName.toLowerCase()!=="div"){console.error("The argument(element) in wordcloud.rander(_) should be <div> element")}E.select(t).classed("chart",true);w=w||E.select(t).append("svg").classed("wordcloud",true).node();var H=E.select(w).attr({width:y,height:u}).selectAll("g").data([1]).enter().append("svg:g").attr("transform","translate("+C+","+A+")");H.call(function(I){I.append("svg:g").classed("texts",true).attr("transform","translate("+y/2+","+u/2+")")});E.layout.cloud().size([x,v]).words(F.map(function(I){return{text:I.text,size:o(I),url:I.url||""}})).padding(s).rotate(function(){return l?(Math.random()*2)*90:~~(Math.random()*2)*90}).font(D).fontSize(function(I){return I.size}).on("end",r).start()};function r(H){var G=E.select(w).select(".texts").selectAll(".text").data(H);G.exit().transition().duration(m).style("opacity",0).remove();G.attr("xlink:href",function(I){return I.url}).select("text").transition().duration(m).style("fill",function(J,I){return z(I)}).attr("transform",function(I){return"translate("+[I.x,I.y]+")rotate("+I.rotate+")"}).text(function(I){return I.text});G.enter().append("svg:a").classed("text",true).attr("xlink:href",function(I){return I.url}).style("text-decoration","none").append("svg:text").style("fill",function(J,I){return z(I)}).transition().duration(m).style("font-size",function(I){return I.size+"px"}).style("font-family",D).attr("text-anchor","middle").attr("transform",function(I){return"translate("+[I.x,I.y]+")rotate("+I.rotate+")"}).text(function(I){return I.text})}q.size=function(G){if(!arguments.length){return[y,u]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in wordcloud.size(width, height) should be number and number of svg");return this}else{y=arguments[0];u=arguments[1];return this}}};q.sizeAvail=function(G){if(!arguments.length){return[x,v]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in wordcloud.sizeAvail(widthAvail, heightAvail) should be number and number of svg");return this}else{x=arguments[0];v=arguments[1];return this}}};q.tran=function(G){if(!arguments.length){return[C,A]}else{if(arguments.length!==2||!isFinite(arguments[0])||!isFinite(arguments[1])){console.error("The argument(element) in wordcloud.tran(tranX, tranY) should be number and number of svg");return this}else{C=arguments[0];A=arguments[1];return this}}};q.fontSize=function(G){if(!arguments.length){return o}else{if(typeof arguments[0]!=="function"&&!isFinite(arguments[0])){console.error("The arguments in wordcloud.fontSize(fontSize) should be function or number");return this}else{o=E.functor(arguments[0]);return this}}};q.fontFamily=function(G){if(!arguments.length){return D}else{if(typeof arguments[0]!=="function"&&typeof arguments[0]!=="string"){console.error("The arguments in wordcloud.fontFamily(fontFamily) should be function or string");return this}else{D=E.functor(arguments[0]);return this}}};q.fontColor=function(G){if(!arguments.length){return n}else{if(typeof arguments[0]!=="function"&&typeof arguments[0]!=="string"){console.error("The arguments in wordcloud.fontColor(fontColor) should be function or string");return this}else{n=E.functor(arguments[0]);return this}}};q.duration=function(G){if(!arguments.length){return m}else{if(!isFinite(arguments[0])){console.error("The arguments in wordcloud.duration(duration) should be number of transition");return this}else{m=Math.round(arguments[0]);return this}}};q.color=function(G){if(!arguments.length){return z}else{if(typeof arguments[0]!=="function"){console.error("The arguments in wordcloud.color(color) should be function of pvisual.color");return this}else{z=arguments[0];return this}}};q.tickFormat=function(G){if(!arguments.length){return B}else{if(typeof arguments[0]!=="string"){console.error("The arguments in wordcloud.tickFormat(format) should be string of d3.format");return this}else{B=E.format(arguments[0]);return this}}};q.padding=function(G){if(!arguments.length){return s}else{if(!isFinite(arguments[0])){console.error("The arguments in wordcloud.padding(padding) should be number");return this}else{s=arguments[0];return this}}};q.isRandom=function(G){if(!arguments.length){return l}else{if(typeof arguments[0]!==true&&typeof arguments[0]!==false){console.error("The arguments in wordcloud.isRandom(random) should be bool");return this}else{l=arguments[0];return this}}};q.options=function(G){if(!arguments.length){return{type:q.getType(),width:y,height:u,widthAvail:x,heightAvail:v,tranX:C,tranY:A,format:B,fontSize:o,fontColor:n,fontFamily:D,color:z,duration:m,padding:s,isRandom:l}}else{if(typeof G!=="object"){console.error("The arguments in map.options(options) should be object");return this}else{y=isFinite(G.width)?G.width:y;u=isFinite(G.height)?G.height:u;x=isFinite(G.widthAvail)?G.widthAvail:x;v=isFinite(G.heightAvail)?G.heightAvail:v;C=isFinite(G.tranX)?G.tranX:C;A=isFinite(G.tranY)?G.tranY:A;G.format&&q.tickFormat(G.format);G.fontFamily&&q.fontFamily(G.fontFamily);G.fontSize&&q.fontSize(G.fontSize);G.fontColor&&q.fontColor(G.fontColor);isFinite(G.duration)&&q.duration(G.duration);isFinite(G.padding)&&q.padding(G.padding);G.random&&q.random(G.random);return this}}};if(arguments.length===1){q.options(arguments[0])}return q};function e(l){if(l===null){return false}if(l===""){return false}return true}function j(q){var o=this;var l;var p;if(typeof(q[0])==="number"){l="numeric"}else{if(typeof(q[0])==="string"){p=[];q.forEach(function(r){p.push(r)});p.sort();for(var m=1;m<p.length;m++){if(p[m-1]===p[m]){p.splice(m-1,1);m--}}l=p}else{if(q[0].constructor===Array){l="array"}else{l={};var n=h.keys(q[0]);n.forEach(function(r){p=new Array;q.forEach(function(s){p.push(s[r])});l[r]=j.call(o,p)})}}}return l}function g(q,m,p){var o=this;var n;if(q.constructor===Array){var l=j.call(o,q);n={meta:{name:m,numInstances:q.length,isNested:false,numAttributes:h.keys(q[0]).length,numMiss:p,attributes:l},data:q}}else{n={meta:{name:m,isNested:true},data:q}}return n}function c(m,l,r){var q=this;q.flag=true;if(!e(m)){q.flag=false;console.error("Wrong input in data 1. Automatically delete data 1.");q.numMiss++;q.data.splice(0,1);return true}else{if(!e(l)){q.flag=false;console.error("Wrong input in data "+(r+1)+". Automatically delete data "+(r+1)+".");q.numMiss++;q.data.constructor===Array&&q.data.splice(r,1);return true}}if(typeof(m)!==typeof(l)){return false}else{if(typeof(m)==="string"||typeof(m)==="number"){return true}else{if(typeof(m)==="object"){var t,s;if(m.constructor===Array){t=s=Object.keys(m)}else{t=h.keys(m);s=h.keys(l);if(t.length!==s.length){return false}}for(var n=0;n<t.length;n++){var p=m[t[n]];var o=l[s[n]];if(!q.flag){break}if(!c.call(q,p,o,r)){return false}}return true}}}}function b(q){var p=this;if(typeof q==="number"||typeof q==="string"){return true}var o=h.keys(q);for(var l=0;l<o.length;l++){if(typeof q[o[l]]==="object"){if(q.constructor===Array&&q.length>1){for(var m=1,n;m<q.length;m++){if(!p.flag){m--}n=q[m];if(m<q.length){if(!c.call(p,q[0],n,m)){console.error(((m===0)||(m===1))?"Wrong data structure: 0 or 1":"Wrong data structure: "+(m+1))}}else{break}}}else{if(!b.call(p,q[o[l]])){return false}}}}return true}function a(r,s,t){var v=r.children;t[s]=v;s++;if(v.length===0){var u=r.textContent;s--;if(u==="0"){return 0}else{return +u||u}}else{var l={};var n=t[s-1].length;if(n===1){l[t[s-1][0].tagName]=a(t[s-1][0],s,t)}else{var m=[];for(var p=0;p<n;p++){var q={};q[t[s-1][p].tagName]=a(t[s-1][p],s,t);m.push(q)}l[r.tagName]=m}s--;return l}}i.pvisual=h}(window));